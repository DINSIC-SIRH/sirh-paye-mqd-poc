<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project activeEnvironment="Default" name="TEST_IVTR_UC_01" resourceRoot="" soapui-version="4.6.2" abortOnError="false" runType="SEQUENTIAL" xmlns:con="http://eviware.com/soapui/config"><con:settings><con:setting id="WsdlSettings@cache-wsdls">true</con:setting></con:settings><con:interface xsi:type="con:WsdlInterface" wsaVersion="NONE" name="SiriProducerRpcBinding" type="wsdl" bindingName="{http://wsdl.siri.org.uk}SiriProducerRpcBinding" soapVersion="1_1" anonymous="optional" definition="/home/paul/Desktop/XSD SIRI/Siri_XML-2.0k-IDF2.4 (+SubscriptionTerminated and SG7 change preview)/xsd/siri_wsProducer.wsdl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache/><con:endpoints><con:endpoint>http://L276002:8080/test35Producer</con:endpoint><con:endpoint>http://cloudwatt-pc-dev-00:8080/test2Producer_2</con:endpoint><con:endpoint>http://cloudwatt-pc-dev-00:8088/ratpProducer</con:endpoint><con:endpoint>http://localhost:8282/requete/GeneralMessageSOAPPort</con:endpoint><con:endpoint>http://www.siri-service-location.com</con:endpoint></con:endpoints><con:operation isOneWay="false" action="CheckStatus" name="CheckStatus" bindingOperationName="CheckStatus" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call name="Request 1"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8090/sncfProducer</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsdl="http://wsdl.siri.org.uk" xmlns:siri="http://www.siri.org.uk/siri">
   <soapenv:Header/>
   <soapenv:Body>
      <wsdl:CheckStatus>
         <Request>
            <siri:RequestTimestamp>?</siri:RequestTimestamp>
            <!--Optional:-->
            <siri:AccountId>?</siri:AccountId>
            <!--Optional:-->
            <siri:AccountKey>?</siri:AccountKey>
            <!--Optional:-->
            <siri:Address>?</siri:Address>
            <siri:RequestorRef>?</siri:RequestorRef>
            <!--Optional:-->
            <siri:MessageIdentifier>?</siri:MessageIdentifier>
            <!--Optional:-->
            <siri:DelegatorAddress>?</siri:DelegatorAddress>
            <!--Optional:-->
            <siri:DelegatorRef>?</siri:DelegatorRef>
         </Request>
         <RequestExtension>
            <!--You may enter ANY elements at this point-->
         </RequestExtension>
      </wsdl:CheckStatus>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="CheckStatus"/><con:wsrmConfig version="1.2"/></con:call></con:operation><con:operation isOneWay="false" action="DataSupply" name="DataSupply" bindingOperationName="DataSupply" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8282/requete/GeneralMessageSOAPPort</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsdl="http://wsdl.siri.org.uk" xmlns:siri="http://www.siri.org.uk/siri">
   <soapenv:Header/>
   <soapenv:Body>
      <wsdl:DataSupply>
         <DataSupplyRequestInfo>
            <siri:RequestTimestamp>?</siri:RequestTimestamp>
            <!--Optional:-->
            <siri:AccountId>?</siri:AccountId>
            <!--Optional:-->
            <siri:AccountKey>?</siri:AccountKey>
            <!--Optional:-->
            <siri:Address>?</siri:Address>
            <!--Optional:-->
            <siri:ConsumerRef>?</siri:ConsumerRef>
            <!--Optional:-->
            <siri:MessageIdentifier>?</siri:MessageIdentifier>
            <!--Optional:-->
            <siri:DelegatorAddress>?</siri:DelegatorAddress>
            <!--Optional:-->
            <siri:DelegatorRef>?</siri:DelegatorRef>
         </DataSupplyRequestInfo>
         <Request>
            <!--Optional:-->
            <siri:NotificationRef>?</siri:NotificationRef>
            <!--Optional:-->
            <siri:AllData>false</siri:AllData>
         </Request>
         <RequestExtension>
            <!--You may enter ANY elements at this point-->
         </RequestExtension>
      </wsdl:DataSupply>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:wsaConfig mustUnderstand="NONE" version="200508" action="DataSupply"/></con:call></con:operation><con:operation isOneWay="false" action="DeleteSubscription" name="DeleteSubscription" bindingOperationName="DeleteSubscription" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8282/requete/GeneralMessageSOAPPort</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsdl="http://wsdl.siri.org.uk" xmlns:siri="http://www.siri.org.uk/siri">
   <soapenv:Header/>
   <soapenv:Body>
      <wsdl:DeleteSubscription>
         <DeleteSubscriptionInfo>
            <siri:RequestTimestamp>?</siri:RequestTimestamp>
            <!--Optional:-->
            <siri:AccountId>?</siri:AccountId>
            <!--Optional:-->
            <siri:AccountKey>?</siri:AccountKey>
            <!--Optional:-->
            <siri:Address>?</siri:Address>
            <siri:RequestorRef>?</siri:RequestorRef>
            <!--Optional:-->
            <siri:MessageIdentifier>?</siri:MessageIdentifier>
            <!--Optional:-->
            <siri:DelegatorAddress>?</siri:DelegatorAddress>
            <!--Optional:-->
            <siri:DelegatorRef>?</siri:DelegatorRef>
         </DeleteSubscriptionInfo>
         <Request>
            <!--Optional:-->
            <siri:SubscriberRef>?</siri:SubscriberRef>
            <!--You have a CHOICE of the next 2 items at this level-->
            <siri:All>?</siri:All>
            <!--1 or more repetitions:-->
            <siri:SubscriptionRef>?</siri:SubscriptionRef>
         </Request>
         <RequestExtension>
            <!--You may enter ANY elements at this point-->
         </RequestExtension>
      </wsdl:DeleteSubscription>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:wsaConfig mustUnderstand="NONE" version="200508" action="DeleteSubscription"/></con:call></con:operation><con:operation isOneWay="false" action="GetCapabilities" name="GetCapabilities" bindingOperationName="GetCapabilities" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8282/requete/GeneralMessageSOAPPort</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsdl="http://wsdl.siri.org.uk" xmlns:siri="http://www.siri.org.uk/siri">
   <soapenv:Header/>
   <soapenv:Body>
      <wsdl:GetCapabilities>
         <Request version="2.0">
            <siri:RequestTimestamp>?</siri:RequestTimestamp>
            <!--Optional:-->
            <siri:AccountId>?</siri:AccountId>
            <!--Optional:-->
            <siri:AccountKey>?</siri:AccountKey>
            <!--Optional:-->
            <siri:Address>?</siri:Address>
            <siri:RequestorRef>?</siri:RequestorRef>
            <!--Optional:-->
            <siri:DelegatorAddress>?</siri:DelegatorAddress>
            <!--Optional:-->
            <siri:DelegatorRef>?</siri:DelegatorRef>
            <!--Optional:-->
            <siri:ProductionTimetableCapabilitiesRequest version="2.0">
               <siri:RequestTimestamp>?</siri:RequestTimestamp>
               <!--Optional:-->
               <siri:MessageIdentifier>?</siri:MessageIdentifier>
               <!--Optional:-->
               <siri:ParticipantPermissions>false</siri:ParticipantPermissions>
               <!--Optional:-->
               <siri:Extensions>
                  <!--You may enter ANY elements at this point-->
               </siri:Extensions>
            </siri:ProductionTimetableCapabilitiesRequest>
            <!--Optional:-->
            <siri:EstimatedTimetableCapabilitiesRequest version="2.0">
               <siri:RequestTimestamp>?</siri:RequestTimestamp>
               <!--Optional:-->
               <siri:MessageIdentifier>?</siri:MessageIdentifier>
               <!--Optional:-->
               <siri:ParticipantPermissions>false</siri:ParticipantPermissions>
               <!--Optional:-->
               <siri:Extensions>
                  <!--You may enter ANY elements at this point-->
               </siri:Extensions>
            </siri:EstimatedTimetableCapabilitiesRequest>
            <!--Optional:-->
            <siri:StopTimetableCapabilitiesRequest version="2.0">
               <siri:RequestTimestamp>?</siri:RequestTimestamp>
               <!--Optional:-->
               <siri:MessageIdentifier>?</siri:MessageIdentifier>
               <!--Optional:-->
               <siri:ParticipantPermissions>false</siri:ParticipantPermissions>
               <!--Optional:-->
               <siri:Extensions>
                  <!--You may enter ANY elements at this point-->
               </siri:Extensions>
            </siri:StopTimetableCapabilitiesRequest>
            <!--Optional:-->
            <siri:StopMonitoringCapabilitiesRequest version="2.0">
               <siri:RequestTimestamp>?</siri:RequestTimestamp>
               <!--Optional:-->
               <siri:MessageIdentifier>?</siri:MessageIdentifier>
               <!--Optional:-->
               <siri:ParticipantPermissions>false</siri:ParticipantPermissions>
               <!--Optional:-->
               <siri:Extensions>
                  <!--You may enter ANY elements at this point-->
               </siri:Extensions>
            </siri:StopMonitoringCapabilitiesRequest>
            <!--Optional:-->
            <siri:VehicleMonitoringCapabilitiesRequest version="2.0">
               <siri:RequestTimestamp>?</siri:RequestTimestamp>
               <!--Optional:-->
               <siri:MessageIdentifier>?</siri:MessageIdentifier>
               <!--Optional:-->
               <siri:ParticipantPermissions>false</siri:ParticipantPermissions>
               <!--Optional:-->
               <siri:Extensions>
                  <!--You may enter ANY elements at this point-->
               </siri:Extensions>
            </siri:VehicleMonitoringCapabilitiesRequest>
            <!--Optional:-->
            <siri:ConnectionTimetableCapabilitiesRequest version="2.0">
               <siri:RequestTimestamp>?</siri:RequestTimestamp>
               <!--Optional:-->
               <siri:MessageIdentifier>?</siri:MessageIdentifier>
               <!--Optional:-->
               <siri:ParticipantPermissions>false</siri:ParticipantPermissions>
               <!--Optional:-->
               <siri:Extensions>
                  <!--You may enter ANY elements at this point-->
               </siri:Extensions>
            </siri:ConnectionTimetableCapabilitiesRequest>
            <!--Optional:-->
            <siri:ConnectionMonitoringCapabilitiesRequest version="2.0">
               <siri:RequestTimestamp>?</siri:RequestTimestamp>
               <!--Optional:-->
               <siri:MessageIdentifier>?</siri:MessageIdentifier>
               <!--Optional:-->
               <siri:ParticipantPermissions>false</siri:ParticipantPermissions>
               <!--Optional:-->
               <siri:Extensions>
                  <!--You may enter ANY elements at this point-->
               </siri:Extensions>
            </siri:ConnectionMonitoringCapabilitiesRequest>
            <!--Optional:-->
            <siri:GeneralMessageCapabilitiesRequest version="2.0">
               <siri:RequestTimestamp>?</siri:RequestTimestamp>
               <!--Optional:-->
               <siri:MessageIdentifier>?</siri:MessageIdentifier>
               <!--Optional:-->
               <siri:ParticipantPermissions>false</siri:ParticipantPermissions>
               <!--Optional:-->
               <siri:Extensions>
                  <!--You may enter ANY elements at this point-->
               </siri:Extensions>
            </siri:GeneralMessageCapabilitiesRequest>
            <!--Optional:-->
            <siri:FacilityMonitoringCapabilitiesRequest version="2.0">
               <siri:RequestTimestamp>?</siri:RequestTimestamp>
               <!--Optional:-->
               <siri:MessageIdentifier>?</siri:MessageIdentifier>
               <!--Optional:-->
               <siri:ParticipantPermissions>false</siri:ParticipantPermissions>
               <!--Optional:-->
               <siri:Extensions>
                  <!--You may enter ANY elements at this point-->
               </siri:Extensions>
            </siri:FacilityMonitoringCapabilitiesRequest>
            <!--Optional:-->
            <siri:SituationExchangeCapabilitiesRequest version="2.0">
               <siri:RequestTimestamp>?</siri:RequestTimestamp>
               <!--Optional:-->
               <siri:MessageIdentifier>?</siri:MessageIdentifier>
               <!--Optional:-->
               <siri:ParticipantPermissions>false</siri:ParticipantPermissions>
               <!--Optional:-->
               <siri:Extensions>
                  <!--You may enter ANY elements at this point-->
               </siri:Extensions>
            </siri:SituationExchangeCapabilitiesRequest>
         </Request>
         <RequestExtension>
            <!--You may enter ANY elements at this point-->
         </RequestExtension>
      </wsdl:GetCapabilities>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetCapabilities"/></con:call></con:operation><con:operation isOneWay="false" action="GetConnectionMonitoring" name="GetConnectionMonitoring" bindingOperationName="GetConnectionMonitoring" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8282/requete/GeneralMessageSOAPPort</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsdl="http://wsdl.siri.org.uk" xmlns:siri="http://www.siri.org.uk/siri">
   <soapenv:Header/>
   <soapenv:Body>
      <wsdl:GetConnectionMonitoring>
         <ServiceRequestInfo>
            <!--Optional:-->
            <siri:ServiceRequestContext>
               <!--Optional:-->
               <siri:CheckStatusAddress>?</siri:CheckStatusAddress>
               <!--Optional:-->
               <siri:SubscribeAddress>?</siri:SubscribeAddress>
               <!--Optional:-->
               <siri:ManageSubscriptionAddress>?</siri:ManageSubscriptionAddress>
               <!--Optional:-->
               <siri:GetDataAddress>?</siri:GetDataAddress>
               <!--Optional:-->
               <siri:StatusResponseAddress>?</siri:StatusResponseAddress>
               <!--Optional:-->
               <siri:SubscriberAddress>?</siri:SubscriberAddress>
               <!--Optional:-->
               <siri:NotifyAddress>?</siri:NotifyAddress>
               <!--Optional:-->
               <siri:ConsumerAddress>?</siri:ConsumerAddress>
               <!--Optional:-->
               <siri:DataNameSpaces>
                  <!--Optional:-->
                  <siri:StopPointNameSpace>?</siri:StopPointNameSpace>
                  <!--Optional:-->
                  <siri:LineNameSpace>?</siri:LineNameSpace>
                  <!--Optional:-->
                  <siri:ProductCategoryNameSpace>?</siri:ProductCategoryNameSpace>
                  <!--Optional:-->
                  <siri:ServiceFeatureNameSpace>?</siri:ServiceFeatureNameSpace>
                  <!--Optional:-->
                  <siri:VehicleFeatureNameSpace>?</siri:VehicleFeatureNameSpace>
               </siri:DataNameSpaces>
               <!--Optional:-->
               <siri:Language>en</siri:Language>
               <!--You have a CHOICE of the next 2 items at this level-->
               <siri:WgsDecimalDegrees>?</siri:WgsDecimalDegrees>
               <siri:GmlCoordinateFormat>?</siri:GmlCoordinateFormat>
               <!--Optional:-->
               <siri:DistanceUnits>?</siri:DistanceUnits>
               <!--Optional:-->
               <siri:VelocityUnits>?</siri:VelocityUnits>
               <!--Optional:-->
               <siri:DataHorizon>?</siri:DataHorizon>
               <!--Optional:-->
               <siri:RequestTimeout>?</siri:RequestTimeout>
               <!--Optional:-->
               <siri:DeliveryMethod>direct</siri:DeliveryMethod>
               <!--Optional:-->
               <siri:MultipartDespatch>?</siri:MultipartDespatch>
               <!--Optional:-->
               <siri:ConfirmDelivery>false</siri:ConfirmDelivery>
               <!--Optional:-->
               <siri:MaximimumNumberOfSubscriptions>?</siri:MaximimumNumberOfSubscriptions>
               <!--Optional:-->
               <siri:AllowedPredictors>anyone</siri:AllowedPredictors>
               <!--Optional:-->
               <siri:PredictionFunction>?</siri:PredictionFunction>
            </siri:ServiceRequestContext>
            <siri:RequestTimestamp>?</siri:RequestTimestamp>
            <!--Optional:-->
            <siri:AccountId>?</siri:AccountId>
            <!--Optional:-->
            <siri:AccountKey>?</siri:AccountKey>
            <!--Optional:-->
            <siri:Address>?</siri:Address>
            <siri:RequestorRef>?</siri:RequestorRef>
            <!--Optional:-->
            <siri:MessageIdentifier>?</siri:MessageIdentifier>
            <!--Optional:-->
            <siri:DelegatorAddress>?</siri:DelegatorAddress>
            <!--Optional:-->
            <siri:DelegatorRef>?</siri:DelegatorRef>
         </ServiceRequestInfo>
         <Request version="2.0">
            <siri:RequestTimestamp>?</siri:RequestTimestamp>
            <!--Optional:-->
            <siri:MessageIdentifier>?</siri:MessageIdentifier>
            <!--Optional:-->
            <siri:PreviewInterval>?</siri:PreviewInterval>
            <siri:ConnectionLinkRef>?</siri:ConnectionLinkRef>
            <!--You have a CHOICE of the next 2 items at this level-->
            <siri:ConnectingTimeFilter>
               <siri:LineRef>?</siri:LineRef>
               <siri:DirectionRef>?</siri:DirectionRef>
               <!--Optional:-->
               <siri:EarliestArrivalTime>?</siri:EarliestArrivalTime>
               <!--Optional:-->
               <siri:LatestArrivalTime>?</siri:LatestArrivalTime>
            </siri:ConnectingTimeFilter>
            <!--1 or more repetitions:-->
            <siri:ConnectingJourneyFilter>
               <siri:DatedVehicleJourneyRef>?</siri:DatedVehicleJourneyRef>
               <!--Optional:-->
               <siri:VisitNumber>?</siri:VisitNumber>
               <siri:TimetabledArrivalTime>?</siri:TimetabledArrivalTime>
            </siri:ConnectingJourneyFilter>
            <!--Optional:-->
            <siri:Language>en</siri:Language>
            <!--Optional:-->
            <siri:IncludeTranslations>?</siri:IncludeTranslations>
            <!--Optional:-->
            <siri:ConnectionMonitoringDetailLevel>?</siri:ConnectionMonitoringDetailLevel>
            <!--Optional:-->
            <siri:Extensions>
               <!--You may enter ANY elements at this point-->
            </siri:Extensions>
         </Request>
         <RequestExtension>
            <!--You may enter ANY elements at this point-->
         </RequestExtension>
      </wsdl:GetConnectionMonitoring>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetConnectionMonitoring"/></con:call></con:operation><con:operation isOneWay="false" action="GetConnectionTimetable" name="GetConnectionTimetable" bindingOperationName="GetConnectionTimetable" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8282/requete/GeneralMessageSOAPPort</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsdl="http://wsdl.siri.org.uk" xmlns:siri="http://www.siri.org.uk/siri">
   <soapenv:Header/>
   <soapenv:Body>
      <wsdl:GetConnectionTimetable>
         <ServiceRequestInfo>
            <!--Optional:-->
            <siri:ServiceRequestContext>
               <!--Optional:-->
               <siri:CheckStatusAddress>?</siri:CheckStatusAddress>
               <!--Optional:-->
               <siri:SubscribeAddress>?</siri:SubscribeAddress>
               <!--Optional:-->
               <siri:ManageSubscriptionAddress>?</siri:ManageSubscriptionAddress>
               <!--Optional:-->
               <siri:GetDataAddress>?</siri:GetDataAddress>
               <!--Optional:-->
               <siri:StatusResponseAddress>?</siri:StatusResponseAddress>
               <!--Optional:-->
               <siri:SubscriberAddress>?</siri:SubscriberAddress>
               <!--Optional:-->
               <siri:NotifyAddress>?</siri:NotifyAddress>
               <!--Optional:-->
               <siri:ConsumerAddress>?</siri:ConsumerAddress>
               <!--Optional:-->
               <siri:DataNameSpaces>
                  <!--Optional:-->
                  <siri:StopPointNameSpace>?</siri:StopPointNameSpace>
                  <!--Optional:-->
                  <siri:LineNameSpace>?</siri:LineNameSpace>
                  <!--Optional:-->
                  <siri:ProductCategoryNameSpace>?</siri:ProductCategoryNameSpace>
                  <!--Optional:-->
                  <siri:ServiceFeatureNameSpace>?</siri:ServiceFeatureNameSpace>
                  <!--Optional:-->
                  <siri:VehicleFeatureNameSpace>?</siri:VehicleFeatureNameSpace>
               </siri:DataNameSpaces>
               <!--Optional:-->
               <siri:Language>en</siri:Language>
               <!--You have a CHOICE of the next 2 items at this level-->
               <siri:WgsDecimalDegrees>?</siri:WgsDecimalDegrees>
               <siri:GmlCoordinateFormat>?</siri:GmlCoordinateFormat>
               <!--Optional:-->
               <siri:DistanceUnits>?</siri:DistanceUnits>
               <!--Optional:-->
               <siri:VelocityUnits>?</siri:VelocityUnits>
               <!--Optional:-->
               <siri:DataHorizon>?</siri:DataHorizon>
               <!--Optional:-->
               <siri:RequestTimeout>?</siri:RequestTimeout>
               <!--Optional:-->
               <siri:DeliveryMethod>direct</siri:DeliveryMethod>
               <!--Optional:-->
               <siri:MultipartDespatch>?</siri:MultipartDespatch>
               <!--Optional:-->
               <siri:ConfirmDelivery>false</siri:ConfirmDelivery>
               <!--Optional:-->
               <siri:MaximimumNumberOfSubscriptions>?</siri:MaximimumNumberOfSubscriptions>
               <!--Optional:-->
               <siri:AllowedPredictors>anyone</siri:AllowedPredictors>
               <!--Optional:-->
               <siri:PredictionFunction>?</siri:PredictionFunction>
            </siri:ServiceRequestContext>
            <siri:RequestTimestamp>?</siri:RequestTimestamp>
            <!--Optional:-->
            <siri:AccountId>?</siri:AccountId>
            <!--Optional:-->
            <siri:AccountKey>?</siri:AccountKey>
            <!--Optional:-->
            <siri:Address>?</siri:Address>
            <siri:RequestorRef>?</siri:RequestorRef>
            <!--Optional:-->
            <siri:MessageIdentifier>?</siri:MessageIdentifier>
            <!--Optional:-->
            <siri:DelegatorAddress>?</siri:DelegatorAddress>
            <!--Optional:-->
            <siri:DelegatorRef>?</siri:DelegatorRef>
         </ServiceRequestInfo>
         <Request version="2.0">
            <siri:RequestTimestamp>?</siri:RequestTimestamp>
            <!--Optional:-->
            <siri:MessageIdentifier>?</siri:MessageIdentifier>
            <!--Optional:-->
            <siri:ArrivalWindow>
               <siri:StartTime>?</siri:StartTime>
               <siri:EndTime>?</siri:EndTime>
            </siri:ArrivalWindow>
            <siri:ConnectionLinkRef>?</siri:ConnectionLinkRef>
            <!--Optional:-->
            <siri:LineRef>?</siri:LineRef>
            <!--Optional:-->
            <siri:DirectionRef>?</siri:DirectionRef>
            <!--Optional:-->
            <siri:Language>en</siri:Language>
            <!--Optional:-->
            <siri:IncludeTranslations>?</siri:IncludeTranslations>
            <!--Optional:-->
            <siri:Extensions>
               <!--You may enter ANY elements at this point-->
            </siri:Extensions>
         </Request>
         <RequestExtension>
            <!--You may enter ANY elements at this point-->
         </RequestExtension>
      </wsdl:GetConnectionTimetable>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetConnectionTimetable"/></con:call></con:operation><con:operation isOneWay="false" action="GetEstimatedTimetable" name="GetEstimatedTimetable" bindingOperationName="GetEstimatedTimetable" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8282/requete/GeneralMessageSOAPPort</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsdl="http://wsdl.siri.org.uk" xmlns:siri="http://www.siri.org.uk/siri">
   <soapenv:Header/>
   <soapenv:Body>
      <wsdl:GetEstimatedTimetable>
         <ServiceRequestInfo>
            <!--Optional:-->
            <siri:ServiceRequestContext>
               <!--Optional:-->
               <siri:CheckStatusAddress>?</siri:CheckStatusAddress>
               <!--Optional:-->
               <siri:SubscribeAddress>?</siri:SubscribeAddress>
               <!--Optional:-->
               <siri:ManageSubscriptionAddress>?</siri:ManageSubscriptionAddress>
               <!--Optional:-->
               <siri:GetDataAddress>?</siri:GetDataAddress>
               <!--Optional:-->
               <siri:StatusResponseAddress>?</siri:StatusResponseAddress>
               <!--Optional:-->
               <siri:SubscriberAddress>?</siri:SubscriberAddress>
               <!--Optional:-->
               <siri:NotifyAddress>?</siri:NotifyAddress>
               <!--Optional:-->
               <siri:ConsumerAddress>?</siri:ConsumerAddress>
               <!--Optional:-->
               <siri:DataNameSpaces>
                  <!--Optional:-->
                  <siri:StopPointNameSpace>?</siri:StopPointNameSpace>
                  <!--Optional:-->
                  <siri:LineNameSpace>?</siri:LineNameSpace>
                  <!--Optional:-->
                  <siri:ProductCategoryNameSpace>?</siri:ProductCategoryNameSpace>
                  <!--Optional:-->
                  <siri:ServiceFeatureNameSpace>?</siri:ServiceFeatureNameSpace>
                  <!--Optional:-->
                  <siri:VehicleFeatureNameSpace>?</siri:VehicleFeatureNameSpace>
               </siri:DataNameSpaces>
               <!--Optional:-->
               <siri:Language>en</siri:Language>
               <!--You have a CHOICE of the next 2 items at this level-->
               <siri:WgsDecimalDegrees>?</siri:WgsDecimalDegrees>
               <siri:GmlCoordinateFormat>?</siri:GmlCoordinateFormat>
               <!--Optional:-->
               <siri:DistanceUnits>?</siri:DistanceUnits>
               <!--Optional:-->
               <siri:VelocityUnits>?</siri:VelocityUnits>
               <!--Optional:-->
               <siri:DataHorizon>?</siri:DataHorizon>
               <!--Optional:-->
               <siri:RequestTimeout>?</siri:RequestTimeout>
               <!--Optional:-->
               <siri:DeliveryMethod>direct</siri:DeliveryMethod>
               <!--Optional:-->
               <siri:MultipartDespatch>?</siri:MultipartDespatch>
               <!--Optional:-->
               <siri:ConfirmDelivery>false</siri:ConfirmDelivery>
               <!--Optional:-->
               <siri:MaximimumNumberOfSubscriptions>?</siri:MaximimumNumberOfSubscriptions>
               <!--Optional:-->
               <siri:AllowedPredictors>anyone</siri:AllowedPredictors>
               <!--Optional:-->
               <siri:PredictionFunction>?</siri:PredictionFunction>
            </siri:ServiceRequestContext>
            <siri:RequestTimestamp>?</siri:RequestTimestamp>
            <!--Optional:-->
            <siri:AccountId>?</siri:AccountId>
            <!--Optional:-->
            <siri:AccountKey>?</siri:AccountKey>
            <!--Optional:-->
            <siri:Address>?</siri:Address>
            <siri:RequestorRef>?</siri:RequestorRef>
            <!--Optional:-->
            <siri:MessageIdentifier>?</siri:MessageIdentifier>
            <!--Optional:-->
            <siri:DelegatorAddress>?</siri:DelegatorAddress>
            <!--Optional:-->
            <siri:DelegatorRef>?</siri:DelegatorRef>
         </ServiceRequestInfo>
         <Request version="2.0">
            <siri:RequestTimestamp>?</siri:RequestTimestamp>
            <!--Optional:-->
            <siri:MessageIdentifier>?</siri:MessageIdentifier>
            <!--Optional:-->
            <siri:PreviewInterval>?</siri:PreviewInterval>
            <!--Optional:-->
            <siri:TimetableVersionRef>?</siri:TimetableVersionRef>
            <!--Zero or more repetitions:-->
            <siri:OperatorRef>?</siri:OperatorRef>
            <!--Optional:-->
            <siri:Lines>
               <!--1 or more repetitions:-->
               <siri:LineDirection>
                  <siri:LineRef>?</siri:LineRef>
                  <!--Optional:-->
                  <siri:DirectionRef>?</siri:DirectionRef>
               </siri:LineDirection>
            </siri:Lines>
            <!--Optional:-->
            <siri:Language>en</siri:Language>
            <!--Optional:-->
            <siri:IncludeTranslations>?</siri:IncludeTranslations>
            <!--Optional:-->
            <siri:EstimatedTimetableDetailLevel>?</siri:EstimatedTimetableDetailLevel>
            <!--Optional:-->
            <siri:Extensions>
               <!--You may enter ANY elements at this point-->
            </siri:Extensions>
         </Request>
         <RequestExtension>
            <!--You may enter ANY elements at this point-->
         </RequestExtension>
      </wsdl:GetEstimatedTimetable>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetEstimatedTimetable"/></con:call></con:operation><con:operation isOneWay="false" action="GetFacilityMonitoring" name="GetFacilityMonitoring" bindingOperationName="GetFacilityMonitoring" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8282/requete/GeneralMessageSOAPPort</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsdl="http://wsdl.siri.org.uk" xmlns:siri="http://www.siri.org.uk/siri" xmlns:acsb="http://www.ifopt.org.uk/acsb">
   <soapenv:Header/>
   <soapenv:Body>
      <wsdl:GetFacilityMonitoring>
         <ServiceRequestInfo>
            <!--Optional:-->
            <siri:ServiceRequestContext>
               <!--Optional:-->
               <siri:CheckStatusAddress>?</siri:CheckStatusAddress>
               <!--Optional:-->
               <siri:SubscribeAddress>?</siri:SubscribeAddress>
               <!--Optional:-->
               <siri:ManageSubscriptionAddress>?</siri:ManageSubscriptionAddress>
               <!--Optional:-->
               <siri:GetDataAddress>?</siri:GetDataAddress>
               <!--Optional:-->
               <siri:StatusResponseAddress>?</siri:StatusResponseAddress>
               <!--Optional:-->
               <siri:SubscriberAddress>?</siri:SubscriberAddress>
               <!--Optional:-->
               <siri:NotifyAddress>?</siri:NotifyAddress>
               <!--Optional:-->
               <siri:ConsumerAddress>?</siri:ConsumerAddress>
               <!--Optional:-->
               <siri:DataNameSpaces>
                  <!--Optional:-->
                  <siri:StopPointNameSpace>?</siri:StopPointNameSpace>
                  <!--Optional:-->
                  <siri:LineNameSpace>?</siri:LineNameSpace>
                  <!--Optional:-->
                  <siri:ProductCategoryNameSpace>?</siri:ProductCategoryNameSpace>
                  <!--Optional:-->
                  <siri:ServiceFeatureNameSpace>?</siri:ServiceFeatureNameSpace>
                  <!--Optional:-->
                  <siri:VehicleFeatureNameSpace>?</siri:VehicleFeatureNameSpace>
               </siri:DataNameSpaces>
               <!--Optional:-->
               <siri:Language>en</siri:Language>
               <!--You have a CHOICE of the next 2 items at this level-->
               <siri:WgsDecimalDegrees>?</siri:WgsDecimalDegrees>
               <siri:GmlCoordinateFormat>?</siri:GmlCoordinateFormat>
               <!--Optional:-->
               <siri:DistanceUnits>?</siri:DistanceUnits>
               <!--Optional:-->
               <siri:VelocityUnits>?</siri:VelocityUnits>
               <!--Optional:-->
               <siri:DataHorizon>?</siri:DataHorizon>
               <!--Optional:-->
               <siri:RequestTimeout>?</siri:RequestTimeout>
               <!--Optional:-->
               <siri:DeliveryMethod>direct</siri:DeliveryMethod>
               <!--Optional:-->
               <siri:MultipartDespatch>?</siri:MultipartDespatch>
               <!--Optional:-->
               <siri:ConfirmDelivery>false</siri:ConfirmDelivery>
               <!--Optional:-->
               <siri:MaximimumNumberOfSubscriptions>?</siri:MaximimumNumberOfSubscriptions>
               <!--Optional:-->
               <siri:AllowedPredictors>anyone</siri:AllowedPredictors>
               <!--Optional:-->
               <siri:PredictionFunction>?</siri:PredictionFunction>
            </siri:ServiceRequestContext>
            <siri:RequestTimestamp>?</siri:RequestTimestamp>
            <!--Optional:-->
            <siri:AccountId>?</siri:AccountId>
            <!--Optional:-->
            <siri:AccountKey>?</siri:AccountKey>
            <!--Optional:-->
            <siri:Address>?</siri:Address>
            <siri:RequestorRef>?</siri:RequestorRef>
            <!--Optional:-->
            <siri:MessageIdentifier>?</siri:MessageIdentifier>
            <!--Optional:-->
            <siri:DelegatorAddress>?</siri:DelegatorAddress>
            <!--Optional:-->
            <siri:DelegatorRef>?</siri:DelegatorRef>
         </ServiceRequestInfo>
         <Request version="2.0">
            <siri:RequestTimestamp>?</siri:RequestTimestamp>
            <!--Optional:-->
            <siri:MessageIdentifier>?</siri:MessageIdentifier>
            <!--Optional:-->
            <siri:PreviewInterval>?</siri:PreviewInterval>
            <!--Optional:-->
            <siri:StartTime>?</siri:StartTime>
            <!--Zero or more repetitions:-->
            <siri:FacilityRef>?</siri:FacilityRef>
            <!--Optional:-->
            <siri:FeatureRef>?</siri:FeatureRef>
            <!--Optional:-->
            <siri:LineRef>?</siri:LineRef>
            <!--Optional:-->
            <siri:StopPointRef>?</siri:StopPointRef>
            <!--Optional:-->
            <siri:ConnectionLinkRef>?</siri:ConnectionLinkRef>
            <!--You have a CHOICE of the next 2 items at this level-->
            <siri:FramedVehicleJourneyRef>
               <siri:DataFrameRef>?</siri:DataFrameRef>
               <siri:DatedVehicleJourneyRef>?</siri:DatedVehicleJourneyRef>
            </siri:FramedVehicleJourneyRef>
            <siri:VehicleJourneyRef>?</siri:VehicleJourneyRef>
            <!--Optional:-->
            <siri:InterchangeRef>?</siri:InterchangeRef>
            <!--Optional:-->
            <siri:VehicleRef>?</siri:VehicleRef>
            <!--Optional:-->
            <siri:StopPlaceRef>?</siri:StopPlaceRef>
            <!--Optional:-->
            <siri:StopPlaceComponentRef>?</siri:StopPlaceComponentRef>
            <!--Zero or more repetitions:-->
            <siri:AccessibilityNeedsFilter>
               <!--1 or more repetitions:-->
               <siri:UserNeed>
                  <!--You have a CHOICE of the next 4 items at this level-->
                  <acsb:MobilityNeed>?</acsb:MobilityNeed>
                  <acsb:PsychosensoryNeed>?</acsb:PsychosensoryNeed>
                  <acsb:MedicalNeed>?</acsb:MedicalNeed>
                  <acsb:EncumbranceNeed>?</acsb:EncumbranceNeed>
                  <!--Optional:-->
                  <acsb:Excluded>?</acsb:Excluded>
                  <!--Optional:-->
                  <acsb:NeedRanking>?</acsb:NeedRanking>
                  <!--Optional:-->
                  <acsb:Extensions>?</acsb:Extensions>
               </siri:UserNeed>
            </siri:AccessibilityNeedsFilter>
            <!--Optional:-->
            <siri:Language>en</siri:Language>
            <!--Optional:-->
            <siri:IncludeTranslations>?</siri:IncludeTranslations>
            <!--Optional:-->
            <siri:MaximumNumberOfFacilityConditions>?</siri:MaximumNumberOfFacilityConditions>
            <!--Optional:-->
            <siri:Extensions>
               <!--You may enter ANY elements at this point-->
            </siri:Extensions>
         </Request>
         <RequestExtension>
            <!--You may enter ANY elements at this point-->
         </RequestExtension>
      </wsdl:GetFacilityMonitoring>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetFacilityMonitoring"/></con:call></con:operation><con:operation isOneWay="false" action="GetGeneralMessage" name="GetGeneralMessage" bindingOperationName="GetGeneralMessage" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8282/requete/GeneralMessageSOAPPort</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsdl="http://wsdl.siri.org.uk" xmlns:siri="http://www.siri.org.uk/siri">
   <soapenv:Header/>
   <soapenv:Body>
      <wsdl:GetGeneralMessage>
         <ServiceRequestInfo>
            <!--Optional:-->
            <siri:ServiceRequestContext>
               <!--Optional:-->
               <siri:CheckStatusAddress>?</siri:CheckStatusAddress>
               <!--Optional:-->
               <siri:SubscribeAddress>?</siri:SubscribeAddress>
               <!--Optional:-->
               <siri:ManageSubscriptionAddress>?</siri:ManageSubscriptionAddress>
               <!--Optional:-->
               <siri:GetDataAddress>?</siri:GetDataAddress>
               <!--Optional:-->
               <siri:StatusResponseAddress>?</siri:StatusResponseAddress>
               <!--Optional:-->
               <siri:SubscriberAddress>?</siri:SubscriberAddress>
               <!--Optional:-->
               <siri:NotifyAddress>?</siri:NotifyAddress>
               <!--Optional:-->
               <siri:ConsumerAddress>?</siri:ConsumerAddress>
               <!--Optional:-->
               <siri:DataNameSpaces>
                  <!--Optional:-->
                  <siri:StopPointNameSpace>?</siri:StopPointNameSpace>
                  <!--Optional:-->
                  <siri:LineNameSpace>?</siri:LineNameSpace>
                  <!--Optional:-->
                  <siri:ProductCategoryNameSpace>?</siri:ProductCategoryNameSpace>
                  <!--Optional:-->
                  <siri:ServiceFeatureNameSpace>?</siri:ServiceFeatureNameSpace>
                  <!--Optional:-->
                  <siri:VehicleFeatureNameSpace>?</siri:VehicleFeatureNameSpace>
               </siri:DataNameSpaces>
               <!--Optional:-->
               <siri:Language>en</siri:Language>
               <!--You have a CHOICE of the next 2 items at this level-->
               <siri:WgsDecimalDegrees>?</siri:WgsDecimalDegrees>
               <siri:GmlCoordinateFormat>?</siri:GmlCoordinateFormat>
               <!--Optional:-->
               <siri:DistanceUnits>?</siri:DistanceUnits>
               <!--Optional:-->
               <siri:VelocityUnits>?</siri:VelocityUnits>
               <!--Optional:-->
               <siri:DataHorizon>?</siri:DataHorizon>
               <!--Optional:-->
               <siri:RequestTimeout>?</siri:RequestTimeout>
               <!--Optional:-->
               <siri:DeliveryMethod>direct</siri:DeliveryMethod>
               <!--Optional:-->
               <siri:MultipartDespatch>?</siri:MultipartDespatch>
               <!--Optional:-->
               <siri:ConfirmDelivery>false</siri:ConfirmDelivery>
               <!--Optional:-->
               <siri:MaximimumNumberOfSubscriptions>?</siri:MaximimumNumberOfSubscriptions>
               <!--Optional:-->
               <siri:AllowedPredictors>anyone</siri:AllowedPredictors>
               <!--Optional:-->
               <siri:PredictionFunction>?</siri:PredictionFunction>
            </siri:ServiceRequestContext>
            <siri:RequestTimestamp>?</siri:RequestTimestamp>
            <!--Optional:-->
            <siri:AccountId>?</siri:AccountId>
            <!--Optional:-->
            <siri:AccountKey>?</siri:AccountKey>
            <!--Optional:-->
            <siri:Address>?</siri:Address>
            <siri:RequestorRef>?</siri:RequestorRef>
            <!--Optional:-->
            <siri:MessageIdentifier>?</siri:MessageIdentifier>
            <!--Optional:-->
            <siri:DelegatorAddress>?</siri:DelegatorAddress>
            <!--Optional:-->
            <siri:DelegatorRef>?</siri:DelegatorRef>
         </ServiceRequestInfo>
         <Request version="2.0">
            <siri:RequestTimestamp>?</siri:RequestTimestamp>
            <!--Optional:-->
            <siri:MessageIdentifier>?</siri:MessageIdentifier>
            <!--Zero or more repetitions:-->
            <siri:InfoChannelRef>?</siri:InfoChannelRef>
            <!--Optional:-->
            <siri:Language>en</siri:Language>
            <!--Optional:-->
            <siri:Extensions>
               <!--You may enter ANY elements at this point-->
            </siri:Extensions>
         </Request>
         <RequestExtension>
            <!--You may enter ANY elements at this point-->
         </RequestExtension>
      </wsdl:GetGeneralMessage>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetGeneralMessage"/></con:call></con:operation><con:operation isOneWay="false" action="GetMultipleStopMonitoring" name="GetMultipleStopMonitoring" bindingOperationName="GetMultipleStopMonitoring" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8282/requete/GeneralMessageSOAPPort</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsdl="http://wsdl.siri.org.uk" xmlns:siri="http://www.siri.org.uk/siri">
   <soapenv:Header/>
   <soapenv:Body>
      <wsdl:GetMultipleStopMonitoring>
         <ServiceRequestInfo>
            <!--Optional:-->
            <siri:ServiceRequestContext>
               <!--Optional:-->
               <siri:CheckStatusAddress>?</siri:CheckStatusAddress>
               <!--Optional:-->
               <siri:SubscribeAddress>?</siri:SubscribeAddress>
               <!--Optional:-->
               <siri:ManageSubscriptionAddress>?</siri:ManageSubscriptionAddress>
               <!--Optional:-->
               <siri:GetDataAddress>?</siri:GetDataAddress>
               <!--Optional:-->
               <siri:StatusResponseAddress>?</siri:StatusResponseAddress>
               <!--Optional:-->
               <siri:SubscriberAddress>?</siri:SubscriberAddress>
               <!--Optional:-->
               <siri:NotifyAddress>?</siri:NotifyAddress>
               <!--Optional:-->
               <siri:ConsumerAddress>?</siri:ConsumerAddress>
               <!--Optional:-->
               <siri:DataNameSpaces>
                  <!--Optional:-->
                  <siri:StopPointNameSpace>?</siri:StopPointNameSpace>
                  <!--Optional:-->
                  <siri:LineNameSpace>?</siri:LineNameSpace>
                  <!--Optional:-->
                  <siri:ProductCategoryNameSpace>?</siri:ProductCategoryNameSpace>
                  <!--Optional:-->
                  <siri:ServiceFeatureNameSpace>?</siri:ServiceFeatureNameSpace>
                  <!--Optional:-->
                  <siri:VehicleFeatureNameSpace>?</siri:VehicleFeatureNameSpace>
               </siri:DataNameSpaces>
               <!--Optional:-->
               <siri:Language>en</siri:Language>
               <!--You have a CHOICE of the next 2 items at this level-->
               <siri:WgsDecimalDegrees>?</siri:WgsDecimalDegrees>
               <siri:GmlCoordinateFormat>?</siri:GmlCoordinateFormat>
               <!--Optional:-->
               <siri:DistanceUnits>?</siri:DistanceUnits>
               <!--Optional:-->
               <siri:VelocityUnits>?</siri:VelocityUnits>
               <!--Optional:-->
               <siri:DataHorizon>?</siri:DataHorizon>
               <!--Optional:-->
               <siri:RequestTimeout>?</siri:RequestTimeout>
               <!--Optional:-->
               <siri:DeliveryMethod>direct</siri:DeliveryMethod>
               <!--Optional:-->
               <siri:MultipartDespatch>?</siri:MultipartDespatch>
               <!--Optional:-->
               <siri:ConfirmDelivery>false</siri:ConfirmDelivery>
               <!--Optional:-->
               <siri:MaximimumNumberOfSubscriptions>?</siri:MaximimumNumberOfSubscriptions>
               <!--Optional:-->
               <siri:AllowedPredictors>anyone</siri:AllowedPredictors>
               <!--Optional:-->
               <siri:PredictionFunction>?</siri:PredictionFunction>
            </siri:ServiceRequestContext>
            <siri:RequestTimestamp>?</siri:RequestTimestamp>
            <!--Optional:-->
            <siri:AccountId>?</siri:AccountId>
            <!--Optional:-->
            <siri:AccountKey>?</siri:AccountKey>
            <!--Optional:-->
            <siri:Address>?</siri:Address>
            <siri:RequestorRef>?</siri:RequestorRef>
            <!--Optional:-->
            <siri:MessageIdentifier>?</siri:MessageIdentifier>
            <!--Optional:-->
            <siri:DelegatorAddress>?</siri:DelegatorAddress>
            <!--Optional:-->
            <siri:DelegatorRef>?</siri:DelegatorRef>
         </ServiceRequestInfo>
         <Request version="2.0">
            <siri:RequestTimestamp>?</siri:RequestTimestamp>
            <!--Optional:-->
            <siri:MessageIdentifier>?</siri:MessageIdentifier>
            <!--1 or more repetitions:-->
            <siri:StopMonitoringFIlter>
               <!--Optional:-->
               <siri:PreviewInterval>?</siri:PreviewInterval>
               <!--Optional:-->
               <siri:StartTime>?</siri:StartTime>
               <siri:MonitoringRef>?</siri:MonitoringRef>
               <!--Optional:-->
               <siri:OperatorRef>?</siri:OperatorRef>
               <!--Optional:-->
               <siri:LineRef>?</siri:LineRef>
               <!--Optional:-->
               <siri:DirectionRef>?</siri:DirectionRef>
               <!--Optional:-->
               <siri:DestinationRef>?</siri:DestinationRef>
               <!--Optional:-->
               <siri:StopVisitTypes>all</siri:StopVisitTypes>
               <!--Optional:-->
               <siri:Language>false</siri:Language>
               <!--Optional:-->
               <siri:IncludeTranslations>?</siri:IncludeTranslations>
               <!--Optional:-->
               <siri:MaximumStopVisits>?</siri:MaximumStopVisits>
               <!--You have a CHOICE of the next 2 items at this level-->
               <!--Optional:-->
               <siri:MinimumStopVisitsPerLine>?</siri:MinimumStopVisitsPerLine>
               <!--Optional:-->
               <siri:MinimumStopVisitsPerLineVia>?</siri:MinimumStopVisitsPerLineVia>
               <!--Optional:-->
               <siri:MaximumTextLength>30</siri:MaximumTextLength>
               <!--Optional:-->
               <siri:StopMonitoringDetailLevel>normal</siri:StopMonitoringDetailLevel>
               <!--Optional:-->
               <siri:IncludeSituations>?</siri:IncludeSituations>
               <!--Optional:-->
               <siri:MaximumNumberOfCalls>
                  <!--Optional:-->
                  <siri:Previous>?</siri:Previous>
                  <!--Optional:-->
                  <siri:Onwards>?</siri:Onwards>
               </siri:MaximumNumberOfCalls>
               <!--Optional:-->
               <siri:Extensions>
                  <!--You may enter ANY elements at this point-->
               </siri:Extensions>
            </siri:StopMonitoringFIlter>
         </Request>
         <RequestExtension>
            <!--You may enter ANY elements at this point-->
         </RequestExtension>
      </wsdl:GetMultipleStopMonitoring>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetMultipleStopMonitoring"/></con:call></con:operation><con:operation isOneWay="false" action="GetProductionTimetable" name="GetProductionTimetable" bindingOperationName="GetProductionTimetable" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8282/requete/GeneralMessageSOAPPort</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsdl="http://wsdl.siri.org.uk" xmlns:siri="http://www.siri.org.uk/siri">
   <soapenv:Header/>
   <soapenv:Body>
      <wsdl:GetProductionTimetable>
         <ServiceRequestInfo>
            <!--Optional:-->
            <siri:ServiceRequestContext>
               <!--Optional:-->
               <siri:CheckStatusAddress>?</siri:CheckStatusAddress>
               <!--Optional:-->
               <siri:SubscribeAddress>?</siri:SubscribeAddress>
               <!--Optional:-->
               <siri:ManageSubscriptionAddress>?</siri:ManageSubscriptionAddress>
               <!--Optional:-->
               <siri:GetDataAddress>?</siri:GetDataAddress>
               <!--Optional:-->
               <siri:StatusResponseAddress>?</siri:StatusResponseAddress>
               <!--Optional:-->
               <siri:SubscriberAddress>?</siri:SubscriberAddress>
               <!--Optional:-->
               <siri:NotifyAddress>?</siri:NotifyAddress>
               <!--Optional:-->
               <siri:ConsumerAddress>?</siri:ConsumerAddress>
               <!--Optional:-->
               <siri:DataNameSpaces>
                  <!--Optional:-->
                  <siri:StopPointNameSpace>?</siri:StopPointNameSpace>
                  <!--Optional:-->
                  <siri:LineNameSpace>?</siri:LineNameSpace>
                  <!--Optional:-->
                  <siri:ProductCategoryNameSpace>?</siri:ProductCategoryNameSpace>
                  <!--Optional:-->
                  <siri:ServiceFeatureNameSpace>?</siri:ServiceFeatureNameSpace>
                  <!--Optional:-->
                  <siri:VehicleFeatureNameSpace>?</siri:VehicleFeatureNameSpace>
               </siri:DataNameSpaces>
               <!--Optional:-->
               <siri:Language>en</siri:Language>
               <!--You have a CHOICE of the next 2 items at this level-->
               <siri:WgsDecimalDegrees>?</siri:WgsDecimalDegrees>
               <siri:GmlCoordinateFormat>?</siri:GmlCoordinateFormat>
               <!--Optional:-->
               <siri:DistanceUnits>?</siri:DistanceUnits>
               <!--Optional:-->
               <siri:VelocityUnits>?</siri:VelocityUnits>
               <!--Optional:-->
               <siri:DataHorizon>?</siri:DataHorizon>
               <!--Optional:-->
               <siri:RequestTimeout>?</siri:RequestTimeout>
               <!--Optional:-->
               <siri:DeliveryMethod>direct</siri:DeliveryMethod>
               <!--Optional:-->
               <siri:MultipartDespatch>?</siri:MultipartDespatch>
               <!--Optional:-->
               <siri:ConfirmDelivery>false</siri:ConfirmDelivery>
               <!--Optional:-->
               <siri:MaximimumNumberOfSubscriptions>?</siri:MaximimumNumberOfSubscriptions>
               <!--Optional:-->
               <siri:AllowedPredictors>anyone</siri:AllowedPredictors>
               <!--Optional:-->
               <siri:PredictionFunction>?</siri:PredictionFunction>
            </siri:ServiceRequestContext>
            <siri:RequestTimestamp>?</siri:RequestTimestamp>
            <!--Optional:-->
            <siri:AccountId>?</siri:AccountId>
            <!--Optional:-->
            <siri:AccountKey>?</siri:AccountKey>
            <!--Optional:-->
            <siri:Address>?</siri:Address>
            <siri:RequestorRef>?</siri:RequestorRef>
            <!--Optional:-->
            <siri:MessageIdentifier>?</siri:MessageIdentifier>
            <!--Optional:-->
            <siri:DelegatorAddress>?</siri:DelegatorAddress>
            <!--Optional:-->
            <siri:DelegatorRef>?</siri:DelegatorRef>
         </ServiceRequestInfo>
         <Request version="2.0">
            <siri:RequestTimestamp>?</siri:RequestTimestamp>
            <!--Optional:-->
            <siri:MessageIdentifier>?</siri:MessageIdentifier>
            <!--Optional:-->
            <siri:ValidityPeriod>
               <siri:StartTime>?</siri:StartTime>
               <siri:EndTime>?</siri:EndTime>
            </siri:ValidityPeriod>
            <!--Optional:-->
            <siri:TimetableVersionRef>?</siri:TimetableVersionRef>
            <!--Zero or more repetitions:-->
            <siri:OperatorRef>?</siri:OperatorRef>
            <!--Optional:-->
            <siri:Lines>
               <!--1 or more repetitions:-->
               <siri:LineDirection>
                  <siri:LineRef>?</siri:LineRef>
                  <!--Optional:-->
                  <siri:DirectionRef>?</siri:DirectionRef>
               </siri:LineDirection>
            </siri:Lines>
            <!--Optional:-->
            <siri:Language>en</siri:Language>
            <!--Optional:-->
            <siri:IncludeTranslations>?</siri:IncludeTranslations>
            <!--Optional:-->
            <siri:IncrementalUpdates>false</siri:IncrementalUpdates>
            <!--Optional:-->
            <siri:Extensions>
               <!--You may enter ANY elements at this point-->
            </siri:Extensions>
         </Request>
         <RequestExtension>
            <!--You may enter ANY elements at this point-->
         </RequestExtension>
      </wsdl:GetProductionTimetable>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetProductionTimetable"/></con:call></con:operation><con:operation isOneWay="false" action="GetSiriService" name="GetSiriService" bindingOperationName="GetSiriService" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8282/requete/GeneralMessageSOAPPort</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsdl="http://wsdl.siri.org.uk" xmlns:siri="http://www.siri.org.uk/siri" xmlns:acsb="http://www.ifopt.org.uk/acsb">
   <soapenv:Header/>
   <soapenv:Body>
      <wsdl:GetSiriService>
         <Request>
            <!--Optional:-->
            <siri:ServiceRequestContext>
               <!--Optional:-->
               <siri:CheckStatusAddress>?</siri:CheckStatusAddress>
               <!--Optional:-->
               <siri:SubscribeAddress>?</siri:SubscribeAddress>
               <!--Optional:-->
               <siri:ManageSubscriptionAddress>?</siri:ManageSubscriptionAddress>
               <!--Optional:-->
               <siri:GetDataAddress>?</siri:GetDataAddress>
               <!--Optional:-->
               <siri:StatusResponseAddress>?</siri:StatusResponseAddress>
               <!--Optional:-->
               <siri:SubscriberAddress>?</siri:SubscriberAddress>
               <!--Optional:-->
               <siri:NotifyAddress>?</siri:NotifyAddress>
               <!--Optional:-->
               <siri:ConsumerAddress>?</siri:ConsumerAddress>
               <!--Optional:-->
               <siri:DataNameSpaces>
                  <!--Optional:-->
                  <siri:StopPointNameSpace>?</siri:StopPointNameSpace>
                  <!--Optional:-->
                  <siri:LineNameSpace>?</siri:LineNameSpace>
                  <!--Optional:-->
                  <siri:ProductCategoryNameSpace>?</siri:ProductCategoryNameSpace>
                  <!--Optional:-->
                  <siri:ServiceFeatureNameSpace>?</siri:ServiceFeatureNameSpace>
                  <!--Optional:-->
                  <siri:VehicleFeatureNameSpace>?</siri:VehicleFeatureNameSpace>
               </siri:DataNameSpaces>
               <!--Optional:-->
               <siri:Language>en</siri:Language>
               <!--You have a CHOICE of the next 2 items at this level-->
               <siri:WgsDecimalDegrees>?</siri:WgsDecimalDegrees>
               <siri:GmlCoordinateFormat>?</siri:GmlCoordinateFormat>
               <!--Optional:-->
               <siri:DistanceUnits>?</siri:DistanceUnits>
               <!--Optional:-->
               <siri:VelocityUnits>?</siri:VelocityUnits>
               <!--Optional:-->
               <siri:DataHorizon>?</siri:DataHorizon>
               <!--Optional:-->
               <siri:RequestTimeout>?</siri:RequestTimeout>
               <!--Optional:-->
               <siri:DeliveryMethod>direct</siri:DeliveryMethod>
               <!--Optional:-->
               <siri:MultipartDespatch>?</siri:MultipartDespatch>
               <!--Optional:-->
               <siri:ConfirmDelivery>false</siri:ConfirmDelivery>
               <!--Optional:-->
               <siri:MaximimumNumberOfSubscriptions>?</siri:MaximimumNumberOfSubscriptions>
               <!--Optional:-->
               <siri:AllowedPredictors>anyone</siri:AllowedPredictors>
               <!--Optional:-->
               <siri:PredictionFunction>?</siri:PredictionFunction>
            </siri:ServiceRequestContext>
            <siri:RequestTimestamp>?</siri:RequestTimestamp>
            <!--Optional:-->
            <siri:AccountId>?</siri:AccountId>
            <!--Optional:-->
            <siri:AccountKey>?</siri:AccountKey>
            <!--Optional:-->
            <siri:Address>?</siri:Address>
            <siri:RequestorRef>?</siri:RequestorRef>
            <!--Optional:-->
            <siri:MessageIdentifier>?</siri:MessageIdentifier>
            <!--Optional:-->
            <siri:DelegatorAddress>?</siri:DelegatorAddress>
            <!--Optional:-->
            <siri:DelegatorRef>?</siri:DelegatorRef>
            <!--You have a CHOICE of the next 11 items at this level-->
            <!--1 or more repetitions:-->
            <siri:ProductionTimetableRequest version="2.0">
               <siri:RequestTimestamp>?</siri:RequestTimestamp>
               <!--Optional:-->
               <siri:MessageIdentifier>?</siri:MessageIdentifier>
               <!--Optional:-->
               <siri:ValidityPeriod>
                  <siri:StartTime>?</siri:StartTime>
                  <siri:EndTime>?</siri:EndTime>
               </siri:ValidityPeriod>
               <!--Optional:-->
               <siri:TimetableVersionRef>?</siri:TimetableVersionRef>
               <!--Zero or more repetitions:-->
               <siri:OperatorRef>?</siri:OperatorRef>
               <!--Optional:-->
               <siri:Lines>
                  <!--1 or more repetitions:-->
                  <siri:LineDirection>
                     <siri:LineRef>?</siri:LineRef>
                     <!--Optional:-->
                     <siri:DirectionRef>?</siri:DirectionRef>
                  </siri:LineDirection>
               </siri:Lines>
               <!--Optional:-->
               <siri:Language>en</siri:Language>
               <!--Optional:-->
               <siri:IncludeTranslations>?</siri:IncludeTranslations>
               <!--Optional:-->
               <siri:IncrementalUpdates>false</siri:IncrementalUpdates>
               <!--Optional:-->
               <siri:Extensions>
                  <!--You may enter ANY elements at this point-->
               </siri:Extensions>
            </siri:ProductionTimetableRequest>
            <!--1 or more repetitions:-->
            <siri:EstimatedTimetableRequest version="2.0">
               <siri:RequestTimestamp>?</siri:RequestTimestamp>
               <!--Optional:-->
               <siri:MessageIdentifier>?</siri:MessageIdentifier>
               <!--Optional:-->
               <siri:PreviewInterval>?</siri:PreviewInterval>
               <!--Optional:-->
               <siri:TimetableVersionRef>?</siri:TimetableVersionRef>
               <!--Zero or more repetitions:-->
               <siri:OperatorRef>?</siri:OperatorRef>
               <!--Optional:-->
               <siri:Lines>
                  <!--1 or more repetitions:-->
                  <siri:LineDirection>
                     <siri:LineRef>?</siri:LineRef>
                     <!--Optional:-->
                     <siri:DirectionRef>?</siri:DirectionRef>
                  </siri:LineDirection>
               </siri:Lines>
               <!--Optional:-->
               <siri:Language>en</siri:Language>
               <!--Optional:-->
               <siri:IncludeTranslations>?</siri:IncludeTranslations>
               <!--Optional:-->
               <siri:EstimatedTimetableDetailLevel>?</siri:EstimatedTimetableDetailLevel>
               <!--Optional:-->
               <siri:Extensions>
                  <!--You may enter ANY elements at this point-->
               </siri:Extensions>
            </siri:EstimatedTimetableRequest>
            <!--1 or more repetitions:-->
            <siri:StopTimetableRequest version="2.0">
               <siri:RequestTimestamp>?</siri:RequestTimestamp>
               <!--Optional:-->
               <siri:MessageIdentifier>?</siri:MessageIdentifier>
               <!--Optional:-->
               <siri:DepartureWindow>
                  <siri:StartTime>?</siri:StartTime>
                  <siri:EndTime>?</siri:EndTime>
               </siri:DepartureWindow>
               <siri:MonitoringRef>?</siri:MonitoringRef>
               <!--Optional:-->
               <siri:LineRef>?</siri:LineRef>
               <!--Optional:-->
               <siri:DirectionRef>?</siri:DirectionRef>
               <!--Optional:-->
               <siri:Language>en</siri:Language>
               <!--Optional:-->
               <siri:IncludeTranslations>?</siri:IncludeTranslations>
               <!--Optional:-->
               <siri:Extensions>
                  <!--You may enter ANY elements at this point-->
               </siri:Extensions>
            </siri:StopTimetableRequest>
            <!--1 or more repetitions:-->
            <siri:StopMonitoringMultipleRequest version="2.0">
               <siri:RequestTimestamp>?</siri:RequestTimestamp>
               <!--Optional:-->
               <siri:MessageIdentifier>?</siri:MessageIdentifier>
               <!--1 or more repetitions:-->
               <siri:StopMonitoringFIlter>
                  <!--Optional:-->
                  <siri:PreviewInterval>?</siri:PreviewInterval>
                  <!--Optional:-->
                  <siri:StartTime>?</siri:StartTime>
                  <siri:MonitoringRef>?</siri:MonitoringRef>
                  <!--Optional:-->
                  <siri:OperatorRef>?</siri:OperatorRef>
                  <!--Optional:-->
                  <siri:LineRef>?</siri:LineRef>
                  <!--Optional:-->
                  <siri:DirectionRef>?</siri:DirectionRef>
                  <!--Optional:-->
                  <siri:DestinationRef>?</siri:DestinationRef>
                  <!--Optional:-->
                  <siri:StopVisitTypes>all</siri:StopVisitTypes>
                  <!--Optional:-->
                  <siri:Language>false</siri:Language>
                  <!--Optional:-->
                  <siri:IncludeTranslations>?</siri:IncludeTranslations>
                  <!--Optional:-->
                  <siri:MaximumStopVisits>?</siri:MaximumStopVisits>
                  <!--You have a CHOICE of the next 2 items at this level-->
                  <!--Optional:-->
                  <siri:MinimumStopVisitsPerLine>?</siri:MinimumStopVisitsPerLine>
                  <!--Optional:-->
                  <siri:MinimumStopVisitsPerLineVia>?</siri:MinimumStopVisitsPerLineVia>
                  <!--Optional:-->
                  <siri:MaximumTextLength>30</siri:MaximumTextLength>
                  <!--Optional:-->
                  <siri:StopMonitoringDetailLevel>normal</siri:StopMonitoringDetailLevel>
                  <!--Optional:-->
                  <siri:IncludeSituations>?</siri:IncludeSituations>
                  <!--Optional:-->
                  <siri:MaximumNumberOfCalls>
                     <!--Optional:-->
                     <siri:Previous>?</siri:Previous>
                     <!--Optional:-->
                     <siri:Onwards>?</siri:Onwards>
                  </siri:MaximumNumberOfCalls>
                  <!--Optional:-->
                  <siri:Extensions>
                     <!--You may enter ANY elements at this point-->
                  </siri:Extensions>
               </siri:StopMonitoringFIlter>
            </siri:StopMonitoringMultipleRequest>
            <!--1 or more repetitions:-->
            <siri:StopMonitoringRequest version="2.0">
               <siri:RequestTimestamp>?</siri:RequestTimestamp>
               <!--Optional:-->
               <siri:MessageIdentifier>?</siri:MessageIdentifier>
               <!--Optional:-->
               <siri:PreviewInterval>?</siri:PreviewInterval>
               <!--Optional:-->
               <siri:StartTime>?</siri:StartTime>
               <siri:MonitoringRef>?</siri:MonitoringRef>
               <!--Optional:-->
               <siri:OperatorRef>?</siri:OperatorRef>
               <!--Optional:-->
               <siri:LineRef>?</siri:LineRef>
               <!--Optional:-->
               <siri:DirectionRef>?</siri:DirectionRef>
               <!--Optional:-->
               <siri:DestinationRef>?</siri:DestinationRef>
               <!--Optional:-->
               <siri:StopVisitTypes>all</siri:StopVisitTypes>
               <!--Optional:-->
               <siri:Language>false</siri:Language>
               <!--Optional:-->
               <siri:IncludeTranslations>?</siri:IncludeTranslations>
               <!--Optional:-->
               <siri:MaximumStopVisits>?</siri:MaximumStopVisits>
               <!--You have a CHOICE of the next 2 items at this level-->
               <!--Optional:-->
               <siri:MinimumStopVisitsPerLine>?</siri:MinimumStopVisitsPerLine>
               <!--Optional:-->
               <siri:MinimumStopVisitsPerLineVia>?</siri:MinimumStopVisitsPerLineVia>
               <!--Optional:-->
               <siri:MaximumTextLength>30</siri:MaximumTextLength>
               <!--Optional:-->
               <siri:StopMonitoringDetailLevel>normal</siri:StopMonitoringDetailLevel>
               <!--Optional:-->
               <siri:IncludeSituations>?</siri:IncludeSituations>
               <!--Optional:-->
               <siri:MaximumNumberOfCalls>
                  <!--Optional:-->
                  <siri:Previous>?</siri:Previous>
                  <!--Optional:-->
                  <siri:Onwards>?</siri:Onwards>
               </siri:MaximumNumberOfCalls>
               <!--Optional:-->
               <siri:Extensions>
                  <!--You may enter ANY elements at this point-->
               </siri:Extensions>
            </siri:StopMonitoringRequest>
            <!--1 or more repetitions:-->
            <siri:VehicleMonitoringRequest version="2.0">
               <siri:RequestTimestamp>?</siri:RequestTimestamp>
               <!--Optional:-->
               <siri:MessageIdentifier>?</siri:MessageIdentifier>
               <!--Optional:-->
               <siri:VehicleMonitoringRef>?</siri:VehicleMonitoringRef>
               <!--You have a CHOICE of the next 2 items at this level-->
               <siri:VehicleRef>?</siri:VehicleRef>
               <siri:LineRef>?</siri:LineRef>
               <!--Optional:-->
               <siri:DirectionRef>?</siri:DirectionRef>
               <!--Optional:-->
               <siri:Language>en</siri:Language>
               <!--Optional:-->
               <siri:IncludeTranslations>?</siri:IncludeTranslations>
               <!--Optional:-->
               <siri:MaximumVehicles>?</siri:MaximumVehicles>
               <!--Optional:-->
               <siri:VehicleMonitoringDetailLevel>?</siri:VehicleMonitoringDetailLevel>
               <!--Optional:-->
               <siri:MaximumNumberOfCalls>
                  <!--Optional:-->
                  <siri:Previous>?</siri:Previous>
                  <!--Optional:-->
                  <siri:Onwards>?</siri:Onwards>
               </siri:MaximumNumberOfCalls>
               <!--Optional:-->
               <siri:IncludeSituations>?</siri:IncludeSituations>
               <!--Optional:-->
               <siri:Extensions>
                  <!--You may enter ANY elements at this point-->
               </siri:Extensions>
            </siri:VehicleMonitoringRequest>
            <!--1 or more repetitions:-->
            <siri:ConnectionTimetableRequest version="2.0">
               <siri:RequestTimestamp>?</siri:RequestTimestamp>
               <!--Optional:-->
               <siri:MessageIdentifier>?</siri:MessageIdentifier>
               <!--Optional:-->
               <siri:ArrivalWindow>
                  <siri:StartTime>?</siri:StartTime>
                  <siri:EndTime>?</siri:EndTime>
               </siri:ArrivalWindow>
               <siri:ConnectionLinkRef>?</siri:ConnectionLinkRef>
               <!--Optional:-->
               <siri:LineRef>?</siri:LineRef>
               <!--Optional:-->
               <siri:DirectionRef>?</siri:DirectionRef>
               <!--Optional:-->
               <siri:Language>en</siri:Language>
               <!--Optional:-->
               <siri:IncludeTranslations>?</siri:IncludeTranslations>
               <!--Optional:-->
               <siri:Extensions>
                  <!--You may enter ANY elements at this point-->
               </siri:Extensions>
            </siri:ConnectionTimetableRequest>
            <!--1 or more repetitions:-->
            <siri:ConnectionMonitoringRequest version="2.0">
               <siri:RequestTimestamp>?</siri:RequestTimestamp>
               <!--Optional:-->
               <siri:MessageIdentifier>?</siri:MessageIdentifier>
               <!--Optional:-->
               <siri:PreviewInterval>?</siri:PreviewInterval>
               <siri:ConnectionLinkRef>?</siri:ConnectionLinkRef>
               <!--You have a CHOICE of the next 2 items at this level-->
               <siri:ConnectingTimeFilter>
                  <siri:LineRef>?</siri:LineRef>
                  <siri:DirectionRef>?</siri:DirectionRef>
                  <!--Optional:-->
                  <siri:EarliestArrivalTime>?</siri:EarliestArrivalTime>
                  <!--Optional:-->
                  <siri:LatestArrivalTime>?</siri:LatestArrivalTime>
               </siri:ConnectingTimeFilter>
               <!--1 or more repetitions:-->
               <siri:ConnectingJourneyFilter>
                  <siri:DatedVehicleJourneyRef>?</siri:DatedVehicleJourneyRef>
                  <!--Optional:-->
                  <siri:VisitNumber>?</siri:VisitNumber>
                  <siri:TimetabledArrivalTime>?</siri:TimetabledArrivalTime>
               </siri:ConnectingJourneyFilter>
               <!--Optional:-->
               <siri:Language>en</siri:Language>
               <!--Optional:-->
               <siri:IncludeTranslations>?</siri:IncludeTranslations>
               <!--Optional:-->
               <siri:ConnectionMonitoringDetailLevel>?</siri:ConnectionMonitoringDetailLevel>
               <!--Optional:-->
               <siri:Extensions>
                  <!--You may enter ANY elements at this point-->
               </siri:Extensions>
            </siri:ConnectionMonitoringRequest>
            <!--1 or more repetitions:-->
            <siri:GeneralMessageRequest version="2.0">
               <siri:RequestTimestamp>?</siri:RequestTimestamp>
               <!--Optional:-->
               <siri:MessageIdentifier>?</siri:MessageIdentifier>
               <!--Zero or more repetitions:-->
               <siri:InfoChannelRef>?</siri:InfoChannelRef>
               <!--Optional:-->
               <siri:Language>en</siri:Language>
               <!--Optional:-->
               <siri:Extensions>
                  <!--You may enter ANY elements at this point-->
               </siri:Extensions>
            </siri:GeneralMessageRequest>
            <!--1 or more repetitions:-->
            <siri:FacilityMonitoringRequest version="2.0">
               <siri:RequestTimestamp>?</siri:RequestTimestamp>
               <!--Optional:-->
               <siri:MessageIdentifier>?</siri:MessageIdentifier>
               <!--Optional:-->
               <siri:PreviewInterval>?</siri:PreviewInterval>
               <!--Optional:-->
               <siri:StartTime>?</siri:StartTime>
               <!--Zero or more repetitions:-->
               <siri:FacilityRef>?</siri:FacilityRef>
               <!--Optional:-->
               <siri:FeatureRef>?</siri:FeatureRef>
               <!--Optional:-->
               <siri:LineRef>?</siri:LineRef>
               <!--Optional:-->
               <siri:StopPointRef>?</siri:StopPointRef>
               <!--Optional:-->
               <siri:ConnectionLinkRef>?</siri:ConnectionLinkRef>
               <!--You have a CHOICE of the next 2 items at this level-->
               <siri:FramedVehicleJourneyRef>
                  <siri:DataFrameRef>?</siri:DataFrameRef>
                  <siri:DatedVehicleJourneyRef>?</siri:DatedVehicleJourneyRef>
               </siri:FramedVehicleJourneyRef>
               <siri:VehicleJourneyRef>?</siri:VehicleJourneyRef>
               <!--Optional:-->
               <siri:InterchangeRef>?</siri:InterchangeRef>
               <!--Optional:-->
               <siri:VehicleRef>?</siri:VehicleRef>
               <!--Optional:-->
               <siri:StopPlaceRef>?</siri:StopPlaceRef>
               <!--Optional:-->
               <siri:StopPlaceComponentRef>?</siri:StopPlaceComponentRef>
               <!--Zero or more repetitions:-->
               <siri:AccessibilityNeedsFilter>
                  <!--1 or more repetitions:-->
                  <siri:UserNeed>
                     <!--You have a CHOICE of the next 4 items at this level-->
                     <acsb:MobilityNeed>?</acsb:MobilityNeed>
                     <acsb:PsychosensoryNeed>?</acsb:PsychosensoryNeed>
                     <acsb:MedicalNeed>?</acsb:MedicalNeed>
                     <acsb:EncumbranceNeed>?</acsb:EncumbranceNeed>
                     <!--Optional:-->
                     <acsb:Excluded>?</acsb:Excluded>
                     <!--Optional:-->
                     <acsb:NeedRanking>?</acsb:NeedRanking>
                     <!--Optional:-->
                     <acsb:Extensions>?</acsb:Extensions>
                  </siri:UserNeed>
               </siri:AccessibilityNeedsFilter>
               <!--Optional:-->
               <siri:Language>en</siri:Language>
               <!--Optional:-->
               <siri:IncludeTranslations>?</siri:IncludeTranslations>
               <!--Optional:-->
               <siri:MaximumNumberOfFacilityConditions>?</siri:MaximumNumberOfFacilityConditions>
               <!--Optional:-->
               <siri:Extensions>
                  <!--You may enter ANY elements at this point-->
               </siri:Extensions>
            </siri:FacilityMonitoringRequest>
            <!--1 or more repetitions:-->
            <siri:SituationExchangeRequest version="2.0">
               <siri:RequestTimestamp>?</siri:RequestTimestamp>
               <!--Optional:-->
               <siri:MessageIdentifier>?</siri:MessageIdentifier>
               <!--Optional:-->
               <siri:PreviewInterval>?</siri:PreviewInterval>
               <!--Optional:-->
               <siri:StartTime>?</siri:StartTime>
               <!--Optional:-->
               <siri:VehicleMode>unknown</siri:VehicleMode>
               <!--You have a CHOICE of the next 7 items at this level-->
               <siri:AirSubmode>unknown</siri:AirSubmode>
               <siri:BusSubmode>unknown</siri:BusSubmode>
               <siri:CoachSubmode>unknown</siri:CoachSubmode>
               <siri:MetroSubmode>unknown</siri:MetroSubmode>
               <siri:RailSubmode>unknown</siri:RailSubmode>
               <siri:TramSubmode>unknown</siri:TramSubmode>
               <siri:WaterSubmode>unknown</siri:WaterSubmode>
               <!--Optional:-->
               <siri:AccessMode>?</siri:AccessMode>
               <!--Optional:-->
               <siri:Severity>?</siri:Severity>
               <!--Zero or more repetitions:-->
               <siri:Scope>?</siri:Scope>
               <!--Optional:-->
               <siri:Predictability>?</siri:Predictability>
               <!--Optional:-->
               <siri:Keywords>?</siri:Keywords>
               <!--Optional:-->
               <siri:Verification>?</siri:Verification>
               <!--Zero or more repetitions:-->
               <siri:Progress>open</siri:Progress>
               <!--Optional:-->
               <siri:Reality>?</siri:Reality>
               <!--Optional:-->
               <siri:OperatorRef>?</siri:OperatorRef>
               <!--Zero or more repetitions:-->
               <siri:OperationalUnitRef>?</siri:OperationalUnitRef>
               <!--Optional:-->
               <siri:NetworkRef>?</siri:NetworkRef>
               <!--Zero or more repetitions:-->
               <siri:LineRef>?</siri:LineRef>
               <!--Optional:-->
               <siri:StopPointRef>?</siri:StopPointRef>
               <!--Zero or more repetitions:-->
               <siri:ConnectionLinkRef>?</siri:ConnectionLinkRef>
               <!--Zero or more repetitions:-->
               <siri:FacilityRef>?</siri:FacilityRef>
               <!--Optional:-->
               <siri:StopPlaceRef>?</siri:StopPlaceRef>
               <!--You have a CHOICE of the next 2 items at this level-->
               <siri:FramedVehicleJourneyRef>
                  <siri:DataFrameRef>?</siri:DataFrameRef>
                  <siri:DatedVehicleJourneyRef>?</siri:DatedVehicleJourneyRef>
               </siri:FramedVehicleJourneyRef>
               <siri:VehicleJourneyRef>?</siri:VehicleJourneyRef>
               <!--Optional:-->
               <siri:InterchangeRef>?</siri:InterchangeRef>
               <!--Optional:-->
               <siri:VehicleRef>?</siri:VehicleRef>
               <!--Optional:-->
               <siri:CountryRef>?</siri:CountryRef>
               <!--Optional:-->
               <siri:PlaceRef>?</siri:PlaceRef>
               <!--0 to 2 repetitions:-->
               <siri:Location id="?" srsName="?">
                  <!--You have a CHOICE of the next 2 items at this level-->
                  <siri:Longitude>?</siri:Longitude>
                  <siri:Latitude>?</siri:Latitude>
                  <siri:Coordinates>?</siri:Coordinates>
                  <!--Optional:-->
                  <siri:Precision>?</siri:Precision>
               </siri:Location>
               <!--Optional:-->
               <siri:SituationRoadFilter>
                  <!--1 or more repetitions:-->
                  <siri:RoadFilter>
                     <!--Optional:-->
                     <siri:roadNumber>?</siri:roadNumber>
                     <!--Optional:-->
                     <siri:directionBound>?</siri:directionBound>
                     <!--Optional:-->
                     <siri:referencePointIdentifier>?</siri:referencePointIdentifier>
                  </siri:RoadFilter>
               </siri:SituationRoadFilter>
               <!--Zero or more repetitions:-->
               <siri:AccessibilityNeedFilter>
                  <!--Zero or more repetitions:-->
                  <acsb:UserNeed>
                     <!--You have a CHOICE of the next 4 items at this level-->
                     <acsb:MobilityNeed>?</acsb:MobilityNeed>
                     <acsb:PsychosensoryNeed>?</acsb:PsychosensoryNeed>
                     <acsb:MedicalNeed>?</acsb:MedicalNeed>
                     <acsb:EncumbranceNeed>?</acsb:EncumbranceNeed>
                     <!--Optional:-->
                     <acsb:Excluded>?</acsb:Excluded>
                     <!--Optional:-->
                     <acsb:NeedRanking>?</acsb:NeedRanking>
                     <!--Optional:-->
                     <acsb:Extensions>?</acsb:Extensions>
                  </acsb:UserNeed>
                  <!--Optional:-->
                  <acsb:AccompaniedByCarer>?</acsb:AccompaniedByCarer>
               </siri:AccessibilityNeedFilter>
               <!--Optional:-->
               <siri:Language>en</siri:Language>
               <!--Optional:-->
               <siri:IncludeTranslations>?</siri:IncludeTranslations>
               <!--Optional:-->
               <siri:MaximumNumberOfSituationElements>?</siri:MaximumNumberOfSituationElements>
               <!--Optional:-->
               <siri:Extensions>
                  <!--You may enter ANY elements at this point-->
               </siri:Extensions>
            </siri:SituationExchangeRequest>
         </Request>
      </wsdl:GetSiriService>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetSiriService"/><con:wsrmConfig version="1.2"/></con:call></con:operation><con:operation isOneWay="false" action="GetSituationExchange" name="GetSituationExchange" bindingOperationName="GetSituationExchange" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8282/requete/GeneralMessageSOAPPort</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsdl="http://wsdl.siri.org.uk" xmlns:siri="http://www.siri.org.uk/siri" xmlns:acsb="http://www.ifopt.org.uk/acsb">
   <soapenv:Header/>
   <soapenv:Body>
      <wsdl:GetSituationExchange>
         <ServiceRequestInfo>
            <!--Optional:-->
            <siri:ServiceRequestContext>
               <!--Optional:-->
               <siri:CheckStatusAddress>?</siri:CheckStatusAddress>
               <!--Optional:-->
               <siri:SubscribeAddress>?</siri:SubscribeAddress>
               <!--Optional:-->
               <siri:ManageSubscriptionAddress>?</siri:ManageSubscriptionAddress>
               <!--Optional:-->
               <siri:GetDataAddress>?</siri:GetDataAddress>
               <!--Optional:-->
               <siri:StatusResponseAddress>?</siri:StatusResponseAddress>
               <!--Optional:-->
               <siri:SubscriberAddress>?</siri:SubscriberAddress>
               <!--Optional:-->
               <siri:NotifyAddress>?</siri:NotifyAddress>
               <!--Optional:-->
               <siri:ConsumerAddress>?</siri:ConsumerAddress>
               <!--Optional:-->
               <siri:DataNameSpaces>
                  <!--Optional:-->
                  <siri:StopPointNameSpace>?</siri:StopPointNameSpace>
                  <!--Optional:-->
                  <siri:LineNameSpace>?</siri:LineNameSpace>
                  <!--Optional:-->
                  <siri:ProductCategoryNameSpace>?</siri:ProductCategoryNameSpace>
                  <!--Optional:-->
                  <siri:ServiceFeatureNameSpace>?</siri:ServiceFeatureNameSpace>
                  <!--Optional:-->
                  <siri:VehicleFeatureNameSpace>?</siri:VehicleFeatureNameSpace>
               </siri:DataNameSpaces>
               <!--Optional:-->
               <siri:Language>en</siri:Language>
               <!--You have a CHOICE of the next 2 items at this level-->
               <siri:WgsDecimalDegrees>?</siri:WgsDecimalDegrees>
               <siri:GmlCoordinateFormat>?</siri:GmlCoordinateFormat>
               <!--Optional:-->
               <siri:DistanceUnits>?</siri:DistanceUnits>
               <!--Optional:-->
               <siri:VelocityUnits>?</siri:VelocityUnits>
               <!--Optional:-->
               <siri:DataHorizon>?</siri:DataHorizon>
               <!--Optional:-->
               <siri:RequestTimeout>?</siri:RequestTimeout>
               <!--Optional:-->
               <siri:DeliveryMethod>direct</siri:DeliveryMethod>
               <!--Optional:-->
               <siri:MultipartDespatch>?</siri:MultipartDespatch>
               <!--Optional:-->
               <siri:ConfirmDelivery>false</siri:ConfirmDelivery>
               <!--Optional:-->
               <siri:MaximimumNumberOfSubscriptions>?</siri:MaximimumNumberOfSubscriptions>
               <!--Optional:-->
               <siri:AllowedPredictors>anyone</siri:AllowedPredictors>
               <!--Optional:-->
               <siri:PredictionFunction>?</siri:PredictionFunction>
            </siri:ServiceRequestContext>
            <siri:RequestTimestamp>?</siri:RequestTimestamp>
            <!--Optional:-->
            <siri:AccountId>?</siri:AccountId>
            <!--Optional:-->
            <siri:AccountKey>?</siri:AccountKey>
            <!--Optional:-->
            <siri:Address>?</siri:Address>
            <siri:RequestorRef>?</siri:RequestorRef>
            <!--Optional:-->
            <siri:MessageIdentifier>?</siri:MessageIdentifier>
            <!--Optional:-->
            <siri:DelegatorAddress>?</siri:DelegatorAddress>
            <!--Optional:-->
            <siri:DelegatorRef>?</siri:DelegatorRef>
         </ServiceRequestInfo>
         <Request version="2.0">
            <siri:RequestTimestamp>?</siri:RequestTimestamp>
            <!--Optional:-->
            <siri:MessageIdentifier>?</siri:MessageIdentifier>
            <!--Optional:-->
            <siri:PreviewInterval>?</siri:PreviewInterval>
            <!--Optional:-->
            <siri:StartTime>?</siri:StartTime>
            <!--Optional:-->
            <siri:VehicleMode>unknown</siri:VehicleMode>
            <!--You have a CHOICE of the next 7 items at this level-->
            <siri:AirSubmode>unknown</siri:AirSubmode>
            <siri:BusSubmode>unknown</siri:BusSubmode>
            <siri:CoachSubmode>unknown</siri:CoachSubmode>
            <siri:MetroSubmode>unknown</siri:MetroSubmode>
            <siri:RailSubmode>unknown</siri:RailSubmode>
            <siri:TramSubmode>unknown</siri:TramSubmode>
            <siri:WaterSubmode>unknown</siri:WaterSubmode>
            <!--Optional:-->
            <siri:AccessMode>?</siri:AccessMode>
            <!--Optional:-->
            <siri:Severity>?</siri:Severity>
            <!--Zero or more repetitions:-->
            <siri:Scope>?</siri:Scope>
            <!--Optional:-->
            <siri:Predictability>?</siri:Predictability>
            <!--Optional:-->
            <siri:Keywords>?</siri:Keywords>
            <!--Optional:-->
            <siri:Verification>?</siri:Verification>
            <!--Zero or more repetitions:-->
            <siri:Progress>open</siri:Progress>
            <!--Optional:-->
            <siri:Reality>?</siri:Reality>
            <!--Optional:-->
            <siri:OperatorRef>?</siri:OperatorRef>
            <!--Zero or more repetitions:-->
            <siri:OperationalUnitRef>?</siri:OperationalUnitRef>
            <!--Optional:-->
            <siri:NetworkRef>?</siri:NetworkRef>
            <!--Zero or more repetitions:-->
            <siri:LineRef>?</siri:LineRef>
            <!--Optional:-->
            <siri:StopPointRef>?</siri:StopPointRef>
            <!--Zero or more repetitions:-->
            <siri:ConnectionLinkRef>?</siri:ConnectionLinkRef>
            <!--Zero or more repetitions:-->
            <siri:FacilityRef>?</siri:FacilityRef>
            <!--Optional:-->
            <siri:StopPlaceRef>?</siri:StopPlaceRef>
            <!--You have a CHOICE of the next 2 items at this level-->
            <siri:FramedVehicleJourneyRef>
               <siri:DataFrameRef>?</siri:DataFrameRef>
               <siri:DatedVehicleJourneyRef>?</siri:DatedVehicleJourneyRef>
            </siri:FramedVehicleJourneyRef>
            <siri:VehicleJourneyRef>?</siri:VehicleJourneyRef>
            <!--Optional:-->
            <siri:InterchangeRef>?</siri:InterchangeRef>
            <!--Optional:-->
            <siri:VehicleRef>?</siri:VehicleRef>
            <!--Optional:-->
            <siri:CountryRef>?</siri:CountryRef>
            <!--Optional:-->
            <siri:PlaceRef>?</siri:PlaceRef>
            <!--0 to 2 repetitions:-->
            <siri:Location id="?" srsName="?">
               <!--You have a CHOICE of the next 2 items at this level-->
               <siri:Longitude>?</siri:Longitude>
               <siri:Latitude>?</siri:Latitude>
               <siri:Coordinates>?</siri:Coordinates>
               <!--Optional:-->
               <siri:Precision>?</siri:Precision>
            </siri:Location>
            <!--Optional:-->
            <siri:SituationRoadFilter>
               <!--1 or more repetitions:-->
               <siri:RoadFilter>
                  <!--Optional:-->
                  <siri:roadNumber>?</siri:roadNumber>
                  <!--Optional:-->
                  <siri:directionBound>?</siri:directionBound>
                  <!--Optional:-->
                  <siri:referencePointIdentifier>?</siri:referencePointIdentifier>
               </siri:RoadFilter>
            </siri:SituationRoadFilter>
            <!--Zero or more repetitions:-->
            <siri:AccessibilityNeedFilter>
               <!--Zero or more repetitions:-->
               <acsb:UserNeed>
                  <!--You have a CHOICE of the next 4 items at this level-->
                  <acsb:MobilityNeed>?</acsb:MobilityNeed>
                  <acsb:PsychosensoryNeed>?</acsb:PsychosensoryNeed>
                  <acsb:MedicalNeed>?</acsb:MedicalNeed>
                  <acsb:EncumbranceNeed>?</acsb:EncumbranceNeed>
                  <!--Optional:-->
                  <acsb:Excluded>?</acsb:Excluded>
                  <!--Optional:-->
                  <acsb:NeedRanking>?</acsb:NeedRanking>
                  <!--Optional:-->
                  <acsb:Extensions>?</acsb:Extensions>
               </acsb:UserNeed>
               <!--Optional:-->
               <acsb:AccompaniedByCarer>?</acsb:AccompaniedByCarer>
            </siri:AccessibilityNeedFilter>
            <!--Optional:-->
            <siri:Language>en</siri:Language>
            <!--Optional:-->
            <siri:IncludeTranslations>?</siri:IncludeTranslations>
            <!--Optional:-->
            <siri:MaximumNumberOfSituationElements>?</siri:MaximumNumberOfSituationElements>
            <!--Optional:-->
            <siri:Extensions>
               <!--You may enter ANY elements at this point-->
            </siri:Extensions>
         </Request>
         <RequestExtension>
            <!--You may enter ANY elements at this point-->
         </RequestExtension>
      </wsdl:GetSituationExchange>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetSituationExchange"/></con:call></con:operation><con:operation isOneWay="false" action="GetStopMonitoring" name="GetStopMonitoring" bindingOperationName="GetStopMonitoring" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call name="Request_TEST-1"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.222.36.237:8080/emission/SiriRelais/SiriProducerRpcPort</con:endpoint><con:request><![CDATA[<!-- TEST-1 Reception d'une requête SM valide sur une ZDE sans filtre -->
<!-- ZDE : STIF:StopPoint:Q:108940 -->
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsdl="http://wsdl.siri.org.uk" xmlns:siri="http://www.siri.org.uk/siri">
   <soapenv:Header/>
   <soapenv:Body>
      <wsdl:GetStopMonitoring>
         <ServiceRequestInfo>
            <siri:RequestTimestamp>${=javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())}</siri:RequestTimestamp>
            <siri:RequestorRef>100WSIVSIRI</siri:RequestorRef>
            <siri:MessageIdentifier>100WSIVSIRI:Message::1:LOC</siri:MessageIdentifier>
         </ServiceRequestInfo>
         <Request version="2.0[FR-IDF-2.4]">
            <siri:RequestTimestamp>${=javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())}</siri:RequestTimestamp>
            <siri:MessageIdentifier>100WSIVSIRI:Message::1:LOC</siri:MessageIdentifier>
            <siri:MonitoringRef>STIF:StopPoint:Q:108940:</siri:MonitoringRef>
         </Request>
         <RequestExtension>
         </RequestExtension>
      </wsdl:GetStopMonitoring>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetStopMonitoring"/><con:wsrmConfig version="1.2"/></con:call><con:call name="Request_TEST-7"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.222.37.16:9101/emission/SiriProducerRpcPort</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsdl="http://wsdl.siri.org.uk" xmlns:siri="http://www.siri.org.uk/siri">
   <soapenv:Header/>
   <soapenv:Body>
      <wsdl:GetStopMonitoring>
         <ServiceRequestInfo>
            <siri:RequestTimestamp>${=javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())}</siri:RequestTimestamp>
            <siri:RequestorRef>SNCF-ACCES</siri:RequestorRef>
            <siri:MessageIdentifier>SNCF-ACCES:Message::1:LOC</siri:MessageIdentifier>
         </ServiceRequestInfo>
         <Request version="2.0[FR-IDF-2.4]">
            <siri:RequestTimestamp>${=javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())}</siri:RequestTimestamp>
            <siri:MessageIdentifier>SNCF-ACCES:Message::1:LOC</siri:MessageIdentifier>
            <siri:MonitoringRef>STIF:StopPoint:Q:108940:</siri:MonitoringRef>
         </Request>
         <RequestExtension>
         </RequestExtension>
      </wsdl:GetStopMonitoring>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetStopMonitoring"/><con:wsrmConfig version="1.2"/></con:call><con:call name="Request_TEST-8"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.222.37.16:9101/emission/SiriProducerRpcPort</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsdl="http://wsdl.siri.org.uk" xmlns:siri="http://www.siri.org.uk/siri">
   <soapenv:Header/>
   <soapenv:Body>
      <wsdl:GetStopMonitoring>
         <ServiceRequestInfo>
            <siri:RequestTimestamp>${=javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())}</siri:RequestTimestamp>
            <siri:RequestorRef>SNCF-ACCES</siri:RequestorRef>
            <siri:MessageIdentifier>SNCF-ACCES:Message::1:LOC</siri:MessageIdentifier>
         </ServiceRequestInfo>
         <Request version="2.0[FR-IDF-2.4]">
            <siri:RequestTimestamp>${=javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())}</siri:RequestTimestamp>
            <siri:MessageIdentifier>SNCF-ACCES:Message::1:LOC</siri:MessageIdentifier>
            <siri:MonitoringRef>STIF:StopPoint:Q:108940:</siri:MonitoringRef>
         </Request>
         <RequestExtension>
         </RequestExtension>
      </wsdl:GetStopMonitoring>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetStopMonitoring"/><con:wsrmConfig version="1.2"/></con:call><con:call name="Request_TEST-2"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.222.37.16:9101/emission/SiriRelais/SiriProducerRpcPort</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsdl="http://wsdl.siri.org.uk" xmlns:siri="http://www.siri.org.uk/siri">
   <soapenv:Header/>
   <soapenv:Body>
      <wsdl:GetStopMonitoring>
         <ServiceRequestInfo>
            <siri:RequestTimestamp>${=javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())}</siri:RequestTimestamp>
            <siri:RequestorRef>SNCF-ACCES</siri:RequestorRef>
            <siri:MessageIdentifier>SNCF-ACCES:Message::1:LOC</siri:MessageIdentifier>
         </ServiceRequestInfo>
         <Request version="2.0[FR-IDF-2.4]">
            <siri:RequestTimestamp>${=javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())}</siri:RequestTimestamp>
            <siri:MessageIdentifier>SNCF-ACCES:Message::1:LOC</siri:MessageIdentifier>
            <siri:MonitoringRef>STIF:StopPoint:Q:108940:</siri:MonitoringRef>
         </Request>
         <RequestExtension>
         </RequestExtension>
      </wsdl:GetStopMonitoring>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetStopMonitoring"/><con:wsrmConfig version="1.2"/></con:call><con:call name="Request_TEST-3"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.222.37.16:9101/emission/SiriProducerRpcPort</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsdl="http://wsdl.siri.org.uk" xmlns:siri="http://www.siri.org.uk/siri">
   <soapenv:Header/>
   <soapenv:Body>
      <wsdl:GetStopMonitoring>
         <ServiceRequestInfo>
            <siri:RequestTimestamp>${=javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())}</siri:RequestTimestamp>
            <siri:RequestorRef>SNCF-ACCES</siri:RequestorRef>
            <siri:MessageIdentifier>SNCF-ACCES:Message::1:LOC</siri:MessageIdentifier>
         </ServiceRequestInfo>
         <Request version="2.0[FR-IDF-2.4]">
            <siri:RequestTimestamp>${=javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())}</siri:RequestTimestamp>
            <siri:MessageIdentifier>SNCF-ACCES:Message::1:LOC</siri:MessageIdentifier>
            <siri:MonitoringRef>STIF:StopPoint:Q:108940:</siri:MonitoringRef>
         </Request>
         <RequestExtension>
         </RequestExtension>
      </wsdl:GetStopMonitoring>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetStopMonitoring"/><con:wsrmConfig version="1.2"/></con:call><con:call name="Request_TEST-4"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.222.37.16:9101/emission/SiriProducerRpcPort</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsdl="http://wsdl.siri.org.uk" xmlns:siri="http://www.siri.org.uk/siri">
   <soapenv:Header/>
   <soapenv:Body>
      <wsdl:GetStopMonitoring>
         <ServiceRequestInfo>
            <siri:RequestTimestamp>${=javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())}</siri:RequestTimestamp>
            <siri:RequestorRef>SNCF-ACCES</siri:RequestorRef>
            <siri:MessageIdentifier>SNCF-ACCES:Message::1:LOC</siri:MessageIdentifier>
         </ServiceRequestInfo>
         <Request version="2.0[FR-IDF-2.4]">
            <siri:RequestTimestamp>${=javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())}</siri:RequestTimestamp>
            <siri:MessageIdentifier>SNCF-ACCES:Message::1:LOC</siri:MessageIdentifier>
            <siri:MonitoringRef>STIF:StopPoint:Q:108940:</siri:MonitoringRef>
         </Request>
         <RequestExtension>
         </RequestExtension>
      </wsdl:GetStopMonitoring>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetStopMonitoring"/><con:wsrmConfig version="1.2"/></con:call><con:call name="Request_TEST-5"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.222.37.16:9101/emission/SiriProducerRpcPort</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsdl="http://wsdl.siri.org.uk" xmlns:siri="http://www.siri.org.uk/siri">
   <soapenv:Header/>
   <soapenv:Body>
      <wsdl:GetStopMonitoring>
         <ServiceRequestInfo>
            <siri:RequestTimestamp>${=javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())}</siri:RequestTimestamp>
            <siri:RequestorRef>SNCF-ACCES</siri:RequestorRef>
            <siri:MessageIdentifier>SNCF-ACCES:Message::1:LOC</siri:MessageIdentifier>
         </ServiceRequestInfo>
         <Request version="2.0[FR-IDF-2.4]">
            <siri:RequestTimestamp>${=javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())}</siri:RequestTimestamp>
            <siri:MessageIdentifier>SNCF-ACCES:Message::1:LOC</siri:MessageIdentifier>
            <siri:MonitoringRef>STIF:StopPoint:Q:108940:</siri:MonitoringRef>
         </Request>
         <RequestExtension>
         </RequestExtension>
      </wsdl:GetStopMonitoring>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetStopMonitoring"/><con:wsrmConfig version="1.2"/></con:call></con:operation><con:operation isOneWay="false" action="GetStopTimetable" name="GetStopTimetable" bindingOperationName="GetStopTimetable" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8282/requete/GeneralMessageSOAPPort</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsdl="http://wsdl.siri.org.uk" xmlns:siri="http://www.siri.org.uk/siri">
   <soapenv:Header/>
   <soapenv:Body>
      <wsdl:GetStopTimetable>
         <ServiceRequestInfo>
            <!--Optional:-->
            <siri:ServiceRequestContext>
               <!--Optional:-->
               <siri:CheckStatusAddress>?</siri:CheckStatusAddress>
               <!--Optional:-->
               <siri:SubscribeAddress>?</siri:SubscribeAddress>
               <!--Optional:-->
               <siri:ManageSubscriptionAddress>?</siri:ManageSubscriptionAddress>
               <!--Optional:-->
               <siri:GetDataAddress>?</siri:GetDataAddress>
               <!--Optional:-->
               <siri:StatusResponseAddress>?</siri:StatusResponseAddress>
               <!--Optional:-->
               <siri:SubscriberAddress>?</siri:SubscriberAddress>
               <!--Optional:-->
               <siri:NotifyAddress>?</siri:NotifyAddress>
               <!--Optional:-->
               <siri:ConsumerAddress>?</siri:ConsumerAddress>
               <!--Optional:-->
               <siri:DataNameSpaces>
                  <!--Optional:-->
                  <siri:StopPointNameSpace>?</siri:StopPointNameSpace>
                  <!--Optional:-->
                  <siri:LineNameSpace>?</siri:LineNameSpace>
                  <!--Optional:-->
                  <siri:ProductCategoryNameSpace>?</siri:ProductCategoryNameSpace>
                  <!--Optional:-->
                  <siri:ServiceFeatureNameSpace>?</siri:ServiceFeatureNameSpace>
                  <!--Optional:-->
                  <siri:VehicleFeatureNameSpace>?</siri:VehicleFeatureNameSpace>
               </siri:DataNameSpaces>
               <!--Optional:-->
               <siri:Language>en</siri:Language>
               <!--You have a CHOICE of the next 2 items at this level-->
               <siri:WgsDecimalDegrees>?</siri:WgsDecimalDegrees>
               <siri:GmlCoordinateFormat>?</siri:GmlCoordinateFormat>
               <!--Optional:-->
               <siri:DistanceUnits>?</siri:DistanceUnits>
               <!--Optional:-->
               <siri:VelocityUnits>?</siri:VelocityUnits>
               <!--Optional:-->
               <siri:DataHorizon>?</siri:DataHorizon>
               <!--Optional:-->
               <siri:RequestTimeout>?</siri:RequestTimeout>
               <!--Optional:-->
               <siri:DeliveryMethod>direct</siri:DeliveryMethod>
               <!--Optional:-->
               <siri:MultipartDespatch>?</siri:MultipartDespatch>
               <!--Optional:-->
               <siri:ConfirmDelivery>false</siri:ConfirmDelivery>
               <!--Optional:-->
               <siri:MaximimumNumberOfSubscriptions>?</siri:MaximimumNumberOfSubscriptions>
               <!--Optional:-->
               <siri:AllowedPredictors>anyone</siri:AllowedPredictors>
               <!--Optional:-->
               <siri:PredictionFunction>?</siri:PredictionFunction>
            </siri:ServiceRequestContext>
            <siri:RequestTimestamp>?</siri:RequestTimestamp>
            <!--Optional:-->
            <siri:AccountId>?</siri:AccountId>
            <!--Optional:-->
            <siri:AccountKey>?</siri:AccountKey>
            <!--Optional:-->
            <siri:Address>?</siri:Address>
            <siri:RequestorRef>?</siri:RequestorRef>
            <!--Optional:-->
            <siri:MessageIdentifier>?</siri:MessageIdentifier>
            <!--Optional:-->
            <siri:DelegatorAddress>?</siri:DelegatorAddress>
            <!--Optional:-->
            <siri:DelegatorRef>?</siri:DelegatorRef>
         </ServiceRequestInfo>
         <Request version="2.0">
            <siri:RequestTimestamp>?</siri:RequestTimestamp>
            <!--Optional:-->
            <siri:MessageIdentifier>?</siri:MessageIdentifier>
            <!--Optional:-->
            <siri:DepartureWindow>
               <siri:StartTime>?</siri:StartTime>
               <siri:EndTime>?</siri:EndTime>
            </siri:DepartureWindow>
            <siri:MonitoringRef>?</siri:MonitoringRef>
            <!--Optional:-->
            <siri:LineRef>?</siri:LineRef>
            <!--Optional:-->
            <siri:DirectionRef>?</siri:DirectionRef>
            <!--Optional:-->
            <siri:Language>en</siri:Language>
            <!--Optional:-->
            <siri:IncludeTranslations>?</siri:IncludeTranslations>
            <!--Optional:-->
            <siri:Extensions>
               <!--You may enter ANY elements at this point-->
            </siri:Extensions>
         </Request>
         <RequestExtension>
            <!--You may enter ANY elements at this point-->
         </RequestExtension>
      </wsdl:GetStopTimetable>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetStopTimetable"/><con:wsrmConfig version="1.2"/></con:call></con:operation><con:operation isOneWay="false" action="GetVehicleMonitoring" name="GetVehicleMonitoring" bindingOperationName="GetVehicleMonitoring" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8282/requete/GeneralMessageSOAPPort</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsdl="http://wsdl.siri.org.uk" xmlns:siri="http://www.siri.org.uk/siri">
   <soapenv:Header/>
   <soapenv:Body>
      <wsdl:GetVehicleMonitoring>
         <ServiceRequestInfo>
            <!--Optional:-->
            <siri:ServiceRequestContext>
               <!--Optional:-->
               <siri:CheckStatusAddress>?</siri:CheckStatusAddress>
               <!--Optional:-->
               <siri:SubscribeAddress>?</siri:SubscribeAddress>
               <!--Optional:-->
               <siri:ManageSubscriptionAddress>?</siri:ManageSubscriptionAddress>
               <!--Optional:-->
               <siri:GetDataAddress>?</siri:GetDataAddress>
               <!--Optional:-->
               <siri:StatusResponseAddress>?</siri:StatusResponseAddress>
               <!--Optional:-->
               <siri:SubscriberAddress>?</siri:SubscriberAddress>
               <!--Optional:-->
               <siri:NotifyAddress>?</siri:NotifyAddress>
               <!--Optional:-->
               <siri:ConsumerAddress>?</siri:ConsumerAddress>
               <!--Optional:-->
               <siri:DataNameSpaces>
                  <!--Optional:-->
                  <siri:StopPointNameSpace>?</siri:StopPointNameSpace>
                  <!--Optional:-->
                  <siri:LineNameSpace>?</siri:LineNameSpace>
                  <!--Optional:-->
                  <siri:ProductCategoryNameSpace>?</siri:ProductCategoryNameSpace>
                  <!--Optional:-->
                  <siri:ServiceFeatureNameSpace>?</siri:ServiceFeatureNameSpace>
                  <!--Optional:-->
                  <siri:VehicleFeatureNameSpace>?</siri:VehicleFeatureNameSpace>
               </siri:DataNameSpaces>
               <!--Optional:-->
               <siri:Language>en</siri:Language>
               <!--You have a CHOICE of the next 2 items at this level-->
               <siri:WgsDecimalDegrees>?</siri:WgsDecimalDegrees>
               <siri:GmlCoordinateFormat>?</siri:GmlCoordinateFormat>
               <!--Optional:-->
               <siri:DistanceUnits>?</siri:DistanceUnits>
               <!--Optional:-->
               <siri:VelocityUnits>?</siri:VelocityUnits>
               <!--Optional:-->
               <siri:DataHorizon>?</siri:DataHorizon>
               <!--Optional:-->
               <siri:RequestTimeout>?</siri:RequestTimeout>
               <!--Optional:-->
               <siri:DeliveryMethod>direct</siri:DeliveryMethod>
               <!--Optional:-->
               <siri:MultipartDespatch>?</siri:MultipartDespatch>
               <!--Optional:-->
               <siri:ConfirmDelivery>false</siri:ConfirmDelivery>
               <!--Optional:-->
               <siri:MaximimumNumberOfSubscriptions>?</siri:MaximimumNumberOfSubscriptions>
               <!--Optional:-->
               <siri:AllowedPredictors>anyone</siri:AllowedPredictors>
               <!--Optional:-->
               <siri:PredictionFunction>?</siri:PredictionFunction>
            </siri:ServiceRequestContext>
            <siri:RequestTimestamp>?</siri:RequestTimestamp>
            <!--Optional:-->
            <siri:AccountId>?</siri:AccountId>
            <!--Optional:-->
            <siri:AccountKey>?</siri:AccountKey>
            <!--Optional:-->
            <siri:Address>?</siri:Address>
            <siri:RequestorRef>?</siri:RequestorRef>
            <!--Optional:-->
            <siri:MessageIdentifier>?</siri:MessageIdentifier>
            <!--Optional:-->
            <siri:DelegatorAddress>?</siri:DelegatorAddress>
            <!--Optional:-->
            <siri:DelegatorRef>?</siri:DelegatorRef>
         </ServiceRequestInfo>
         <Request version="2.0">
            <siri:RequestTimestamp>?</siri:RequestTimestamp>
            <!--Optional:-->
            <siri:MessageIdentifier>?</siri:MessageIdentifier>
            <!--Optional:-->
            <siri:VehicleMonitoringRef>?</siri:VehicleMonitoringRef>
            <!--You have a CHOICE of the next 2 items at this level-->
            <siri:VehicleRef>?</siri:VehicleRef>
            <siri:LineRef>?</siri:LineRef>
            <!--Optional:-->
            <siri:DirectionRef>?</siri:DirectionRef>
            <!--Optional:-->
            <siri:Language>en</siri:Language>
            <!--Optional:-->
            <siri:IncludeTranslations>?</siri:IncludeTranslations>
            <!--Optional:-->
            <siri:MaximumVehicles>?</siri:MaximumVehicles>
            <!--Optional:-->
            <siri:VehicleMonitoringDetailLevel>?</siri:VehicleMonitoringDetailLevel>
            <!--Optional:-->
            <siri:MaximumNumberOfCalls>
               <!--Optional:-->
               <siri:Previous>?</siri:Previous>
               <!--Optional:-->
               <siri:Onwards>?</siri:Onwards>
            </siri:MaximumNumberOfCalls>
            <!--Optional:-->
            <siri:IncludeSituations>?</siri:IncludeSituations>
            <!--Optional:-->
            <siri:Extensions>
               <!--You may enter ANY elements at this point-->
            </siri:Extensions>
         </Request>
         <RequestExtension>
            <!--You may enter ANY elements at this point-->
         </RequestExtension>
      </wsdl:GetVehicleMonitoring>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetVehicleMonitoring"/></con:call></con:operation><con:operation isOneWay="false" action="LinesDiscovery" name="LinesDiscovery" bindingOperationName="LinesDiscovery" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8282/requete/GeneralMessageSOAPPort</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsdl="http://wsdl.siri.org.uk" xmlns:siri="http://www.siri.org.uk/siri">
   <soapenv:Header/>
   <soapenv:Body>
      <wsdl:LinesDiscovery>
         <Request version="2.0">
            <siri:RequestTimestamp>?</siri:RequestTimestamp>
            <!--Optional:-->
            <siri:AccountId>?</siri:AccountId>
            <!--Optional:-->
            <siri:AccountKey>?</siri:AccountKey>
            <!--Optional:-->
            <siri:Address>?</siri:Address>
            <siri:RequestorRef>?</siri:RequestorRef>
            <!--Optional:-->
            <siri:MessageIdentifier>?</siri:MessageIdentifier>
            <!--You have a CHOICE of the next 4 items at this level-->
            <siri:BoundingBox>
               <siri:UpperLeft id="?" srsName="?">
                  <!--You have a CHOICE of the next 2 items at this level-->
                  <siri:Longitude>?</siri:Longitude>
                  <siri:Latitude>?</siri:Latitude>
                  <siri:Coordinates>?</siri:Coordinates>
                  <!--Optional:-->
                  <siri:Precision>?</siri:Precision>
               </siri:UpperLeft>
               <siri:LowerRight id="?" srsName="?">
                  <!--You have a CHOICE of the next 2 items at this level-->
                  <siri:Longitude>?</siri:Longitude>
                  <siri:Latitude>?</siri:Latitude>
                  <siri:Coordinates>?</siri:Coordinates>
                  <!--Optional:-->
                  <siri:Precision>?</siri:Precision>
               </siri:LowerRight>
            </siri:BoundingBox>
            <siri:Circle id="?" srsName="?">
               <!--You have a CHOICE of the next 2 items at this level-->
               <siri:Longitude>?</siri:Longitude>
               <siri:Latitude>?</siri:Latitude>
               <siri:Coordinates>?</siri:Coordinates>
               <!--Optional:-->
               <siri:Precision>?</siri:Precision>
            </siri:Circle>
            <siri:PlaceRef>?</siri:PlaceRef>
            <siri:LineDirectionRef>
               <siri:LineRef>?</siri:LineRef>
               <!--Optional:-->
               <siri:DirectionRef>?</siri:DirectionRef>
            </siri:LineDirectionRef>
            <!--Optional:-->
            <siri:OperatorRef>?</siri:OperatorRef>
            <!--Optional:-->
            <siri:Language>en</siri:Language>
            <!--Optional:-->
            <siri:LinesDetailLevel>normal</siri:LinesDetailLevel>
         </Request>
         <RequestExtension>
            <!--You may enter ANY elements at this point-->
         </RequestExtension>
      </wsdl:LinesDiscovery>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:wsaConfig mustUnderstand="NONE" version="200508" action="LinesDiscovery"/></con:call></con:operation><con:operation isOneWay="false" action="StopPointsDiscovery" name="StopPointsDiscovery" bindingOperationName="StopPointsDiscovery" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8282/requete/GeneralMessageSOAPPort</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsdl="http://wsdl.siri.org.uk" xmlns:siri="http://www.siri.org.uk/siri">
   <soapenv:Header/>
   <soapenv:Body>
      <wsdl:StopPointsDiscovery>
         <Request version="2.0">
            <siri:RequestTimestamp>?</siri:RequestTimestamp>
            <!--Optional:-->
            <siri:AccountId>?</siri:AccountId>
            <!--Optional:-->
            <siri:AccountKey>?</siri:AccountKey>
            <!--Optional:-->
            <siri:Address>?</siri:Address>
            <siri:RequestorRef>?</siri:RequestorRef>
            <!--Optional:-->
            <siri:MessageIdentifier>?</siri:MessageIdentifier>
            <!--You have a CHOICE of the next 3 items at this level-->
            <!--Optional:-->
            <siri:BoundingBox>
               <siri:UpperLeft id="?" srsName="?">
                  <!--You have a CHOICE of the next 2 items at this level-->
                  <siri:Longitude>?</siri:Longitude>
                  <siri:Latitude>?</siri:Latitude>
                  <siri:Coordinates>?</siri:Coordinates>
                  <!--Optional:-->
                  <siri:Precision>?</siri:Precision>
               </siri:UpperLeft>
               <siri:LowerRight id="?" srsName="?">
                  <!--You have a CHOICE of the next 2 items at this level-->
                  <siri:Longitude>?</siri:Longitude>
                  <siri:Latitude>?</siri:Latitude>
                  <siri:Coordinates>?</siri:Coordinates>
                  <!--Optional:-->
                  <siri:Precision>?</siri:Precision>
               </siri:LowerRight>
            </siri:BoundingBox>
            <!--Optional:-->
            <siri:Circle id="?" srsName="?">
               <!--You have a CHOICE of the next 2 items at this level-->
               <siri:Longitude>?</siri:Longitude>
               <siri:Latitude>?</siri:Latitude>
               <siri:Coordinates>?</siri:Coordinates>
               <!--Optional:-->
               <siri:Precision>?</siri:Precision>
            </siri:Circle>
            <!--Optional:-->
            <siri:PlaceRef>?</siri:PlaceRef>
            <!--Optional:-->
            <siri:OperatorRef>?</siri:OperatorRef>
            <!--Optional:-->
            <siri:LineRef>?</siri:LineRef>
            <!--Optional:-->
            <siri:Language>en</siri:Language>
            <!--Optional:-->
            <siri:StopPointsDetailLevel>normal</siri:StopPointsDetailLevel>
         </Request>
         <RequestExtension>
            <!--You may enter ANY elements at this point-->
         </RequestExtension>
      </wsdl:StopPointsDiscovery>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:wsaConfig mustUnderstand="NONE" version="200508" action="StopPointsDiscovery"/></con:call></con:operation><con:operation isOneWay="false" action="Subscribe" name="Subscribe" bindingOperationName="Subscribe" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8282/requete/GeneralMessageSOAPPort</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsdl="http://wsdl.siri.org.uk" xmlns:siri="http://www.siri.org.uk/siri" xmlns:acsb="http://www.ifopt.org.uk/acsb">
   <soapenv:Header/>
   <soapenv:Body>
      <wsdl:Subscribe>
         <SubscriptionRequestInfo>
            <siri:RequestTimestamp>?</siri:RequestTimestamp>
            <!--Optional:-->
            <siri:AccountId>?</siri:AccountId>
            <!--Optional:-->
            <siri:AccountKey>?</siri:AccountKey>
            <!--Optional:-->
            <siri:Address>?</siri:Address>
            <siri:RequestorRef>?</siri:RequestorRef>
            <!--Optional:-->
            <siri:MessageIdentifier>?</siri:MessageIdentifier>
            <!--Optional:-->
            <siri:DelegatorAddress>?</siri:DelegatorAddress>
            <!--Optional:-->
            <siri:DelegatorRef>?</siri:DelegatorRef>
            <!--Optional:-->
            <siri:ConsumerAddress>?</siri:ConsumerAddress>
            <!--Optional:-->
            <siri:SubscriptionFilterIdentifier>?</siri:SubscriptionFilterIdentifier>
            <!--Optional:-->
            <siri:SubscriptionContext>
               <!--Optional:-->
               <siri:HeartbeatInterval>?</siri:HeartbeatInterval>
            </siri:SubscriptionContext>
         </SubscriptionRequestInfo>
         <Request>
            <!--You have a CHOICE of the next 10 items at this level-->
            <!--1 or more repetitions:-->
            <siri:ProductionTimetableSubscriptionRequest>
               <!--Optional:-->
               <siri:SubscriberRef>?</siri:SubscriberRef>
               <siri:SubscriptionIdentifier>?</siri:SubscriptionIdentifier>
               <siri:InitialTerminationTime>?</siri:InitialTerminationTime>
               <siri:ProductionTimetableRequest version="2.0">
                  <siri:RequestTimestamp>?</siri:RequestTimestamp>
                  <!--Optional:-->
                  <siri:MessageIdentifier>?</siri:MessageIdentifier>
                  <!--Optional:-->
                  <siri:ValidityPeriod>
                     <siri:StartTime>?</siri:StartTime>
                     <siri:EndTime>?</siri:EndTime>
                  </siri:ValidityPeriod>
                  <!--Optional:-->
                  <siri:TimetableVersionRef>?</siri:TimetableVersionRef>
                  <!--Zero or more repetitions:-->
                  <siri:OperatorRef>?</siri:OperatorRef>
                  <!--Optional:-->
                  <siri:Lines>
                     <!--1 or more repetitions:-->
                     <siri:LineDirection>
                        <siri:LineRef>?</siri:LineRef>
                        <!--Optional:-->
                        <siri:DirectionRef>?</siri:DirectionRef>
                     </siri:LineDirection>
                  </siri:Lines>
                  <!--Optional:-->
                  <siri:Language>en</siri:Language>
                  <!--Optional:-->
                  <siri:IncludeTranslations>?</siri:IncludeTranslations>
                  <!--Optional:-->
                  <siri:IncrementalUpdates>false</siri:IncrementalUpdates>
                  <!--Optional:-->
                  <siri:Extensions>
                     <!--You may enter ANY elements at this point-->
                  </siri:Extensions>
               </siri:ProductionTimetableRequest>
               <!--Optional:-->
               <siri:IncrementalUpdates>false</siri:IncrementalUpdates>
               <!--Optional:-->
               <siri:Extensions>
                  <!--You may enter ANY elements at this point-->
               </siri:Extensions>
            </siri:ProductionTimetableSubscriptionRequest>
            <!--1 or more repetitions:-->
            <siri:EstimatedTimetableSubscriptionRequest>
               <!--Optional:-->
               <siri:SubscriberRef>?</siri:SubscriberRef>
               <siri:SubscriptionIdentifier>?</siri:SubscriptionIdentifier>
               <siri:InitialTerminationTime>?</siri:InitialTerminationTime>
               <siri:EstimatedTimetableRequest version="2.0">
                  <siri:RequestTimestamp>?</siri:RequestTimestamp>
                  <!--Optional:-->
                  <siri:MessageIdentifier>?</siri:MessageIdentifier>
                  <!--Optional:-->
                  <siri:PreviewInterval>?</siri:PreviewInterval>
                  <!--Optional:-->
                  <siri:TimetableVersionRef>?</siri:TimetableVersionRef>
                  <!--Zero or more repetitions:-->
                  <siri:OperatorRef>?</siri:OperatorRef>
                  <!--Optional:-->
                  <siri:Lines>
                     <!--1 or more repetitions:-->
                     <siri:LineDirection>
                        <siri:LineRef>?</siri:LineRef>
                        <!--Optional:-->
                        <siri:DirectionRef>?</siri:DirectionRef>
                     </siri:LineDirection>
                  </siri:Lines>
                  <!--Optional:-->
                  <siri:Language>en</siri:Language>
                  <!--Optional:-->
                  <siri:IncludeTranslations>?</siri:IncludeTranslations>
                  <!--Optional:-->
                  <siri:EstimatedTimetableDetailLevel>?</siri:EstimatedTimetableDetailLevel>
                  <!--Optional:-->
                  <siri:Extensions>
                     <!--You may enter ANY elements at this point-->
                  </siri:Extensions>
               </siri:EstimatedTimetableRequest>
               <!--Optional:-->
               <siri:IncrementalUpdates>true</siri:IncrementalUpdates>
               <siri:ChangeBeforeUpdates>?</siri:ChangeBeforeUpdates>
               <!--Optional:-->
               <siri:Extensions>
                  <!--You may enter ANY elements at this point-->
               </siri:Extensions>
            </siri:EstimatedTimetableSubscriptionRequest>
            <!--1 or more repetitions:-->
            <siri:StopTimetableSubscriptionRequest>
               <!--Optional:-->
               <siri:SubscriberRef>?</siri:SubscriberRef>
               <siri:SubscriptionIdentifier>?</siri:SubscriptionIdentifier>
               <siri:InitialTerminationTime>?</siri:InitialTerminationTime>
               <siri:StopTimetableRequest version="2.0">
                  <siri:RequestTimestamp>?</siri:RequestTimestamp>
                  <!--Optional:-->
                  <siri:MessageIdentifier>?</siri:MessageIdentifier>
                  <!--Optional:-->
                  <siri:DepartureWindow>
                     <siri:StartTime>?</siri:StartTime>
                     <siri:EndTime>?</siri:EndTime>
                  </siri:DepartureWindow>
                  <siri:MonitoringRef>?</siri:MonitoringRef>
                  <!--Optional:-->
                  <siri:LineRef>?</siri:LineRef>
                  <!--Optional:-->
                  <siri:DirectionRef>?</siri:DirectionRef>
                  <!--Optional:-->
                  <siri:Language>en</siri:Language>
                  <!--Optional:-->
                  <siri:IncludeTranslations>?</siri:IncludeTranslations>
                  <!--Optional:-->
                  <siri:Extensions>
                     <!--You may enter ANY elements at this point-->
                  </siri:Extensions>
               </siri:StopTimetableRequest>
               <!--Optional:-->
               <siri:IncrementalUpdates>false</siri:IncrementalUpdates>
               <!--Optional:-->
               <siri:ChangeBeforeUpdates>?</siri:ChangeBeforeUpdates>
               <!--Optional:-->
               <siri:Extensions>
                  <!--You may enter ANY elements at this point-->
               </siri:Extensions>
            </siri:StopTimetableSubscriptionRequest>
            <!--1 or more repetitions:-->
            <siri:StopMonitoringSubscriptionRequest>
               <!--Optional:-->
               <siri:SubscriberRef>?</siri:SubscriberRef>
               <siri:SubscriptionIdentifier>?</siri:SubscriptionIdentifier>
               <siri:InitialTerminationTime>?</siri:InitialTerminationTime>
               <siri:StopMonitoringRequest version="2.0">
                  <siri:RequestTimestamp>?</siri:RequestTimestamp>
                  <!--Optional:-->
                  <siri:MessageIdentifier>?</siri:MessageIdentifier>
                  <!--Optional:-->
                  <siri:PreviewInterval>?</siri:PreviewInterval>
                  <!--Optional:-->
                  <siri:StartTime>?</siri:StartTime>
                  <siri:MonitoringRef>?</siri:MonitoringRef>
                  <!--Optional:-->
                  <siri:OperatorRef>?</siri:OperatorRef>
                  <!--Optional:-->
                  <siri:LineRef>?</siri:LineRef>
                  <!--Optional:-->
                  <siri:DirectionRef>?</siri:DirectionRef>
                  <!--Optional:-->
                  <siri:DestinationRef>?</siri:DestinationRef>
                  <!--Optional:-->
                  <siri:StopVisitTypes>all</siri:StopVisitTypes>
                  <!--Optional:-->
                  <siri:Language>false</siri:Language>
                  <!--Optional:-->
                  <siri:IncludeTranslations>?</siri:IncludeTranslations>
                  <!--Optional:-->
                  <siri:MaximumStopVisits>?</siri:MaximumStopVisits>
                  <!--You have a CHOICE of the next 2 items at this level-->
                  <!--Optional:-->
                  <siri:MinimumStopVisitsPerLine>?</siri:MinimumStopVisitsPerLine>
                  <!--Optional:-->
                  <siri:MinimumStopVisitsPerLineVia>?</siri:MinimumStopVisitsPerLineVia>
                  <!--Optional:-->
                  <siri:MaximumTextLength>30</siri:MaximumTextLength>
                  <!--Optional:-->
                  <siri:StopMonitoringDetailLevel>normal</siri:StopMonitoringDetailLevel>
                  <!--Optional:-->
                  <siri:IncludeSituations>?</siri:IncludeSituations>
                  <!--Optional:-->
                  <siri:MaximumNumberOfCalls>
                     <!--Optional:-->
                     <siri:Previous>?</siri:Previous>
                     <!--Optional:-->
                     <siri:Onwards>?</siri:Onwards>
                  </siri:MaximumNumberOfCalls>
                  <!--Optional:-->
                  <siri:Extensions>
                     <!--You may enter ANY elements at this point-->
                  </siri:Extensions>
               </siri:StopMonitoringRequest>
               <!--Optional:-->
               <siri:IncrementalUpdates>false</siri:IncrementalUpdates>
               <!--Optional:-->
               <siri:ChangeBeforeUpdates>?</siri:ChangeBeforeUpdates>
               <!--Optional:-->
               <siri:Extensions>
                  <!--You may enter ANY elements at this point-->
               </siri:Extensions>
            </siri:StopMonitoringSubscriptionRequest>
            <!--1 or more repetitions:-->
            <siri:VehicleMonitoringSubscriptionRequest>
               <!--Optional:-->
               <siri:SubscriberRef>?</siri:SubscriberRef>
               <siri:SubscriptionIdentifier>?</siri:SubscriptionIdentifier>
               <siri:InitialTerminationTime>?</siri:InitialTerminationTime>
               <siri:VehicleMonitoringRequest version="2.0">
                  <siri:RequestTimestamp>?</siri:RequestTimestamp>
                  <!--Optional:-->
                  <siri:MessageIdentifier>?</siri:MessageIdentifier>
                  <!--Optional:-->
                  <siri:VehicleMonitoringRef>?</siri:VehicleMonitoringRef>
                  <!--You have a CHOICE of the next 2 items at this level-->
                  <siri:VehicleRef>?</siri:VehicleRef>
                  <siri:LineRef>?</siri:LineRef>
                  <!--Optional:-->
                  <siri:DirectionRef>?</siri:DirectionRef>
                  <!--Optional:-->
                  <siri:Language>en</siri:Language>
                  <!--Optional:-->
                  <siri:IncludeTranslations>?</siri:IncludeTranslations>
                  <!--Optional:-->
                  <siri:MaximumVehicles>?</siri:MaximumVehicles>
                  <!--Optional:-->
                  <siri:VehicleMonitoringDetailLevel>?</siri:VehicleMonitoringDetailLevel>
                  <!--Optional:-->
                  <siri:MaximumNumberOfCalls>
                     <!--Optional:-->
                     <siri:Previous>?</siri:Previous>
                     <!--Optional:-->
                     <siri:Onwards>?</siri:Onwards>
                  </siri:MaximumNumberOfCalls>
                  <!--Optional:-->
                  <siri:IncludeSituations>?</siri:IncludeSituations>
                  <!--Optional:-->
                  <siri:Extensions>
                     <!--You may enter ANY elements at this point-->
                  </siri:Extensions>
               </siri:VehicleMonitoringRequest>
               <!--Optional:-->
               <siri:IncrementalUpdates>false</siri:IncrementalUpdates>
               <!--You have a CHOICE of the next 2 items at this level-->
               <!--Optional:-->
               <siri:ChangeBeforeUpdates>?</siri:ChangeBeforeUpdates>
               <!--Optional:-->
               <siri:UpdateInterval>?</siri:UpdateInterval>
               <!--Optional:-->
               <siri:Extensions>
                  <!--You may enter ANY elements at this point-->
               </siri:Extensions>
            </siri:VehicleMonitoringSubscriptionRequest>
            <!--1 or more repetitions:-->
            <siri:ConnectionTimetableSubscriptionRequest>
               <!--Optional:-->
               <siri:SubscriberRef>?</siri:SubscriberRef>
               <siri:SubscriptionIdentifier>?</siri:SubscriptionIdentifier>
               <siri:InitialTerminationTime>?</siri:InitialTerminationTime>
               <siri:ConnectionTimetableRequest version="2.0">
                  <siri:RequestTimestamp>?</siri:RequestTimestamp>
                  <!--Optional:-->
                  <siri:MessageIdentifier>?</siri:MessageIdentifier>
                  <!--Optional:-->
                  <siri:ArrivalWindow>
                     <siri:StartTime>?</siri:StartTime>
                     <siri:EndTime>?</siri:EndTime>
                  </siri:ArrivalWindow>
                  <siri:ConnectionLinkRef>?</siri:ConnectionLinkRef>
                  <!--Optional:-->
                  <siri:LineRef>?</siri:LineRef>
                  <!--Optional:-->
                  <siri:DirectionRef>?</siri:DirectionRef>
                  <!--Optional:-->
                  <siri:Language>en</siri:Language>
                  <!--Optional:-->
                  <siri:IncludeTranslations>?</siri:IncludeTranslations>
                  <!--Optional:-->
                  <siri:Extensions>
                     <!--You may enter ANY elements at this point-->
                  </siri:Extensions>
               </siri:ConnectionTimetableRequest>
               <!--Optional:-->
               <siri:Extensions>
                  <!--You may enter ANY elements at this point-->
               </siri:Extensions>
            </siri:ConnectionTimetableSubscriptionRequest>
            <!--1 or more repetitions:-->
            <siri:ConnectionMonitoringSubscriptionRequest>
               <!--Optional:-->
               <siri:SubscriberRef>?</siri:SubscriberRef>
               <siri:SubscriptionIdentifier>?</siri:SubscriptionIdentifier>
               <siri:InitialTerminationTime>?</siri:InitialTerminationTime>
               <siri:ConnectionMonitoringRequest version="2.0">
                  <siri:RequestTimestamp>?</siri:RequestTimestamp>
                  <!--Optional:-->
                  <siri:MessageIdentifier>?</siri:MessageIdentifier>
                  <!--Optional:-->
                  <siri:PreviewInterval>?</siri:PreviewInterval>
                  <siri:ConnectionLinkRef>?</siri:ConnectionLinkRef>
                  <!--You have a CHOICE of the next 2 items at this level-->
                  <siri:ConnectingTimeFilter>
                     <siri:LineRef>?</siri:LineRef>
                     <siri:DirectionRef>?</siri:DirectionRef>
                     <!--Optional:-->
                     <siri:EarliestArrivalTime>?</siri:EarliestArrivalTime>
                     <!--Optional:-->
                     <siri:LatestArrivalTime>?</siri:LatestArrivalTime>
                  </siri:ConnectingTimeFilter>
                  <!--1 or more repetitions:-->
                  <siri:ConnectingJourneyFilter>
                     <siri:DatedVehicleJourneyRef>?</siri:DatedVehicleJourneyRef>
                     <!--Optional:-->
                     <siri:VisitNumber>?</siri:VisitNumber>
                     <siri:TimetabledArrivalTime>?</siri:TimetabledArrivalTime>
                  </siri:ConnectingJourneyFilter>
                  <!--Optional:-->
                  <siri:Language>en</siri:Language>
                  <!--Optional:-->
                  <siri:IncludeTranslations>?</siri:IncludeTranslations>
                  <!--Optional:-->
                  <siri:ConnectionMonitoringDetailLevel>?</siri:ConnectionMonitoringDetailLevel>
                  <!--Optional:-->
                  <siri:Extensions>
                     <!--You may enter ANY elements at this point-->
                  </siri:Extensions>
               </siri:ConnectionMonitoringRequest>
               <!--Optional:-->
               <siri:ChangeBeforeUpdates>?</siri:ChangeBeforeUpdates>
               <!--Optional:-->
               <siri:Extensions>
                  <!--You may enter ANY elements at this point-->
               </siri:Extensions>
            </siri:ConnectionMonitoringSubscriptionRequest>
            <!--1 or more repetitions:-->
            <siri:GeneralMessageSubscriptionRequest>
               <!--Optional:-->
               <siri:SubscriberRef>?</siri:SubscriberRef>
               <siri:SubscriptionIdentifier>?</siri:SubscriptionIdentifier>
               <siri:InitialTerminationTime>?</siri:InitialTerminationTime>
               <siri:GeneralMessageRequest version="2.0">
                  <siri:RequestTimestamp>?</siri:RequestTimestamp>
                  <!--Optional:-->
                  <siri:MessageIdentifier>?</siri:MessageIdentifier>
                  <!--Zero or more repetitions:-->
                  <siri:InfoChannelRef>?</siri:InfoChannelRef>
                  <!--Optional:-->
                  <siri:Language>en</siri:Language>
                  <!--Optional:-->
                  <siri:Extensions>
                     <!--You may enter ANY elements at this point-->
                  </siri:Extensions>
               </siri:GeneralMessageRequest>
               <!--Optional:-->
               <siri:Extensions>
                  <!--You may enter ANY elements at this point-->
               </siri:Extensions>
            </siri:GeneralMessageSubscriptionRequest>
            <!--1 or more repetitions:-->
            <siri:FacilityMonitoringSubscriptionRequest>
               <!--Optional:-->
               <siri:SubscriberRef>?</siri:SubscriberRef>
               <siri:SubscriptionIdentifier>?</siri:SubscriptionIdentifier>
               <siri:InitialTerminationTime>?</siri:InitialTerminationTime>
               <siri:FacilityMonitoringRequest version="2.0">
                  <siri:RequestTimestamp>?</siri:RequestTimestamp>
                  <!--Optional:-->
                  <siri:MessageIdentifier>?</siri:MessageIdentifier>
                  <!--Optional:-->
                  <siri:PreviewInterval>?</siri:PreviewInterval>
                  <!--Optional:-->
                  <siri:StartTime>?</siri:StartTime>
                  <!--Zero or more repetitions:-->
                  <siri:FacilityRef>?</siri:FacilityRef>
                  <!--Optional:-->
                  <siri:FeatureRef>?</siri:FeatureRef>
                  <!--Optional:-->
                  <siri:LineRef>?</siri:LineRef>
                  <!--Optional:-->
                  <siri:StopPointRef>?</siri:StopPointRef>
                  <!--Optional:-->
                  <siri:ConnectionLinkRef>?</siri:ConnectionLinkRef>
                  <!--You have a CHOICE of the next 2 items at this level-->
                  <siri:FramedVehicleJourneyRef>
                     <siri:DataFrameRef>?</siri:DataFrameRef>
                     <siri:DatedVehicleJourneyRef>?</siri:DatedVehicleJourneyRef>
                  </siri:FramedVehicleJourneyRef>
                  <siri:VehicleJourneyRef>?</siri:VehicleJourneyRef>
                  <!--Optional:-->
                  <siri:InterchangeRef>?</siri:InterchangeRef>
                  <!--Optional:-->
                  <siri:VehicleRef>?</siri:VehicleRef>
                  <!--Optional:-->
                  <siri:StopPlaceRef>?</siri:StopPlaceRef>
                  <!--Optional:-->
                  <siri:StopPlaceComponentRef>?</siri:StopPlaceComponentRef>
                  <!--Zero or more repetitions:-->
                  <siri:AccessibilityNeedsFilter>
                     <!--1 or more repetitions:-->
                     <siri:UserNeed>
                        <!--You have a CHOICE of the next 4 items at this level-->
                        <acsb:MobilityNeed>?</acsb:MobilityNeed>
                        <acsb:PsychosensoryNeed>?</acsb:PsychosensoryNeed>
                        <acsb:MedicalNeed>?</acsb:MedicalNeed>
                        <acsb:EncumbranceNeed>?</acsb:EncumbranceNeed>
                        <!--Optional:-->
                        <acsb:Excluded>?</acsb:Excluded>
                        <!--Optional:-->
                        <acsb:NeedRanking>?</acsb:NeedRanking>
                        <!--Optional:-->
                        <acsb:Extensions>?</acsb:Extensions>
                     </siri:UserNeed>
                  </siri:AccessibilityNeedsFilter>
                  <!--Optional:-->
                  <siri:Language>en</siri:Language>
                  <!--Optional:-->
                  <siri:IncludeTranslations>?</siri:IncludeTranslations>
                  <!--Optional:-->
                  <siri:MaximumNumberOfFacilityConditions>?</siri:MaximumNumberOfFacilityConditions>
                  <!--Optional:-->
                  <siri:Extensions>
                     <!--You may enter ANY elements at this point-->
                  </siri:Extensions>
               </siri:FacilityMonitoringRequest>
               <!--Optional:-->
               <siri:IncrementalUpdates>false</siri:IncrementalUpdates>
               <!--Optional:-->
               <siri:Extensions>
                  <!--You may enter ANY elements at this point-->
               </siri:Extensions>
            </siri:FacilityMonitoringSubscriptionRequest>
            <!--1 or more repetitions:-->
            <siri:SituationExchangeSubscriptionRequest>
               <!--Optional:-->
               <siri:SubscriberRef>?</siri:SubscriberRef>
               <siri:SubscriptionIdentifier>?</siri:SubscriptionIdentifier>
               <siri:InitialTerminationTime>?</siri:InitialTerminationTime>
               <siri:SituationExchangeRequest version="2.0">
                  <siri:RequestTimestamp>?</siri:RequestTimestamp>
                  <!--Optional:-->
                  <siri:MessageIdentifier>?</siri:MessageIdentifier>
                  <!--Optional:-->
                  <siri:PreviewInterval>?</siri:PreviewInterval>
                  <!--Optional:-->
                  <siri:StartTime>?</siri:StartTime>
                  <!--Optional:-->
                  <siri:VehicleMode>unknown</siri:VehicleMode>
                  <!--You have a CHOICE of the next 7 items at this level-->
                  <siri:AirSubmode>unknown</siri:AirSubmode>
                  <siri:BusSubmode>unknown</siri:BusSubmode>
                  <siri:CoachSubmode>unknown</siri:CoachSubmode>
                  <siri:MetroSubmode>unknown</siri:MetroSubmode>
                  <siri:RailSubmode>unknown</siri:RailSubmode>
                  <siri:TramSubmode>unknown</siri:TramSubmode>
                  <siri:WaterSubmode>unknown</siri:WaterSubmode>
                  <!--Optional:-->
                  <siri:AccessMode>?</siri:AccessMode>
                  <!--Optional:-->
                  <siri:Severity>?</siri:Severity>
                  <!--Zero or more repetitions:-->
                  <siri:Scope>?</siri:Scope>
                  <!--Optional:-->
                  <siri:Predictability>?</siri:Predictability>
                  <!--Optional:-->
                  <siri:Keywords>?</siri:Keywords>
                  <!--Optional:-->
                  <siri:Verification>?</siri:Verification>
                  <!--Zero or more repetitions:-->
                  <siri:Progress>open</siri:Progress>
                  <!--Optional:-->
                  <siri:Reality>?</siri:Reality>
                  <!--Optional:-->
                  <siri:OperatorRef>?</siri:OperatorRef>
                  <!--Zero or more repetitions:-->
                  <siri:OperationalUnitRef>?</siri:OperationalUnitRef>
                  <!--Optional:-->
                  <siri:NetworkRef>?</siri:NetworkRef>
                  <!--Zero or more repetitions:-->
                  <siri:LineRef>?</siri:LineRef>
                  <!--Optional:-->
                  <siri:StopPointRef>?</siri:StopPointRef>
                  <!--Zero or more repetitions:-->
                  <siri:ConnectionLinkRef>?</siri:ConnectionLinkRef>
                  <!--Zero or more repetitions:-->
                  <siri:FacilityRef>?</siri:FacilityRef>
                  <!--Optional:-->
                  <siri:StopPlaceRef>?</siri:StopPlaceRef>
                  <!--You have a CHOICE of the next 2 items at this level-->
                  <siri:FramedVehicleJourneyRef>
                     <siri:DataFrameRef>?</siri:DataFrameRef>
                     <siri:DatedVehicleJourneyRef>?</siri:DatedVehicleJourneyRef>
                  </siri:FramedVehicleJourneyRef>
                  <siri:VehicleJourneyRef>?</siri:VehicleJourneyRef>
                  <!--Optional:-->
                  <siri:InterchangeRef>?</siri:InterchangeRef>
                  <!--Optional:-->
                  <siri:VehicleRef>?</siri:VehicleRef>
                  <!--Optional:-->
                  <siri:CountryRef>?</siri:CountryRef>
                  <!--Optional:-->
                  <siri:PlaceRef>?</siri:PlaceRef>
                  <!--0 to 2 repetitions:-->
                  <siri:Location id="?" srsName="?">
                     <!--You have a CHOICE of the next 2 items at this level-->
                     <siri:Longitude>?</siri:Longitude>
                     <siri:Latitude>?</siri:Latitude>
                     <siri:Coordinates>?</siri:Coordinates>
                     <!--Optional:-->
                     <siri:Precision>?</siri:Precision>
                  </siri:Location>
                  <!--Optional:-->
                  <siri:SituationRoadFilter>
                     <!--1 or more repetitions:-->
                     <siri:RoadFilter>
                        <!--Optional:-->
                        <siri:roadNumber>?</siri:roadNumber>
                        <!--Optional:-->
                        <siri:directionBound>?</siri:directionBound>
                        <!--Optional:-->
                        <siri:referencePointIdentifier>?</siri:referencePointIdentifier>
                     </siri:RoadFilter>
                  </siri:SituationRoadFilter>
                  <!--Zero or more repetitions:-->
                  <siri:AccessibilityNeedFilter>
                     <!--Zero or more repetitions:-->
                     <acsb:UserNeed>
                        <!--You have a CHOICE of the next 4 items at this level-->
                        <acsb:MobilityNeed>?</acsb:MobilityNeed>
                        <acsb:PsychosensoryNeed>?</acsb:PsychosensoryNeed>
                        <acsb:MedicalNeed>?</acsb:MedicalNeed>
                        <acsb:EncumbranceNeed>?</acsb:EncumbranceNeed>
                        <!--Optional:-->
                        <acsb:Excluded>?</acsb:Excluded>
                        <!--Optional:-->
                        <acsb:NeedRanking>?</acsb:NeedRanking>
                        <!--Optional:-->
                        <acsb:Extensions>?</acsb:Extensions>
                     </acsb:UserNeed>
                     <!--Optional:-->
                     <acsb:AccompaniedByCarer>?</acsb:AccompaniedByCarer>
                  </siri:AccessibilityNeedFilter>
                  <!--Optional:-->
                  <siri:Language>en</siri:Language>
                  <!--Optional:-->
                  <siri:IncludeTranslations>?</siri:IncludeTranslations>
                  <!--Optional:-->
                  <siri:MaximumNumberOfSituationElements>?</siri:MaximumNumberOfSituationElements>
                  <!--Optional:-->
                  <siri:Extensions>
                     <!--You may enter ANY elements at this point-->
                  </siri:Extensions>
               </siri:SituationExchangeRequest>
               <!--Optional:-->
               <siri:IncrementalUpdates>false</siri:IncrementalUpdates>
               <!--Optional:-->
               <siri:Extensions>
                  <!--You may enter ANY elements at this point-->
               </siri:Extensions>
            </siri:SituationExchangeSubscriptionRequest>
         </Request>
         <RequestExtension>
            <!--You may enter ANY elements at this point-->
         </RequestExtension>
      </wsdl:Subscribe>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="Subscribe"/><con:wsrmConfig version="1.2"/></con:call></con:operation><con:operation isOneWay="false" action="ConnectionLinksDiscovery" name="ConnectionLinksDiscovery" bindingOperationName="ConnectionLinksDiscovery" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://L276002:8080/test35Producer</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsdl="http://wsdl.siri.org.uk" xmlns:siri="http://www.siri.org.uk/siri">
   <soapenv:Header/>
   <soapenv:Body>
      <wsdl:ConnectionLinksDiscovery>
         <Request version="2.0">
            <siri:RequestTimestamp>?</siri:RequestTimestamp>
            <!--Optional:-->
            <siri:AccountId>?</siri:AccountId>
            <!--Optional:-->
            <siri:AccountKey>?</siri:AccountKey>
            <!--Optional:-->
            <siri:Address>?</siri:Address>
            <siri:RequestorRef>?</siri:RequestorRef>
            <!--Optional:-->
            <siri:MessageIdentifier>?</siri:MessageIdentifier>
            <!--You have a CHOICE of the next 3 items at this level-->
            <siri:BoundingBox>
               <siri:UpperLeft id="?" srsName="?">
                  <!--You have a CHOICE of the next 2 items at this level-->
                  <siri:Longitude>?</siri:Longitude>
                  <siri:Latitude>?</siri:Latitude>
                  <siri:Coordinates>?</siri:Coordinates>
                  <!--Optional:-->
                  <siri:Precision>?</siri:Precision>
               </siri:UpperLeft>
               <siri:LowerRight id="?" srsName="?">
                  <!--You have a CHOICE of the next 2 items at this level-->
                  <siri:Longitude>?</siri:Longitude>
                  <siri:Latitude>?</siri:Latitude>
                  <siri:Coordinates>?</siri:Coordinates>
                  <!--Optional:-->
                  <siri:Precision>?</siri:Precision>
               </siri:LowerRight>
            </siri:BoundingBox>
            <siri:Circle id="?" srsName="?">
               <!--You have a CHOICE of the next 2 items at this level-->
               <siri:Longitude>?</siri:Longitude>
               <siri:Latitude>?</siri:Latitude>
               <siri:Coordinates>?</siri:Coordinates>
               <!--Optional:-->
               <siri:Precision>?</siri:Precision>
            </siri:Circle>
            <siri:PlaceRef>?</siri:PlaceRef>
            <!--Optional:-->
            <siri:LineRef>?</siri:LineRef>
            <!--Optional:-->
            <siri:OperatorRef>?</siri:OperatorRef>
            <!--Optional:-->
            <siri:Language>en</siri:Language>
            <!--Optional:-->
            <siri:ConnectionLinksDetailLevel>normal</siri:ConnectionLinksDetailLevel>
         </Request>
         <RequestExtension>
            <!--You may enter ANY elements at this point-->
         </RequestExtension>
      </wsdl:ConnectionLinksDiscovery>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:wsaConfig mustUnderstand="NONE" version="200508" action="ConnectionLinksDiscovery"/></con:call></con:operation></con:interface><con:interface xsi:type="con:WsdlInterface" wsaVersion="NONE" name="SiriSOAPBinding" type="wsdl" bindingName="{http://new.webservice.namespace}SiriSOAPBinding" soapVersion="1_1" anonymous="optional" definition="/home/paul/Desktop/XSD SIRI/wsdl2-2/siri_wsProducer.wsdl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache/><con:endpoints><con:endpoint>http://www.siri-service-location.com</con:endpoint></con:endpoints><con:operation isOneWay="false" action="CheckStatus" name="CheckStatus" bindingOperationName="CheckStatus" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://www.siri-service-location.com</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:new="http://new.webservice.namespace" xmlns:siri="http://www.siri.org.uk/">
   <soapenv:Header/>
   <soapenv:Body>
      <new:CheckStatus>
         <Request>
            <siri:RequestTimestamp>?</siri:RequestTimestamp>
            <!--Optional:-->
            <siri:Address>?</siri:Address>
            <siri:RequestorRef>?</siri:RequestorRef>
            <!--Optional:-->
            <siri:MessageIdentifier>?</siri:MessageIdentifier>
         </Request>
         <RequestExtension>
            <!--You may enter ANY elements at this point-->
         </RequestExtension>
      </new:CheckStatus>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:wsaConfig mustUnderstand="NONE" version="200508" action="CheckStatus"/></con:call></con:operation><con:operation isOneWay="false" action="urn:#DataSupply" name="DataSupply" bindingOperationName="DataSupply" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://www.siri-service-location.com</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:new="http://new.webservice.namespace" xmlns:siri="http://www.siri.org.uk/">
   <soapenv:Header/>
   <soapenv:Body>
      <new:DataSupply>
         <DataSupplyRequestInfo>
            <siri:RequestTimestamp>?</siri:RequestTimestamp>
            <!--Optional:-->
            <siri:Address>?</siri:Address>
            <!--Optional:-->
            <siri:ConsumerRef>?</siri:ConsumerRef>
            <!--Optional:-->
            <siri:MessageIdentifier>?</siri:MessageIdentifier>
         </DataSupplyRequestInfo>
         <Request>
            <!--Optional:-->
            <siri:NotificationRef>?</siri:NotificationRef>
            <!--Optional:-->
            <siri:AllData>false</siri:AllData>
         </Request>
         <RequestExtension>
            <!--You may enter ANY elements at this point-->
         </RequestExtension>
      </new:DataSupply>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:#DataSupply"/></con:call></con:operation><con:operation isOneWay="false" action="urn:#DeleteSubscription" name="DeleteSubscription" bindingOperationName="DeleteSubscription" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://www.siri-service-location.com</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:new="http://new.webservice.namespace" xmlns:siri="http://www.siri.org.uk/">
   <soapenv:Header/>
   <soapenv:Body>
      <new:DeleteSubscription>
         <DeleteSubscriptionInfo>
            <siri:RequestTimestamp>?</siri:RequestTimestamp>
            <!--Optional:-->
            <siri:Address>?</siri:Address>
            <siri:RequestorRef>?</siri:RequestorRef>
            <!--Optional:-->
            <siri:MessageIdentifier>?</siri:MessageIdentifier>
         </DeleteSubscriptionInfo>
         <Request>
            <!--You have a CHOICE of the next 2 items at this level-->
            <siri:All>?</siri:All>
            <!--1 or more repetitions:-->
            <siri:SubscriptionRef>?</siri:SubscriptionRef>
         </Request>
         <RequestExtension>
            <!--You may enter ANY elements at this point-->
         </RequestExtension>
      </new:DeleteSubscription>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:#DeleteSubscription"/></con:call></con:operation><con:operation isOneWay="false" action="GetCapabilities" name="GetCapabilities" bindingOperationName="GetCapabilities" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://www.siri-service-location.com</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:new="http://new.webservice.namespace" xmlns:siri="http://www.siri.org.uk/">
   <soapenv:Header/>
   <soapenv:Body>
      <new:GetCapabilities>
         <Request version="1.0">
            <siri:RequestTimestamp>?</siri:RequestTimestamp>
            <!--Optional:-->
            <siri:Address>?</siri:Address>
            <siri:RequestorRef>?</siri:RequestorRef>
            <!--Optional:-->
            <siri:MessageIdentifier>?</siri:MessageIdentifier>
            <!--Optional:-->
            <siri:ProductionTimetableCapabilitiesRequest>
               <siri:RequestTimestamp>?</siri:RequestTimestamp>
               <!--Optional:-->
               <siri:MessageIdentifier>?</siri:MessageIdentifier>
               <!--Optional:-->
               <siri:ParticipantPermissions>false</siri:ParticipantPermissions>
               <!--Optional:-->
               <siri:Extensions>
                  <!--You may enter ANY elements at this point-->
               </siri:Extensions>
            </siri:ProductionTimetableCapabilitiesRequest>
            <!--Optional:-->
            <siri:EstimatedTimetableCapabilitiesRequest>
               <siri:RequestTimestamp>?</siri:RequestTimestamp>
               <!--Optional:-->
               <siri:MessageIdentifier>?</siri:MessageIdentifier>
               <!--Optional:-->
               <siri:ParticipantPermissions>false</siri:ParticipantPermissions>
               <!--Optional:-->
               <siri:Extensions>
                  <!--You may enter ANY elements at this point-->
               </siri:Extensions>
            </siri:EstimatedTimetableCapabilitiesRequest>
            <!--Optional:-->
            <siri:StopTimetableCapabilitiesRequest>
               <siri:RequestTimestamp>?</siri:RequestTimestamp>
               <!--Optional:-->
               <siri:MessageIdentifier>?</siri:MessageIdentifier>
               <!--Optional:-->
               <siri:ParticipantPermissions>false</siri:ParticipantPermissions>
               <!--Optional:-->
               <siri:Extensions>
                  <!--You may enter ANY elements at this point-->
               </siri:Extensions>
            </siri:StopTimetableCapabilitiesRequest>
            <!--Optional:-->
            <siri:StopMonitoringCapabilitiesRequest>
               <siri:RequestTimestamp>?</siri:RequestTimestamp>
               <!--Optional:-->
               <siri:MessageIdentifier>?</siri:MessageIdentifier>
               <!--Optional:-->
               <siri:ParticipantPermissions>false</siri:ParticipantPermissions>
               <!--Optional:-->
               <siri:Extensions>
                  <!--You may enter ANY elements at this point-->
               </siri:Extensions>
            </siri:StopMonitoringCapabilitiesRequest>
            <!--Optional:-->
            <siri:VehicleMonitoringCapabilitiesRequest>
               <siri:RequestTimestamp>?</siri:RequestTimestamp>
               <!--Optional:-->
               <siri:MessageIdentifier>?</siri:MessageIdentifier>
               <!--Optional:-->
               <siri:ParticipantPermissions>false</siri:ParticipantPermissions>
               <!--Optional:-->
               <siri:Extensions>
                  <!--You may enter ANY elements at this point-->
               </siri:Extensions>
            </siri:VehicleMonitoringCapabilitiesRequest>
            <!--Optional:-->
            <siri:ConnectionTimetableCapabilitiesRequest>
               <siri:RequestTimestamp>?</siri:RequestTimestamp>
               <!--Optional:-->
               <siri:MessageIdentifier>?</siri:MessageIdentifier>
               <!--Optional:-->
               <siri:ParticipantPermissions>false</siri:ParticipantPermissions>
               <!--Optional:-->
               <siri:Extensions>
                  <!--You may enter ANY elements at this point-->
               </siri:Extensions>
            </siri:ConnectionTimetableCapabilitiesRequest>
            <!--Optional:-->
            <siri:ConnectionMonitoringCapabilitiesRequest>
               <siri:RequestTimestamp>?</siri:RequestTimestamp>
               <!--Optional:-->
               <siri:MessageIdentifier>?</siri:MessageIdentifier>
               <!--Optional:-->
               <siri:ParticipantPermissions>false</siri:ParticipantPermissions>
               <!--Optional:-->
               <siri:Extensions>
                  <!--You may enter ANY elements at this point-->
               </siri:Extensions>
            </siri:ConnectionMonitoringCapabilitiesRequest>
            <!--Optional:-->
            <siri:GeneralMessageCapabilitiesRequest>
               <siri:RequestTimestamp>?</siri:RequestTimestamp>
               <!--Optional:-->
               <siri:MessageIdentifier>?</siri:MessageIdentifier>
               <!--Optional:-->
               <siri:ParticipantPermissions>false</siri:ParticipantPermissions>
               <!--Optional:-->
               <siri:Extensions>
                  <!--You may enter ANY elements at this point-->
               </siri:Extensions>
            </siri:GeneralMessageCapabilitiesRequest>
            <!--Optional:-->
            <siri:FacilityMonitoringCapabilitiesRequest>
               <siri:RequestTimestamp>?</siri:RequestTimestamp>
               <!--Optional:-->
               <siri:MessageIdentifier>?</siri:MessageIdentifier>
               <!--Optional:-->
               <siri:ParticipantPermissions>false</siri:ParticipantPermissions>
               <!--Optional:-->
               <siri:Extensions>
                  <!--You may enter ANY elements at this point-->
               </siri:Extensions>
            </siri:FacilityMonitoringCapabilitiesRequest>
         </Request>
         <RequestExtension>
            <!--You may enter ANY elements at this point-->
         </RequestExtension>
      </new:GetCapabilities>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetCapabilities"/></con:call></con:operation><con:operation isOneWay="false" action="GetConnectionMonitoring" name="GetConnectionMonitoring" bindingOperationName="GetConnectionMonitoring" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://www.siri-service-location.com</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:new="http://new.webservice.namespace" xmlns:siri="http://www.siri.org.uk/">
   <soapenv:Header/>
   <soapenv:Body>
      <new:GetConnectionMonitoring>
         <ServiceRequestInfo>
            <!--Optional:-->
            <siri:ServiceRequestContext>
               <!--Optional:-->
               <siri:CheckStatusAddress>?</siri:CheckStatusAddress>
               <!--Optional:-->
               <siri:SubscribeAddress>?</siri:SubscribeAddress>
               <!--Optional:-->
               <siri:ManageSubscriptionAddress>?</siri:ManageSubscriptionAddress>
               <!--Optional:-->
               <siri:GetDataAddress>?</siri:GetDataAddress>
               <!--Optional:-->
               <siri:StatusResponseAddress>?</siri:StatusResponseAddress>
               <!--Optional:-->
               <siri:SubscriberAddress>?</siri:SubscriberAddress>
               <!--Optional:-->
               <siri:NotifyAddress>?</siri:NotifyAddress>
               <!--Optional:-->
               <siri:ConsumerAddress>?</siri:ConsumerAddress>
               <!--Optional:-->
               <siri:DataNameSpaces>
                  <!--Optional:-->
                  <siri:StopPointNameSpace>?</siri:StopPointNameSpace>
                  <!--Optional:-->
                  <siri:LineNameSpace>?</siri:LineNameSpace>
                  <!--Optional:-->
                  <siri:ProductCategoryNameSpace>?</siri:ProductCategoryNameSpace>
                  <!--Optional:-->
                  <siri:ServiceFeatureNameSpace>?</siri:ServiceFeatureNameSpace>
                  <!--Optional:-->
                  <siri:VehicleFeatureNameSpace>?</siri:VehicleFeatureNameSpace>
               </siri:DataNameSpaces>
               <!--Optional:-->
               <siri:Language>en</siri:Language>
               <!--You have a CHOICE of the next 2 items at this level-->
               <siri:WgsDecimalDegrees>?</siri:WgsDecimalDegrees>
               <siri:GmlCoordinateFormat>?</siri:GmlCoordinateFormat>
               <!--Optional:-->
               <siri:DataHorizon>?</siri:DataHorizon>
               <!--Optional:-->
               <siri:RequestTimeout>?</siri:RequestTimeout>
               <!--Optional:-->
               <siri:DeliveryMethod>direct</siri:DeliveryMethod>
               <!--Optional:-->
               <siri:MultipartDespatch>?</siri:MultipartDespatch>
               <!--Optional:-->
               <siri:ConfirmDelivery>false</siri:ConfirmDelivery>
               <!--Optional:-->
               <siri:MaximimumNumberOfSubscriptions>?</siri:MaximimumNumberOfSubscriptions>
               <!--Optional:-->
               <siri:AllowedPredictors>anyone</siri:AllowedPredictors>
               <!--Optional:-->
               <siri:PredictionFunction>?</siri:PredictionFunction>
            </siri:ServiceRequestContext>
            <siri:RequestTimestamp>?</siri:RequestTimestamp>
            <!--Optional:-->
            <siri:Address>?</siri:Address>
            <siri:RequestorRef>?</siri:RequestorRef>
            <!--Optional:-->
            <siri:MessageIdentifier>?</siri:MessageIdentifier>
         </ServiceRequestInfo>
         <Request version="1.0">
            <siri:RequestTimestamp>?</siri:RequestTimestamp>
            <!--Optional:-->
            <siri:MessageIdentifier>?</siri:MessageIdentifier>
            <!--Optional:-->
            <siri:PreviewInterval>?</siri:PreviewInterval>
            <siri:ConnectionLinkRef>?</siri:ConnectionLinkRef>
            <!--You have a CHOICE of the next 2 items at this level-->
            <siri:ConnectingTimeFilter>
               <siri:LineRef>?</siri:LineRef>
               <siri:DirectionRef>?</siri:DirectionRef>
               <!--Optional:-->
               <siri:EarliestArrivalTime>?</siri:EarliestArrivalTime>
               <!--Optional:-->
               <siri:LatestArrivalTime>?</siri:LatestArrivalTime>
            </siri:ConnectingTimeFilter>
            <!--1 or more repetitions:-->
            <siri:ConnectingJourneyFilter>
               <siri:DatedVehicleJourneyRef>?</siri:DatedVehicleJourneyRef>
               <!--Optional:-->
               <siri:VisitNumber>?</siri:VisitNumber>
               <siri:TimetabledArrivalTime>?</siri:TimetabledArrivalTime>
            </siri:ConnectingJourneyFilter>
            <!--Optional:-->
            <siri:Language>en</siri:Language>
            <!--Optional:-->
            <siri:Extensions>
               <!--You may enter ANY elements at this point-->
            </siri:Extensions>
         </Request>
         <RequestExtension>
            <!--You may enter ANY elements at this point-->
         </RequestExtension>
      </new:GetConnectionMonitoring>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetConnectionMonitoring"/></con:call></con:operation><con:operation isOneWay="false" action="GetConnectionTimetable" name="GetConnectionTimetable" bindingOperationName="GetConnectionTimetable" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://www.siri-service-location.com</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:new="http://new.webservice.namespace" xmlns:siri="http://www.siri.org.uk/">
   <soapenv:Header/>
   <soapenv:Body>
      <new:GetConnectionTimetable>
         <ServiceRequestInfo>
            <!--Optional:-->
            <siri:ServiceRequestContext>
               <!--Optional:-->
               <siri:CheckStatusAddress>?</siri:CheckStatusAddress>
               <!--Optional:-->
               <siri:SubscribeAddress>?</siri:SubscribeAddress>
               <!--Optional:-->
               <siri:ManageSubscriptionAddress>?</siri:ManageSubscriptionAddress>
               <!--Optional:-->
               <siri:GetDataAddress>?</siri:GetDataAddress>
               <!--Optional:-->
               <siri:StatusResponseAddress>?</siri:StatusResponseAddress>
               <!--Optional:-->
               <siri:SubscriberAddress>?</siri:SubscriberAddress>
               <!--Optional:-->
               <siri:NotifyAddress>?</siri:NotifyAddress>
               <!--Optional:-->
               <siri:ConsumerAddress>?</siri:ConsumerAddress>
               <!--Optional:-->
               <siri:DataNameSpaces>
                  <!--Optional:-->
                  <siri:StopPointNameSpace>?</siri:StopPointNameSpace>
                  <!--Optional:-->
                  <siri:LineNameSpace>?</siri:LineNameSpace>
                  <!--Optional:-->
                  <siri:ProductCategoryNameSpace>?</siri:ProductCategoryNameSpace>
                  <!--Optional:-->
                  <siri:ServiceFeatureNameSpace>?</siri:ServiceFeatureNameSpace>
                  <!--Optional:-->
                  <siri:VehicleFeatureNameSpace>?</siri:VehicleFeatureNameSpace>
               </siri:DataNameSpaces>
               <!--Optional:-->
               <siri:Language>en</siri:Language>
               <!--You have a CHOICE of the next 2 items at this level-->
               <siri:WgsDecimalDegrees>?</siri:WgsDecimalDegrees>
               <siri:GmlCoordinateFormat>?</siri:GmlCoordinateFormat>
               <!--Optional:-->
               <siri:DataHorizon>?</siri:DataHorizon>
               <!--Optional:-->
               <siri:RequestTimeout>?</siri:RequestTimeout>
               <!--Optional:-->
               <siri:DeliveryMethod>direct</siri:DeliveryMethod>
               <!--Optional:-->
               <siri:MultipartDespatch>?</siri:MultipartDespatch>
               <!--Optional:-->
               <siri:ConfirmDelivery>false</siri:ConfirmDelivery>
               <!--Optional:-->
               <siri:MaximimumNumberOfSubscriptions>?</siri:MaximimumNumberOfSubscriptions>
               <!--Optional:-->
               <siri:AllowedPredictors>anyone</siri:AllowedPredictors>
               <!--Optional:-->
               <siri:PredictionFunction>?</siri:PredictionFunction>
            </siri:ServiceRequestContext>
            <siri:RequestTimestamp>?</siri:RequestTimestamp>
            <!--Optional:-->
            <siri:Address>?</siri:Address>
            <siri:RequestorRef>?</siri:RequestorRef>
            <!--Optional:-->
            <siri:MessageIdentifier>?</siri:MessageIdentifier>
         </ServiceRequestInfo>
         <Request version="1.0">
            <siri:RequestTimestamp>?</siri:RequestTimestamp>
            <!--Optional:-->
            <siri:MessageIdentifier>?</siri:MessageIdentifier>
            <!--Optional:-->
            <siri:ArrivalWindow>
               <siri:StartTime>?</siri:StartTime>
               <siri:EndTime>?</siri:EndTime>
            </siri:ArrivalWindow>
            <siri:ConnectionLinkRef>?</siri:ConnectionLinkRef>
            <!--Optional:-->
            <siri:LineRef>?</siri:LineRef>
            <!--Optional:-->
            <siri:DirectionRef>?</siri:DirectionRef>
            <!--Optional:-->
            <siri:Language>en</siri:Language>
         </Request>
         <RequestExtension>
            <!--You may enter ANY elements at this point-->
         </RequestExtension>
      </new:GetConnectionTimetable>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetConnectionTimetable"/></con:call></con:operation><con:operation isOneWay="false" action="GetEstimatedTimetable" name="GetEstimatedTimetable" bindingOperationName="GetEstimatedTimetable" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://www.siri-service-location.com</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:new="http://new.webservice.namespace" xmlns:siri="http://www.siri.org.uk/">
   <soapenv:Header/>
   <soapenv:Body>
      <new:GetEstimatedTimetable>
         <ServiceRequestInfo>
            <!--Optional:-->
            <siri:ServiceRequestContext>
               <!--Optional:-->
               <siri:CheckStatusAddress>?</siri:CheckStatusAddress>
               <!--Optional:-->
               <siri:SubscribeAddress>?</siri:SubscribeAddress>
               <!--Optional:-->
               <siri:ManageSubscriptionAddress>?</siri:ManageSubscriptionAddress>
               <!--Optional:-->
               <siri:GetDataAddress>?</siri:GetDataAddress>
               <!--Optional:-->
               <siri:StatusResponseAddress>?</siri:StatusResponseAddress>
               <!--Optional:-->
               <siri:SubscriberAddress>?</siri:SubscriberAddress>
               <!--Optional:-->
               <siri:NotifyAddress>?</siri:NotifyAddress>
               <!--Optional:-->
               <siri:ConsumerAddress>?</siri:ConsumerAddress>
               <!--Optional:-->
               <siri:DataNameSpaces>
                  <!--Optional:-->
                  <siri:StopPointNameSpace>?</siri:StopPointNameSpace>
                  <!--Optional:-->
                  <siri:LineNameSpace>?</siri:LineNameSpace>
                  <!--Optional:-->
                  <siri:ProductCategoryNameSpace>?</siri:ProductCategoryNameSpace>
                  <!--Optional:-->
                  <siri:ServiceFeatureNameSpace>?</siri:ServiceFeatureNameSpace>
                  <!--Optional:-->
                  <siri:VehicleFeatureNameSpace>?</siri:VehicleFeatureNameSpace>
               </siri:DataNameSpaces>
               <!--Optional:-->
               <siri:Language>en</siri:Language>
               <!--You have a CHOICE of the next 2 items at this level-->
               <siri:WgsDecimalDegrees>?</siri:WgsDecimalDegrees>
               <siri:GmlCoordinateFormat>?</siri:GmlCoordinateFormat>
               <!--Optional:-->
               <siri:DataHorizon>?</siri:DataHorizon>
               <!--Optional:-->
               <siri:RequestTimeout>?</siri:RequestTimeout>
               <!--Optional:-->
               <siri:DeliveryMethod>direct</siri:DeliveryMethod>
               <!--Optional:-->
               <siri:MultipartDespatch>?</siri:MultipartDespatch>
               <!--Optional:-->
               <siri:ConfirmDelivery>false</siri:ConfirmDelivery>
               <!--Optional:-->
               <siri:MaximimumNumberOfSubscriptions>?</siri:MaximimumNumberOfSubscriptions>
               <!--Optional:-->
               <siri:AllowedPredictors>anyone</siri:AllowedPredictors>
               <!--Optional:-->
               <siri:PredictionFunction>?</siri:PredictionFunction>
            </siri:ServiceRequestContext>
            <siri:RequestTimestamp>?</siri:RequestTimestamp>
            <!--Optional:-->
            <siri:Address>?</siri:Address>
            <siri:RequestorRef>?</siri:RequestorRef>
            <!--Optional:-->
            <siri:MessageIdentifier>?</siri:MessageIdentifier>
         </ServiceRequestInfo>
         <Request version="1.0">
            <siri:RequestTimestamp>?</siri:RequestTimestamp>
            <!--Optional:-->
            <siri:MessageIdentifier>?</siri:MessageIdentifier>
            <!--Optional:-->
            <siri:PreviewInterval>?</siri:PreviewInterval>
            <!--Optional:-->
            <siri:TimetableVersionRef>?</siri:TimetableVersionRef>
            <!--Zero or more repetitions:-->
            <siri:OperatorRef>?</siri:OperatorRef>
            <siri:LineRef>?</siri:LineRef>
            <!--Optional:-->
            <siri:DirectionRef>?</siri:DirectionRef>
            <!--Optional:-->
            <siri:Language>en</siri:Language>
            <!--Optional:-->
            <siri:Extensions>
               <!--You may enter ANY elements at this point-->
            </siri:Extensions>
         </Request>
         <RequestExtension>
            <!--You may enter ANY elements at this point-->
         </RequestExtension>
      </new:GetEstimatedTimetable>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetEstimatedTimetable"/></con:call></con:operation><con:operation isOneWay="false" action="GetFacilityMonitoring" name="GetFacilityMonitoring" bindingOperationName="GetFacilityMonitoring" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://www.siri-service-location.com</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:new="http://new.webservice.namespace" xmlns:siri="http://www.siri.org.uk/">
   <soapenv:Header/>
   <soapenv:Body>
      <new:GetFacilityMonitoring>
         <ServiceRequestInfo>
            <!--Optional:-->
            <siri:ServiceRequestContext>
               <!--Optional:-->
               <siri:CheckStatusAddress>?</siri:CheckStatusAddress>
               <!--Optional:-->
               <siri:SubscribeAddress>?</siri:SubscribeAddress>
               <!--Optional:-->
               <siri:ManageSubscriptionAddress>?</siri:ManageSubscriptionAddress>
               <!--Optional:-->
               <siri:GetDataAddress>?</siri:GetDataAddress>
               <!--Optional:-->
               <siri:StatusResponseAddress>?</siri:StatusResponseAddress>
               <!--Optional:-->
               <siri:SubscriberAddress>?</siri:SubscriberAddress>
               <!--Optional:-->
               <siri:NotifyAddress>?</siri:NotifyAddress>
               <!--Optional:-->
               <siri:ConsumerAddress>?</siri:ConsumerAddress>
               <!--Optional:-->
               <siri:DataNameSpaces>
                  <!--Optional:-->
                  <siri:StopPointNameSpace>?</siri:StopPointNameSpace>
                  <!--Optional:-->
                  <siri:LineNameSpace>?</siri:LineNameSpace>
                  <!--Optional:-->
                  <siri:ProductCategoryNameSpace>?</siri:ProductCategoryNameSpace>
                  <!--Optional:-->
                  <siri:ServiceFeatureNameSpace>?</siri:ServiceFeatureNameSpace>
                  <!--Optional:-->
                  <siri:VehicleFeatureNameSpace>?</siri:VehicleFeatureNameSpace>
               </siri:DataNameSpaces>
               <!--Optional:-->
               <siri:Language>en</siri:Language>
               <!--You have a CHOICE of the next 2 items at this level-->
               <siri:WgsDecimalDegrees>?</siri:WgsDecimalDegrees>
               <siri:GmlCoordinateFormat>?</siri:GmlCoordinateFormat>
               <!--Optional:-->
               <siri:DataHorizon>?</siri:DataHorizon>
               <!--Optional:-->
               <siri:RequestTimeout>?</siri:RequestTimeout>
               <!--Optional:-->
               <siri:DeliveryMethod>direct</siri:DeliveryMethod>
               <!--Optional:-->
               <siri:MultipartDespatch>?</siri:MultipartDespatch>
               <!--Optional:-->
               <siri:ConfirmDelivery>false</siri:ConfirmDelivery>
               <!--Optional:-->
               <siri:MaximimumNumberOfSubscriptions>?</siri:MaximimumNumberOfSubscriptions>
               <!--Optional:-->
               <siri:AllowedPredictors>anyone</siri:AllowedPredictors>
               <!--Optional:-->
               <siri:PredictionFunction>?</siri:PredictionFunction>
            </siri:ServiceRequestContext>
            <siri:RequestTimestamp>?</siri:RequestTimestamp>
            <!--Optional:-->
            <siri:Address>?</siri:Address>
            <siri:RequestorRef>?</siri:RequestorRef>
            <!--Optional:-->
            <siri:MessageIdentifier>?</siri:MessageIdentifier>
         </ServiceRequestInfo>
         <Request version="1.0">
            <siri:RequestTimestamp>?</siri:RequestTimestamp>
            <!--Optional:-->
            <siri:MessageIdentifier>?</siri:MessageIdentifier>
            <!--Optional:-->
            <siri:StartTime>?</siri:StartTime>
            <!--Zero or more repetitions:-->
            <siri:FacilityRef>?</siri:FacilityRef>
            <!--Optional:-->
            <siri:StopPointRef>?</siri:StopPointRef>
            <!--Optional:-->
            <siri:LineRef>?</siri:LineRef>
            <!--Optional:-->
            <siri:ConnectionLinkRef>?</siri:ConnectionLinkRef>
            <!--Optional:-->
            <siri:VehicleRef>?</siri:VehicleRef>
            <!--Zero or more repetitions:-->
            <siri:SpecificlNeedFilter>?</siri:SpecificlNeedFilter>
            <!--Optional:-->
            <siri:Language>en</siri:Language>
            <!--Optional:-->
            <siri:MaximumNumberOfFacilityCondition>?</siri:MaximumNumberOfFacilityCondition>
            <!--Optional:-->
            <siri:Extensions>
               <!--You may enter ANY elements at this point-->
            </siri:Extensions>
         </Request>
         <RequestExtension>
            <!--You may enter ANY elements at this point-->
         </RequestExtension>
      </new:GetFacilityMonitoring>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetFacilityMonitoring"/></con:call></con:operation><con:operation isOneWay="false" action="GetGeneralMessage" name="GetGeneralMessage" bindingOperationName="GetGeneralMessage" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://www.siri-service-location.com</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:new="http://new.webservice.namespace" xmlns:siri="http://www.siri.org.uk/">
   <soapenv:Header/>
   <soapenv:Body>
      <new:GetGeneralMessage>
         <ServiceRequestInfo>
            <!--Optional:-->
            <siri:ServiceRequestContext>
               <!--Optional:-->
               <siri:CheckStatusAddress>?</siri:CheckStatusAddress>
               <!--Optional:-->
               <siri:SubscribeAddress>?</siri:SubscribeAddress>
               <!--Optional:-->
               <siri:ManageSubscriptionAddress>?</siri:ManageSubscriptionAddress>
               <!--Optional:-->
               <siri:GetDataAddress>?</siri:GetDataAddress>
               <!--Optional:-->
               <siri:StatusResponseAddress>?</siri:StatusResponseAddress>
               <!--Optional:-->
               <siri:SubscriberAddress>?</siri:SubscriberAddress>
               <!--Optional:-->
               <siri:NotifyAddress>?</siri:NotifyAddress>
               <!--Optional:-->
               <siri:ConsumerAddress>?</siri:ConsumerAddress>
               <!--Optional:-->
               <siri:DataNameSpaces>
                  <!--Optional:-->
                  <siri:StopPointNameSpace>?</siri:StopPointNameSpace>
                  <!--Optional:-->
                  <siri:LineNameSpace>?</siri:LineNameSpace>
                  <!--Optional:-->
                  <siri:ProductCategoryNameSpace>?</siri:ProductCategoryNameSpace>
                  <!--Optional:-->
                  <siri:ServiceFeatureNameSpace>?</siri:ServiceFeatureNameSpace>
                  <!--Optional:-->
                  <siri:VehicleFeatureNameSpace>?</siri:VehicleFeatureNameSpace>
               </siri:DataNameSpaces>
               <!--Optional:-->
               <siri:Language>en</siri:Language>
               <!--You have a CHOICE of the next 2 items at this level-->
               <siri:WgsDecimalDegrees>?</siri:WgsDecimalDegrees>
               <siri:GmlCoordinateFormat>?</siri:GmlCoordinateFormat>
               <!--Optional:-->
               <siri:DataHorizon>?</siri:DataHorizon>
               <!--Optional:-->
               <siri:RequestTimeout>?</siri:RequestTimeout>
               <!--Optional:-->
               <siri:DeliveryMethod>direct</siri:DeliveryMethod>
               <!--Optional:-->
               <siri:MultipartDespatch>?</siri:MultipartDespatch>
               <!--Optional:-->
               <siri:ConfirmDelivery>false</siri:ConfirmDelivery>
               <!--Optional:-->
               <siri:MaximimumNumberOfSubscriptions>?</siri:MaximimumNumberOfSubscriptions>
               <!--Optional:-->
               <siri:AllowedPredictors>anyone</siri:AllowedPredictors>
               <!--Optional:-->
               <siri:PredictionFunction>?</siri:PredictionFunction>
            </siri:ServiceRequestContext>
            <siri:RequestTimestamp>?</siri:RequestTimestamp>
            <!--Optional:-->
            <siri:Address>?</siri:Address>
            <siri:RequestorRef>?</siri:RequestorRef>
            <!--Optional:-->
            <siri:MessageIdentifier>?</siri:MessageIdentifier>
         </ServiceRequestInfo>
         <Request version="1.0">
            <siri:RequestTimestamp>?</siri:RequestTimestamp>
            <!--Optional:-->
            <siri:MessageIdentifier>?</siri:MessageIdentifier>
            <!--Zero or more repetitions:-->
            <siri:InfoChannelRef>?</siri:InfoChannelRef>
            <!--Optional:-->
            <siri:Language>en</siri:Language>
            <!--Optional:-->
            <siri:Extensions>
               <!--You may enter ANY elements at this point-->
            </siri:Extensions>
         </Request>
         <RequestExtension>
            <!--You may enter ANY elements at this point-->
         </RequestExtension>
      </new:GetGeneralMessage>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetGeneralMessage"/></con:call></con:operation><con:operation isOneWay="false" action="GetProductionTimetable" name="GetProductionTimetable" bindingOperationName="GetProductionTimetable" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://www.siri-service-location.com</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:new="http://new.webservice.namespace" xmlns:siri="http://www.siri.org.uk/">
   <soapenv:Header/>
   <soapenv:Body>
      <new:GetProductionTimetable>
         <ServiceRequestInfo>
            <!--Optional:-->
            <siri:ServiceRequestContext>
               <!--Optional:-->
               <siri:CheckStatusAddress>?</siri:CheckStatusAddress>
               <!--Optional:-->
               <siri:SubscribeAddress>?</siri:SubscribeAddress>
               <!--Optional:-->
               <siri:ManageSubscriptionAddress>?</siri:ManageSubscriptionAddress>
               <!--Optional:-->
               <siri:GetDataAddress>?</siri:GetDataAddress>
               <!--Optional:-->
               <siri:StatusResponseAddress>?</siri:StatusResponseAddress>
               <!--Optional:-->
               <siri:SubscriberAddress>?</siri:SubscriberAddress>
               <!--Optional:-->
               <siri:NotifyAddress>?</siri:NotifyAddress>
               <!--Optional:-->
               <siri:ConsumerAddress>?</siri:ConsumerAddress>
               <!--Optional:-->
               <siri:DataNameSpaces>
                  <!--Optional:-->
                  <siri:StopPointNameSpace>?</siri:StopPointNameSpace>
                  <!--Optional:-->
                  <siri:LineNameSpace>?</siri:LineNameSpace>
                  <!--Optional:-->
                  <siri:ProductCategoryNameSpace>?</siri:ProductCategoryNameSpace>
                  <!--Optional:-->
                  <siri:ServiceFeatureNameSpace>?</siri:ServiceFeatureNameSpace>
                  <!--Optional:-->
                  <siri:VehicleFeatureNameSpace>?</siri:VehicleFeatureNameSpace>
               </siri:DataNameSpaces>
               <!--Optional:-->
               <siri:Language>en</siri:Language>
               <!--You have a CHOICE of the next 2 items at this level-->
               <siri:WgsDecimalDegrees>?</siri:WgsDecimalDegrees>
               <siri:GmlCoordinateFormat>?</siri:GmlCoordinateFormat>
               <!--Optional:-->
               <siri:DataHorizon>?</siri:DataHorizon>
               <!--Optional:-->
               <siri:RequestTimeout>?</siri:RequestTimeout>
               <!--Optional:-->
               <siri:DeliveryMethod>direct</siri:DeliveryMethod>
               <!--Optional:-->
               <siri:MultipartDespatch>?</siri:MultipartDespatch>
               <!--Optional:-->
               <siri:ConfirmDelivery>false</siri:ConfirmDelivery>
               <!--Optional:-->
               <siri:MaximimumNumberOfSubscriptions>?</siri:MaximimumNumberOfSubscriptions>
               <!--Optional:-->
               <siri:AllowedPredictors>anyone</siri:AllowedPredictors>
               <!--Optional:-->
               <siri:PredictionFunction>?</siri:PredictionFunction>
            </siri:ServiceRequestContext>
            <siri:RequestTimestamp>?</siri:RequestTimestamp>
            <!--Optional:-->
            <siri:Address>?</siri:Address>
            <siri:RequestorRef>?</siri:RequestorRef>
            <!--Optional:-->
            <siri:MessageIdentifier>?</siri:MessageIdentifier>
         </ServiceRequestInfo>
         <Request version="1.0">
            <siri:RequestTimestamp>?</siri:RequestTimestamp>
            <!--Optional:-->
            <siri:MessageIdentifier>?</siri:MessageIdentifier>
            <!--Optional:-->
            <siri:ValidityPeriod>
               <siri:StartTime>?</siri:StartTime>
               <siri:EndTime>?</siri:EndTime>
            </siri:ValidityPeriod>
            <!--Optional:-->
            <siri:TimetableVersionRef>?</siri:TimetableVersionRef>
            <!--Zero or more repetitions:-->
            <siri:OperatorRef>?</siri:OperatorRef>
            <siri:LineRef>?</siri:LineRef>
            <!--Optional:-->
            <siri:DirectionRef>?</siri:DirectionRef>
            <!--Optional:-->
            <siri:Language>en</siri:Language>
            <!--Optional:-->
            <siri:IncrementalUpdates>false</siri:IncrementalUpdates>
            <!--Optional:-->
            <siri:Extensions>
               <!--You may enter ANY elements at this point-->
            </siri:Extensions>
         </Request>
         <RequestExtension>
            <!--You may enter ANY elements at this point-->
         </RequestExtension>
      </new:GetProductionTimetable>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetProductionTimetable"/></con:call></con:operation><con:operation isOneWay="false" action="GetStopMonitoring" name="GetStopMonitoring" bindingOperationName="GetStopMonitoring" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call name="Request_TEST-270"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.222.36.237:8080/emission/SiriRelais/SOAPPort</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:new="http://wsdl.siri.org.uk" xmlns:siri="http://www.siri.org.uk/">
   <soapenv:Header/>
   <soapenv:Body>
      <new:GetStopMonitoring>
        <ServiceRequestInfo>
            <siri:RequestTimestamp>${=javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())}</siri:RequestTimestamp>
            <siri:RequestorRef>100WSIVSIRI</siri:RequestorRef>
            <siri:MessageIdentifier>100WSIVSIRI:Message::1:LOC</siri:MessageIdentifier>
         </ServiceRequestInfo>
         <Request version="2.0[FR-IDF-2.2]">
            <siri:RequestTimestamp>${=javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())}</siri:RequestTimestamp>
            <siri:MessageIdentifier>100WSIVSIRI:Message::1:LOC</siri:MessageIdentifier>
            <siri:MonitoringRef>STIF:StopPoint:Q:108940:</siri:MonitoringRef>
         </Request>
         <RequestExtension>
            <!--You may enter ANY elements at this point-->
         </RequestExtension>
      </new:GetStopMonitoring>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetStopMonitoring"/><con:wsrmConfig version="1.2"/></con:call></con:operation><con:operation isOneWay="false" action="" name="GetStopTimetable" bindingOperationName="GetStopTimetable" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call name="Request_TEST-271"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.222.37.16:9101/emission/SiriRelais/SOAPPort</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:new="http://wsdl.siri.org.uk" xmlns:siri="http://www.siri.org.uk/">
   <soapenv:Header/>
   <soapenv:Body>
      <new:GetStopMonitoring>
         <ServiceRequestInfo>
            <!--Optional:-->
            <siri:RequestTimestamp>${=javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())}</siri:RequestTimestamp>
            <siri:RequestorRef>SNCF-ACCES</siri:RequestorRef>
            <!--Optional:-->
            <siri:MessageIdentifier>SNCF-ACCES:Message::1:LOC</siri:MessageIdentifier>
         </ServiceRequestInfo>
         <Request version="2.0[FR-IDF-2.2]">
            <siri:RequestTimestamp>${=javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())}</siri:RequestTimestamp>
            <!--Optional:-->
            <siri:MessageIdentifier>SNCF-ACCES:Message::1:LOC</siri:MessageIdentifier>
            <siri:MonitoringRef>STIF:StopPoint:Q:108940:</siri:MonitoringRef>
         </Request>
         <RequestExtension>
         </RequestExtension>
      </new:GetStopMonitoring>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://new.webservice.namespace/SOAP-Port/GetStopTimetableRequest"/><con:wsrmConfig version="1.2"/></con:call></con:operation><con:operation isOneWay="false" action="GetVehicleMonitoring" name="GetVehicleMonitoring" bindingOperationName="GetVehicleMonitoring" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://www.siri-service-location.com</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:new="http://new.webservice.namespace" xmlns:siri="http://www.siri.org.uk/">
   <soapenv:Header/>
   <soapenv:Body>
      <new:GetVehicleMonitoring>
         <ServiceRequestInfo>
            <!--Optional:-->
            <siri:ServiceRequestContext>
               <!--Optional:-->
               <siri:CheckStatusAddress>?</siri:CheckStatusAddress>
               <!--Optional:-->
               <siri:SubscribeAddress>?</siri:SubscribeAddress>
               <!--Optional:-->
               <siri:ManageSubscriptionAddress>?</siri:ManageSubscriptionAddress>
               <!--Optional:-->
               <siri:GetDataAddress>?</siri:GetDataAddress>
               <!--Optional:-->
               <siri:StatusResponseAddress>?</siri:StatusResponseAddress>
               <!--Optional:-->
               <siri:SubscriberAddress>?</siri:SubscriberAddress>
               <!--Optional:-->
               <siri:NotifyAddress>?</siri:NotifyAddress>
               <!--Optional:-->
               <siri:ConsumerAddress>?</siri:ConsumerAddress>
               <!--Optional:-->
               <siri:DataNameSpaces>
                  <!--Optional:-->
                  <siri:StopPointNameSpace>?</siri:StopPointNameSpace>
                  <!--Optional:-->
                  <siri:LineNameSpace>?</siri:LineNameSpace>
                  <!--Optional:-->
                  <siri:ProductCategoryNameSpace>?</siri:ProductCategoryNameSpace>
                  <!--Optional:-->
                  <siri:ServiceFeatureNameSpace>?</siri:ServiceFeatureNameSpace>
                  <!--Optional:-->
                  <siri:VehicleFeatureNameSpace>?</siri:VehicleFeatureNameSpace>
               </siri:DataNameSpaces>
               <!--Optional:-->
               <siri:Language>en</siri:Language>
               <!--You have a CHOICE of the next 2 items at this level-->
               <siri:WgsDecimalDegrees>?</siri:WgsDecimalDegrees>
               <siri:GmlCoordinateFormat>?</siri:GmlCoordinateFormat>
               <!--Optional:-->
               <siri:DataHorizon>?</siri:DataHorizon>
               <!--Optional:-->
               <siri:RequestTimeout>?</siri:RequestTimeout>
               <!--Optional:-->
               <siri:DeliveryMethod>direct</siri:DeliveryMethod>
               <!--Optional:-->
               <siri:MultipartDespatch>?</siri:MultipartDespatch>
               <!--Optional:-->
               <siri:ConfirmDelivery>false</siri:ConfirmDelivery>
               <!--Optional:-->
               <siri:MaximimumNumberOfSubscriptions>?</siri:MaximimumNumberOfSubscriptions>
               <!--Optional:-->
               <siri:AllowedPredictors>anyone</siri:AllowedPredictors>
               <!--Optional:-->
               <siri:PredictionFunction>?</siri:PredictionFunction>
            </siri:ServiceRequestContext>
            <siri:RequestTimestamp>?</siri:RequestTimestamp>
            <!--Optional:-->
            <siri:Address>?</siri:Address>
            <siri:RequestorRef>?</siri:RequestorRef>
            <!--Optional:-->
            <siri:MessageIdentifier>?</siri:MessageIdentifier>
         </ServiceRequestInfo>
         <Request version="1.0">
            <siri:RequestTimestamp>?</siri:RequestTimestamp>
            <!--Optional:-->
            <siri:MessageIdentifier>?</siri:MessageIdentifier>
            <!--Optional:-->
            <siri:VehicleMonitoringRef>?</siri:VehicleMonitoringRef>
            <!--You have a CHOICE of the next 2 items at this level-->
            <siri:VehicleRef>?</siri:VehicleRef>
            <siri:LineRef>?</siri:LineRef>
            <!--Optional:-->
            <siri:DirectionRef>?</siri:DirectionRef>
            <!--Optional:-->
            <siri:Language>en</siri:Language>
            <!--Optional:-->
            <siri:MaximumVehicles>?</siri:MaximumVehicles>
            <!--Optional:-->
            <siri:VehicleMonitoringDetailLevel>?</siri:VehicleMonitoringDetailLevel>
            <!--Optional:-->
            <siri:Extensions>
               <!--You may enter ANY elements at this point-->
            </siri:Extensions>
         </Request>
         <RequestExtension>
            <!--You may enter ANY elements at this point-->
         </RequestExtension>
      </new:GetVehicleMonitoring>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetVehicleMonitoring"/></con:call></con:operation><con:operation isOneWay="false" action="urn:#Subscribe" name="Subscribe" bindingOperationName="Subscribe" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://www.siri-service-location.com</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:new="http://new.webservice.namespace" xmlns:siri="http://www.siri.org.uk/">
   <soapenv:Header/>
   <soapenv:Body>
      <new:Subscribe>
         <SubscriptionRequestInfo>
            <siri:RequestTimestamp>?</siri:RequestTimestamp>
            <!--Optional:-->
            <siri:Address>?</siri:Address>
            <siri:RequestorRef>?</siri:RequestorRef>
            <!--Optional:-->
            <siri:MessageIdentifier>?</siri:MessageIdentifier>
            <!--Optional:-->
            <siri:ConsumerAddress>?</siri:ConsumerAddress>
            <!--Optional:-->
            <siri:SubscriptionFilterIdentifier>?</siri:SubscriptionFilterIdentifier>
            <!--Optional:-->
            <siri:SubscriptionContext>
               <!--Optional:-->
               <siri:HeartbeatInterval>?</siri:HeartbeatInterval>
            </siri:SubscriptionContext>
         </SubscriptionRequestInfo>
         <Request>
            <!--You have a CHOICE of the next 9 items at this level-->
            <!--1 or more repetitions:-->
            <siri:ProductionTimetableSubscriptionRequest>
               <!--Optional:-->
               <siri:SubscriberRef>?</siri:SubscriberRef>
               <siri:SubscriptionIdentifier>?</siri:SubscriptionIdentifier>
               <siri:InitialTerminationTime>?</siri:InitialTerminationTime>
               <siri:ProductionTimetableRequest version="1.0">
                  <siri:RequestTimestamp>?</siri:RequestTimestamp>
                  <!--Optional:-->
                  <siri:MessageIdentifier>?</siri:MessageIdentifier>
                  <!--Optional:-->
                  <siri:ValidityPeriod>
                     <siri:StartTime>?</siri:StartTime>
                     <siri:EndTime>?</siri:EndTime>
                  </siri:ValidityPeriod>
                  <!--Optional:-->
                  <siri:TimetableVersionRef>?</siri:TimetableVersionRef>
                  <!--Zero or more repetitions:-->
                  <siri:OperatorRef>?</siri:OperatorRef>
                  <siri:LineRef>?</siri:LineRef>
                  <!--Optional:-->
                  <siri:DirectionRef>?</siri:DirectionRef>
                  <!--Optional:-->
                  <siri:Language>en</siri:Language>
                  <!--Optional:-->
                  <siri:IncrementalUpdates>false</siri:IncrementalUpdates>
                  <!--Optional:-->
                  <siri:Extensions>
                     <!--You may enter ANY elements at this point-->
                  </siri:Extensions>
               </siri:ProductionTimetableRequest>
            </siri:ProductionTimetableSubscriptionRequest>
            <!--1 or more repetitions:-->
            <siri:EstimatedTimetableSubscriptionRequest>
               <!--Optional:-->
               <siri:SubscriberRef>?</siri:SubscriberRef>
               <siri:SubscriptionIdentifier>?</siri:SubscriptionIdentifier>
               <siri:InitialTerminationTime>?</siri:InitialTerminationTime>
               <siri:EstimatedTimetableRequest version="1.0">
                  <siri:RequestTimestamp>?</siri:RequestTimestamp>
                  <!--Optional:-->
                  <siri:MessageIdentifier>?</siri:MessageIdentifier>
                  <!--Optional:-->
                  <siri:PreviewInterval>?</siri:PreviewInterval>
                  <!--Optional:-->
                  <siri:TimetableVersionRef>?</siri:TimetableVersionRef>
                  <!--Zero or more repetitions:-->
                  <siri:OperatorRef>?</siri:OperatorRef>
                  <siri:LineRef>?</siri:LineRef>
                  <!--Optional:-->
                  <siri:DirectionRef>?</siri:DirectionRef>
                  <!--Optional:-->
                  <siri:Language>en</siri:Language>
                  <!--Optional:-->
                  <siri:Extensions>
                     <!--You may enter ANY elements at this point-->
                  </siri:Extensions>
               </siri:EstimatedTimetableRequest>
               <!--Optional:-->
               <siri:IncrementalUpdates>true</siri:IncrementalUpdates>
               <siri:ChangeBeforeUpdates>?</siri:ChangeBeforeUpdates>
            </siri:EstimatedTimetableSubscriptionRequest>
            <siri:StopTimetableSubscriptionRequest>
               <!--Optional:-->
               <siri:SubscriberRef>?</siri:SubscriberRef>
               <siri:SubscriptionIdentifier>?</siri:SubscriptionIdentifier>
               <siri:InitialTerminationTime>?</siri:InitialTerminationTime>
               <siri:StopTimetableRequest version="1.0">
                  <siri:RequestTimestamp>?</siri:RequestTimestamp>
                  <!--Optional:-->
                  <siri:MessageIdentifier>?</siri:MessageIdentifier>
                  <!--Optional:-->
                  <siri:DepartureWindow>
                     <siri:StartTime>?</siri:StartTime>
                     <siri:EndTime>?</siri:EndTime>
                  </siri:DepartureWindow>
                  <siri:MonitoringRef>?</siri:MonitoringRef>
                  <!--Optional:-->
                  <siri:LineRef>?</siri:LineRef>
                  <!--Optional:-->
                  <siri:DirectionRef>?</siri:DirectionRef>
                  <!--Optional:-->
                  <siri:Language>en</siri:Language>
                  <!--Optional:-->
                  <siri:Extensions>
                     <!--You may enter ANY elements at this point-->
                  </siri:Extensions>
               </siri:StopTimetableRequest>
               <!--You may enter ANY elements at this point-->
            </siri:StopTimetableSubscriptionRequest>
            <!--1 or more repetitions:-->
            <siri:StopMonitoringSubscriptionRequest>
               <!--Optional:-->
               <siri:SubscriberRef>?</siri:SubscriberRef>
               <siri:SubscriptionIdentifier>?</siri:SubscriptionIdentifier>
               <siri:InitialTerminationTime>?</siri:InitialTerminationTime>
               <siri:StopMonitoringRequest version="1.0">
                  <siri:RequestTimestamp>?</siri:RequestTimestamp>
                  <!--Optional:-->
                  <siri:MessageIdentifier>?</siri:MessageIdentifier>
                  <!--Optional:-->
                  <siri:PreviewInterval>?</siri:PreviewInterval>
                  <!--Optional:-->
                  <siri:StartTime>?</siri:StartTime>
                  <siri:MonitoringRef>?</siri:MonitoringRef>
                  <!--Optional:-->
                  <siri:OperatorRef>?</siri:OperatorRef>
                  <!--Optional:-->
                  <siri:LineRef>?</siri:LineRef>
                  <!--Optional:-->
                  <siri:DirectionRef>?</siri:DirectionRef>
                  <!--Optional:-->
                  <siri:DestinationRef>?</siri:DestinationRef>
                  <!--Optional:-->
                  <siri:StopVisitTypes>all</siri:StopVisitTypes>
                  <!--Optional:-->
                  <siri:Language>en</siri:Language>
                  <!--Optional:-->
                  <siri:MaximumStopVisits>?</siri:MaximumStopVisits>
                  <!--Optional:-->
                  <siri:MinimumStopVisitsPerLine>?</siri:MinimumStopVisitsPerLine>
                  <!--Optional:-->
                  <siri:MaximumTextLength>30</siri:MaximumTextLength>
                  <!--Optional:-->
                  <siri:StopMonitoringDetailLevel>normal</siri:StopMonitoringDetailLevel>
                  <!--Optional:-->
                  <siri:MaximumNumberOfCalls>
                     <!--Optional:-->
                     <siri:Previous>?</siri:Previous>
                     <!--Optional:-->
                     <siri:Onwards>?</siri:Onwards>
                  </siri:MaximumNumberOfCalls>
                  <!--Optional:-->
                  <siri:Extensions>
                     <!--You may enter ANY elements at this point-->
                  </siri:Extensions>
               </siri:StopMonitoringRequest>
               <!--Optional:-->
               <siri:IncrementalUpdates>false</siri:IncrementalUpdates>
               <!--Optional:-->
               <siri:ChangeBeforeUpdates>?</siri:ChangeBeforeUpdates>
               <!--Optional:-->
               <siri:Extensions>
                  <!--You may enter ANY elements at this point-->
               </siri:Extensions>
            </siri:StopMonitoringSubscriptionRequest>
            <!--1 or more repetitions:-->
            <siri:VehicleMonitoringSubscriptionRequest>
               <!--Optional:-->
               <siri:SubscriberRef>?</siri:SubscriberRef>
               <siri:SubscriptionIdentifier>?</siri:SubscriptionIdentifier>
               <siri:InitialTerminationTime>?</siri:InitialTerminationTime>
               <siri:VehicleMonitoringRequest version="1.0">
                  <siri:RequestTimestamp>?</siri:RequestTimestamp>
                  <!--Optional:-->
                  <siri:MessageIdentifier>?</siri:MessageIdentifier>
                  <!--Optional:-->
                  <siri:VehicleMonitoringRef>?</siri:VehicleMonitoringRef>
                  <!--You have a CHOICE of the next 2 items at this level-->
                  <siri:VehicleRef>?</siri:VehicleRef>
                  <siri:LineRef>?</siri:LineRef>
                  <!--Optional:-->
                  <siri:DirectionRef>?</siri:DirectionRef>
                  <!--Optional:-->
                  <siri:Language>en</siri:Language>
                  <!--Optional:-->
                  <siri:MaximumVehicles>?</siri:MaximumVehicles>
                  <!--Optional:-->
                  <siri:VehicleMonitoringDetailLevel>?</siri:VehicleMonitoringDetailLevel>
                  <!--Optional:-->
                  <siri:Extensions>
                     <!--You may enter ANY elements at this point-->
                  </siri:Extensions>
               </siri:VehicleMonitoringRequest>
               <!--Optional:-->
               <siri:IncrementalUpdates>false</siri:IncrementalUpdates>
               <!--You have a CHOICE of the next 2 items at this level-->
               <!--Optional:-->
               <siri:ChangeBeforeUpdates>?</siri:ChangeBeforeUpdates>
               <!--Optional:-->
               <siri:UpdateInterval>?</siri:UpdateInterval>
            </siri:VehicleMonitoringSubscriptionRequest>
            <siri:ConnectionTimetableSubscriptionRequest>
               <!--Optional:-->
               <siri:SubscriberRef>?</siri:SubscriberRef>
               <siri:SubscriptionIdentifier>?</siri:SubscriptionIdentifier>
               <siri:InitialTerminationTime>?</siri:InitialTerminationTime>
               <siri:ConnectionTimetableRequest version="1.0">
                  <siri:RequestTimestamp>?</siri:RequestTimestamp>
                  <!--Optional:-->
                  <siri:MessageIdentifier>?</siri:MessageIdentifier>
                  <!--Optional:-->
                  <siri:ArrivalWindow>
                     <siri:StartTime>?</siri:StartTime>
                     <siri:EndTime>?</siri:EndTime>
                  </siri:ArrivalWindow>
                  <siri:ConnectionLinkRef>?</siri:ConnectionLinkRef>
                  <!--Optional:-->
                  <siri:LineRef>?</siri:LineRef>
                  <!--Optional:-->
                  <siri:DirectionRef>?</siri:DirectionRef>
                  <!--Optional:-->
                  <siri:Language>en</siri:Language>
               </siri:ConnectionTimetableRequest>
            </siri:ConnectionTimetableSubscriptionRequest>
            <!--1 or more repetitions:-->
            <siri:ConnectionMonitoringSubscriptionRequest>
               <!--Optional:-->
               <siri:SubscriberRef>?</siri:SubscriberRef>
               <siri:SubscriptionIdentifier>?</siri:SubscriptionIdentifier>
               <siri:InitialTerminationTime>?</siri:InitialTerminationTime>
               <siri:ConnectionMonitoringRequest version="1.0">
                  <siri:RequestTimestamp>?</siri:RequestTimestamp>
                  <!--Optional:-->
                  <siri:MessageIdentifier>?</siri:MessageIdentifier>
                  <!--Optional:-->
                  <siri:PreviewInterval>?</siri:PreviewInterval>
                  <siri:ConnectionLinkRef>?</siri:ConnectionLinkRef>
                  <!--You have a CHOICE of the next 2 items at this level-->
                  <siri:ConnectingTimeFilter>
                     <siri:LineRef>?</siri:LineRef>
                     <siri:DirectionRef>?</siri:DirectionRef>
                     <!--Optional:-->
                     <siri:EarliestArrivalTime>?</siri:EarliestArrivalTime>
                     <!--Optional:-->
                     <siri:LatestArrivalTime>?</siri:LatestArrivalTime>
                  </siri:ConnectingTimeFilter>
                  <!--1 or more repetitions:-->
                  <siri:ConnectingJourneyFilter>
                     <siri:DatedVehicleJourneyRef>?</siri:DatedVehicleJourneyRef>
                     <!--Optional:-->
                     <siri:VisitNumber>?</siri:VisitNumber>
                     <siri:TimetabledArrivalTime>?</siri:TimetabledArrivalTime>
                  </siri:ConnectingJourneyFilter>
                  <!--Optional:-->
                  <siri:Language>en</siri:Language>
                  <!--Optional:-->
                  <siri:Extensions>
                     <!--You may enter ANY elements at this point-->
                  </siri:Extensions>
               </siri:ConnectionMonitoringRequest>
               <!--Optional:-->
               <siri:ChangeBeforeUpdates>?</siri:ChangeBeforeUpdates>
            </siri:ConnectionMonitoringSubscriptionRequest>
            <!--1 or more repetitions:-->
            <siri:GeneralMessageSubscriptionRequest>
               <!--Optional:-->
               <siri:SubscriberRef>?</siri:SubscriberRef>
               <siri:SubscriptionIdentifier>?</siri:SubscriptionIdentifier>
               <siri:InitialTerminationTime>?</siri:InitialTerminationTime>
               <siri:GeneralMessageRequest version="1.0">
                  <siri:RequestTimestamp>?</siri:RequestTimestamp>
                  <!--Optional:-->
                  <siri:MessageIdentifier>?</siri:MessageIdentifier>
                  <!--Zero or more repetitions:-->
                  <siri:InfoChannelRef>?</siri:InfoChannelRef>
                  <!--Optional:-->
                  <siri:Language>en</siri:Language>
                  <!--Optional:-->
                  <siri:Extensions>
                     <!--You may enter ANY elements at this point-->
                  </siri:Extensions>
               </siri:GeneralMessageRequest>
            </siri:GeneralMessageSubscriptionRequest>
            <siri:FacilityMonitoringSubscriptionRequest>
               <!--Optional:-->
               <siri:SubscriberRef>?</siri:SubscriberRef>
               <siri:SubscriptionIdentifier>?</siri:SubscriptionIdentifier>
               <siri:InitialTerminationTime>?</siri:InitialTerminationTime>
               <siri:FacilityMonitoringRequest version="1.0">
                  <siri:RequestTimestamp>?</siri:RequestTimestamp>
                  <!--Optional:-->
                  <siri:MessageIdentifier>?</siri:MessageIdentifier>
                  <!--Optional:-->
                  <siri:StartTime>?</siri:StartTime>
                  <!--Zero or more repetitions:-->
                  <siri:FacilityRef>?</siri:FacilityRef>
                  <!--Optional:-->
                  <siri:StopPointRef>?</siri:StopPointRef>
                  <!--Optional:-->
                  <siri:LineRef>?</siri:LineRef>
                  <!--Optional:-->
                  <siri:ConnectionLinkRef>?</siri:ConnectionLinkRef>
                  <!--Optional:-->
                  <siri:VehicleRef>?</siri:VehicleRef>
                  <!--Zero or more repetitions:-->
                  <siri:SpecificlNeedFilter>?</siri:SpecificlNeedFilter>
                  <!--Optional:-->
                  <siri:Language>en</siri:Language>
                  <!--Optional:-->
                  <siri:MaximumNumberOfFacilityCondition>?</siri:MaximumNumberOfFacilityCondition>
                  <!--Optional:-->
                  <siri:Extensions>
                     <!--You may enter ANY elements at this point-->
                  </siri:Extensions>
               </siri:FacilityMonitoringRequest>
               <!--Optional:-->
               <siri:IncrementalUpdates>false</siri:IncrementalUpdates>
            </siri:FacilityMonitoringSubscriptionRequest>
         </Request>
         <RequestExtension>
            <!--You may enter ANY elements at this point-->
         </RequestExtension>
      </new:Subscribe>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:#Subscribe"/></con:call></con:operation></con:interface><con:testSuite name="TestSuite 1"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase 1" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Groovy Script"><con:settings/><con:config><script/></con:config></con:testStep><con:properties/></con:testCase><con:properties/></con:testSuite><con:mockService port="8080" path="/test1Producer" host="localhost" name="test1Producer" bindToHostOnly="false" docroot=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.mock.WsdlMockService@require-soap-action">false</con:setting></con:settings><con:mockOperation name="GetStopMonitoring" interface="SiriProducerRpcBinding" operation="GetStopMonitoring"><con:settings/><con:dispatchStyle>SCRIPT</con:dispatchStyle><con:defaultResponse>Response 1</con:defaultResponse><con:response name="Response 1" encoding="UTF-8"><con:settings/><con:script>// create XmlHolder for request content
def holder = new com.eviware.soapui.support.XmlHolder( mockRequest.requestContent )
def fournisseur = "SNCF-ACCES"
// define namespace
holder.namespaces["siri"] = "http://www.siri.org.uk/siri"
// récupération de l'id message de la request
requestContext.idMessage = holder["//siri:MessageIdentifier"][0]
requestContext.monitoringRef = holder["//siri:MonitoringRef"]
requestContext.version = holder["//Request/@version"].toString()

// identifiant utilisé (en coherence avec le dataset redis)
requestContext.producerRef="SNCF-ACCES"
requestContext.recordedAtTime = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())
// Passage 1 / course 1
requestContext.itemIdenfier=fournisseur+":Item::1:LOC"
requestContext.lineRef="STIF:Line::C00040:"
requestContext.dataFrameRef="any"
requestContext.datedVehicleJourneyRef=fournisseur+":VehicleJourney::1:LOC"
requestContext.journeyPatternRef=fournisseur+":JourneyPattern::1:LOC"
requestContext.journeyPatternName="mission1"
requestContext.publishedLineName="N"
requestContext.routeRef1=fournisseur+":Route::1:LOC"
requestContext.directionName="Rambouillet"
requestContext.operatorRef1=fournisseur+":Operator::SNCF:"
requestContext.originRef1="STIF:StopPoint:Q:108935:"
requestContext.originName1="Arrêt 1"
requestContext.placeRef1="STIF:StopPoint:Q:108943:"
requestContext.placeName1="Arrêt 5"
requestContext.destinationRef1="STIF:StopPoint:Q:108949:"
requestContext.destinationName1="Arrêt 10"
requestContext.vehicleJourneyName1="Course 1"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse = getHeureSuivante(1)
requestContext.originAimedDepartureTime1=heureDepartCourse.toXMLFormat();
requestContext.destinationAimedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,20,0)
//MonitoredCall
requestContext.stopPointRef1=requestContext.monitoringRef
requestContext.stopPointName1="Arrêt 2"
requestContext.aimedArrivalTime1= getAvecMinuteSeconde(heureDepartCourse,2,0).toXMLFormat()
//requestContext.aimedArrivalTime1="2014-04-29T13:00:00.000Z"
requestContext.actualArrivalTime1= getAvecMinuteSeconde(heureDepartCourse,2,1).toXMLFormat()
//requestContext.actualArrivalTime1 = "2014-04-29T13:00:00.000+02:00"
//requestContext.expectedArrivalTime1="2014-04-29T13:00:00.000+02:00"
requestContext.expectedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,2,2).toXMLFormat()

requestContext.aimedDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,41).toXMLFormat()
//requestContext.aimedDepartureTime1="2014-04-29T13:00:00.000+02:00"

requestContext.actualDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,42).toXMLFormat()
//requestContext.actualDepartureTime1="2014-04-29T13:00:00.000+02:00"

requestContext.expectedDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,43).toXMLFormat()
//requestContext.expectedDepartureTime1="2014-04-29T13:00:00.000+02:00"

// passage 2 / course 2
requestContext.monitoringRef2 = holder["//siri:MonitoringRef"]
requestContext.itemIdenfier2=fournisseur+":Item::2:LOC"
requestContext.lineRef2="STIF:Line::C00040:"
requestContext.dataFrameRef2="any"
requestContext.datedVehicleJourneyRef2=fournisseur+":VehicleJourney::2:LOC"
requestContext.journeyPatternRef2=fournisseur+":JourneyPattern::2:LOC"
requestContext.routeRef2=fournisseur+":Route::1:LOC"
requestContext.operatorRef2=fournisseur+":Operator::SNCF:"
requestContext.originRef2="STIF:StopPoint:Q:108935:"
requestContext.originName2="Arrêt 1"
requestContext.placeRef2="STIF:StopPoint:Q:108943:"
requestContext.placeName2="Arrêt 5"
requestContext.destinationRef2="STIF:StopPoint:Q:108949:"
requestContext.destinationName2="Arrêt 10"
requestContext.vehicleJourneyName2="Course 2"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse2 = getHeureSuivante(2)
requestContext.originAimedDepartureTime2=heureDepartCourse2.toXMLFormat();
requestContext.destinationAimedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,20,0)
//MonitoredCall
requestContext.stopPointRef2=requestContext.monitoringRef
requestContext.stopPointName2="Arrêt 2"
requestContext.aimedArrivalTime2= getAvecMinuteSeconde(heureDepartCourse2,2,0).toXMLFormat()
requestContext.actualArrivalTime2= getAvecMinuteSeconde(heureDepartCourse2,2,1).toXMLFormat()
requestContext.expectedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,2,2).toXMLFormat()

requestContext.aimedDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,41).toXMLFormat()
requestContext.actualDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,42).toXMLFormat()
requestContext.expectedDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,43).toXMLFormat()



// Methodes utilitaires DATE
// Methode Date permettant d'avoir l'heure courante + heure
def getHeureSuivante(int heure){
	def calendar = Calendar.getInstance();
	calendar.add(Calendar.HOUR,heure);
	calendar.set(Calendar.MINUTE, 0);
	calendar.set(Calendar.SECOND, 0);
	calendar.set(Calendar.MILLISECOND, 0);
	def heureSuivante = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return heureSuivante;
}

// Methode permettant de setter les minites et secondes sur l'heure passée
def getAvecMinuteSeconde(javax.xml.datatype.XMLGregorianCalendar xmlCalendar, int minute, int seconde){ 
	Calendar calendar = xmlCalendar.toGregorianCalendar();	
	calendar.set(Calendar.MINUTE, minute);
	calendar.set(Calendar.SECOND, seconde);
	def date = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return date;
      
}
</con:script><con:responseContent><![CDATA[<!--
Cette réponse renvoie les 2 prochains passages de la ZDE STIF:StopPoint:Q:2
Passage 1 : heure courante + 1
Passage 2 : heure courante + 2
-->
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsdl="http://wsdl.siri.org.uk" xmlns:siri="http://www.siri.org.uk/siri" xmlns:acsb="http://www.ifopt.org.uk/acsb" xmlns:ifop="http://www.ifopt.org.uk/ifopt">
   <soapenv:Header/>
   <soapenv:Body>
      <wsdl:GetStopMonitoringResponse>
         <ServiceDeliveryInfo>
            <siri:ResponseTimestamp>${=javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())}</siri:ResponseTimestamp>
            <siri:ProducerRef>${producerRef}</siri:ProducerRef>
            <siri:ResponseMessageIdentifier>SNCF-ACCES:ResponseMessage::1:LOC</siri:ResponseMessageIdentifier>
		  <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
         </ServiceDeliveryInfo>
         <Answer>
            <siri:StopMonitoringDelivery version="${version}">
            	<siri:SubscriptionFilterRef>?</siri:SubscriptionFilterRef>
               <siri:ResponseTimestamp>${recordedAtTime}</siri:ResponseTimestamp>
               <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
               <siri:Status>true</siri:Status>
               <siri:MonitoringRef>${monitoringRef}</siri:MonitoringRef>
               <!-- 1 er passage-->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef}</siri:JourneyPatternRef>
                     <siri:JourneyPatternName>${journeyPatternName}</siri:JourneyPatternName>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef1}</siri:RouteRef>
                     <siri:PublishedLineName>${publishedLineName}</siri:PublishedLineName>
                     <siri:DirectionName>${directionName}</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                     <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef1}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie1</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef1}</siri:OriginRef>
                     <siri:OriginName>${originName1}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef1}</siri:PlaceRef>
                        <siri:PlaceName>${placeName1}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef1}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName1}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName1}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime1}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime1}</siri:DestinationAimedArrivalTime>
                     <siri:FirstOrLastJourney>unspecified</siri:FirstOrLastJourney>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <siri:TrainNumbers>
                        <siri:TrainNumberRef>5918</siri:TrainNumberRef>
                     </siri:TrainNumbers>
                     <!-- JourneyParts:-->
                     <siri:JourneyParts>
                        <siri:JourneyPartInfo>
                           <siri:JourneyPartRef>5409</siri:JourneyPartRef>
                           <siri:TrainNumberRef>5928:1</siri:TrainNumberRef>
                           <siri:OperatorRef>${operatorRef1}</siri:OperatorRef>
                        </siri:JourneyPartInfo>
                     </siri:JourneyParts>
                     <!-- MonitoredCall 1er passage-->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef1}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName1}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName1}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime1}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime1}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime1}</siri:ExpectedArrivalTime>
                        
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalProximityText>à l'approche</siri:ArrivalProximityText>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:ArrivalStopAssignment>
                           <siri:AimedQuayName>voie 2</siri:AimedQuayName>
                        </siri:ArrivalStopAssignment>
                        <siri:AimedDepartureTime>${aimedDepartureTime1}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime1}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime1}</siri:ExpectedDepartureTime>
                        <siri:AimedDepartureTime>2013-09-23T17:02:00.000+02:00</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>2013-09-23T17:02:00.000+02:00</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>2013-09-23T17:02:00.000+02:00</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                        <siri:DistanceFromStop>2300</siri:DistanceFromStop>
                        <siri:NumberOfStopsAway>3</siri:NumberOfStopsAway>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
                <!-- 2ème passage -->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier2}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef2}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef2}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef2}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef2}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef2}</siri:JourneyPatternRef>
                     <siri:JourneyPatternName>mission2</siri:JourneyPatternName>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef2}</siri:RouteRef>
                     <siri:PublishedLineName>N</siri:PublishedLineName>
                     <siri:DirectionName>Rambouillet</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                      <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef2}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie2</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef2}</siri:OriginRef>
                     <siri:OriginName>${originName2}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef2}</siri:PlaceRef>
                        <siri:PlaceName>${placeName2}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef2}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName2}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName2}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course 2</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime2}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime2}</siri:DestinationAimedArrivalTime>
                     <siri:FirstOrLastJourney>unspecified</siri:FirstOrLastJourney>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <siri:TrainNumbers>
                        <siri:TrainNumberRef>5918</siri:TrainNumberRef>
                     </siri:TrainNumbers>
                     <!-- JourneyParts:-->
                     <siri:JourneyParts>
                        <siri:JourneyPartInfo>
                           <siri:JourneyPartRef>5409</siri:JourneyPartRef>
                           <siri:TrainNumberRef>5928:1</siri:TrainNumberRef>
                           <siri:OperatorRef>${operatorRef2}</siri:OperatorRef>
                        </siri:JourneyPartInfo>
                     </siri:JourneyParts>
                     <!--  MonitoredCall 2ème passage -->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef2}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName2}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName2}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime2}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime2}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime2}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalProximityText>à l'approche</siri:ArrivalProximityText>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:ArrivalStopAssignment>
                           <siri:AimedQuayName>voie 2</siri:AimedQuayName>
                        </siri:ArrivalStopAssignment>
                        <siri:AimedDepartureTime>${aimedDepartureTime2}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime2}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime2}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                        <siri:DistanceFromStop>2300</siri:DistanceFromStop>
                        <siri:NumberOfStopsAway>3</siri:NumberOfStopsAway>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
            </siri:StopMonitoringDelivery>
         </Answer>
         <AnswerExtension>
         </AnswerExtension>
      </wsdl:GetStopMonitoringResponse>
   </soapenv:Body>
</soapenv:Envelope>]]></con:responseContent><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetStopMonitoring"/></con:response><con:dispatchConfig/></con:mockOperation><con:properties/></con:mockService><con:mockService port="8080" path="/test7Producer" host="localhost" name="test7Producer" bindToHostOnly="false" docroot=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.mock.WsdlMockService@require-soap-action">false</con:setting></con:settings><con:mockOperation name="GetStopMonitoring" interface="SiriProducerRpcBinding" operation="GetStopMonitoring"><con:settings/><con:dispatchStyle>SEQUENCE</con:dispatchStyle><con:defaultResponse>Response 1</con:defaultResponse><con:response name="Response 1" encoding="UTF-8"><con:settings/><con:script>// create XmlHolder for request content
def holder = new com.eviware.soapui.support.XmlHolder( mockRequest.requestContent )
def fournisseur = "SNCF-ACCES"
// define namespace
holder.namespaces["siri"] = "http://www.siri.org.uk/siri"
// récupération de l'id message de la request
requestContext.idMessage = holder["//siri:MessageIdentifier"][0]
requestContext.monitoringRef = holder["//siri:MonitoringRef"]
requestContext.version = holder["//Request/@version"].toString()

// identifiant utilisé (en coherence avec le dataset redis)
requestContext.producerRef="SNCF-ACCES"
requestContext.responseMessageIdentifier="SNCF:Message::1:LOC"
requestContext.recordedAtTime = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())
// Passage 1 / course 1
requestContext.itemIdenfier=fournisseur+":Item::1:LOC"
requestContext.lineRef="STIF:Line::TEST7:"
requestContext.dataFrameRef="any"
requestContext.datedVehicleJourneyRef=fournisseur+":VehicleJourney::1:LOC"
requestContext.journeyPatternRef=fournisseur+":JourneyPattern::1:LOC"
requestContext.journeyPatternName="mission1"
requestContext.routeRef1=fournisseur+":Route::1:LOC"
requestContext.operatorRef1=fournisseur+":Operator::SNCF:"
requestContext.originRef1="STIF:StopPoint:Q:108935:"
requestContext.originName1="Arrêt 4"
requestContext.placeRef1="STIF:StopPoint:Q:108943:"
requestContext.placeName1="Arrêt 5"
requestContext.destinationRef1="STIF:StopPoint:Q:108949:"
requestContext.destinationName1="Arrêt 6"
requestContext.vehicleJourneyName1="Course 1"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse = getHeureSuivante(1)
requestContext.originAimedDepartureTime1=heureDepartCourse.toXMLFormat();
requestContext.destinationAimedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,20,0)
//MonitoredCall
requestContext.stopPointRef1=requestContext.monitoringRef
requestContext.stopPointName1="Arrêt 7"
requestContext.aimedArrivalTime1= getAvecMinuteSeconde(heureDepartCourse,2,0).toXMLFormat()
requestContext.actualArrivalTime1= getAvecMinuteSeconde(heureDepartCourse,2,1).toXMLFormat()
requestContext.expectedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,2,2).toXMLFormat()

requestContext.aimedDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,41).toXMLFormat()
requestContext.actualDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,42).toXMLFormat()
requestContext.expectedDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,43).toXMLFormat()


// passage 2 / course 2
requestContext.itemIdenfier2=fournisseur+":Item::2:LOC"
requestContext.lineRef2="STIF:Line::004004009"
requestContext.dataFrameRef2="any"
requestContext.datedVehicleJourneyRef2=fournisseur+":VehicleJourney::2:LOC"
requestContext.journeyPatternRef2=fournisseur+":JourneyPattern::2:LOC"
requestContext.routeRef2=fournisseur+":Route::1:LOC"
requestContext.operatorRef2=fournisseur+":Operator::SNCF:"
requestContext.originRef2="STIF:StopPoint:Q:108935:"
requestContext.originName2="Arrêt 4"
requestContext.placeRef2="STIF:StopPoint:Q:108943:"
requestContext.placeName2="Arrêt 5"
requestContext.destinationRef2="STIF:StopPoint:Q:108949:"
requestContext.destinationName2="Arrêt 6"
requestContext.vehicleJourneyName2="Course 2"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse2 = getHeureSuivante(2)
requestContext.originAimedDepartureTime2=heureDepartCourse2.toXMLFormat();
requestContext.destinationAimedArrivalTime2="2014-09-15T13:44:41.513Z"
//MonitoredCall
requestContext.stopPointRef2=requestContext.monitoringRef
requestContext.stopPointName2="Arrêt 7"
requestContext.aimedArrivalTime2= "2014-09-15T13:44:41.513Z"
requestContext.actualArrivalTime2= "2014-09-15T13:44:41.513Z"
requestContext.expectedArrivalTime2="2014-09-15T13:44:41.513Z"

requestContext.aimedDepartureTime2="2014-09-15T13:44:41.513Z"
requestContext.actualDepartureTime2="2014-09-15T13:44:41.513Z"
requestContext.expectedDepartureTime2="2014-09-15T13:44:41.513Z"



// Methodes utilitaires DATE
// Methode Date permettant d'avoir l'heure courante + heure
def getHeureSuivante(int heure){
	def calendar = Calendar.getInstance();
	calendar.add(Calendar.HOUR,heure);
	calendar.set(Calendar.MINUTE, 0);
	calendar.set(Calendar.SECOND, 0);
	calendar.set(Calendar.MILLISECOND, 0);
	def heureSuivante = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return heureSuivante;
}

// Methode permettant de setter les minites et secondes sur l'heure passée
def getAvecMinuteSeconde(javax.xml.datatype.XMLGregorianCalendar xmlCalendar, int minute, int seconde){ 
	Calendar calendar = xmlCalendar.toGregorianCalendar();	
	calendar.set(Calendar.MINUTE, minute);
	calendar.set(Calendar.SECOND, seconde);
	def date = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return date;
      
}
</con:script><con:responseContent><![CDATA[<!--
Cette réponse renvoie les 2 prochains passages de la ZDE STIF:StopPoint:Q:4
Passage 1 : heure courante + 1 avec lineRef non CODIFLIGNE
Passage 2 : heure courante + 2 avec lineRef CODIFLIGNE
-->
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsdl="http://wsdl.siri.org.uk" xmlns:siri="http://www.siri.org.uk/siri" xmlns:acsb="http://www.ifopt.org.uk/acsb" xmlns:ifop="http://www.ifopt.org.uk/ifopt">
   <soapenv:Header/>
   <soapenv:Body>
      <wsdl:GetStopMonitoringResponse>
         <ServiceDeliveryInfo>
            <siri:ResponseTimestamp>${=javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())}</siri:ResponseTimestamp>
            <siri:ProducerRef>${producerRef}</siri:ProducerRef>
            <siri:ResponseMessageIdentifier>${responseMessageIdentifier}</siri:ResponseMessageIdentifier>
		  <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
         </ServiceDeliveryInfo>
         <Answer>
            <siri:StopMonitoringDelivery version="${version}">
               <siri:ResponseTimestamp>${recordedAtTime}</siri:ResponseTimestamp>
               <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
               <siri:Status>true</siri:Status>
               <siri:MonitoringRef>${monitoringRef}</siri:MonitoringRef>
               <!-- 1 er passage-->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef}</siri:JourneyPatternRef>
                     <siri:JourneyPatternName>${journeyPatternName}</siri:JourneyPatternName>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef1}</siri:RouteRef>
                     <siri:PublishedLineName>N</siri:PublishedLineName>
                     <siri:DirectionName>Rambouillet</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                     <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef1}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie1</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef1}</siri:OriginRef>
                     <siri:OriginName>${originName1}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef1}</siri:PlaceRef>
                        <siri:PlaceName>${placeName1}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef1}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName1}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName1}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime1}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime1}</siri:DestinationAimedArrivalTime>
                     <siri:FirstOrLastJourney>unspecified</siri:FirstOrLastJourney>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <siri:TrainNumbers>
                        <siri:TrainNumberRef>5918</siri:TrainNumberRef>
                     </siri:TrainNumbers>
                     <!-- JourneyParts:-->
                     <siri:JourneyParts>
                        <siri:JourneyPartInfo>
                           <siri:JourneyPartRef>5409</siri:JourneyPartRef>
                           <siri:TrainNumberRef>5928:1</siri:TrainNumberRef>
                           <siri:OperatorRef>${operatorRef1}</siri:OperatorRef>
                        </siri:JourneyPartInfo>
                     </siri:JourneyParts>
                     <!-- MonitoredCall 1er passage-->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef1}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName1}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName1}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime1}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime1}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime1}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalProximityText>à l'approche</siri:ArrivalProximityText>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:ArrivalStopAssignment>
                           <siri:AimedQuayName>voie 2</siri:AimedQuayName>
                        </siri:ArrivalStopAssignment>
                        <siri:AimedDepartureTime>${aimedDepartureTime1}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime1}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime1}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                        <siri:DistanceFromStop>2300</siri:DistanceFromStop>
                        <siri:NumberOfStopsAway>3</siri:NumberOfStopsAway>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
                <!-- 2ème passage -->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier2}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef2}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef2}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef2}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef2}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef2}</siri:JourneyPatternRef>
                     <siri:JourneyPatternName>mission2</siri:JourneyPatternName>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef2}</siri:RouteRef>
                     <siri:PublishedLineName>N</siri:PublishedLineName>
                     <siri:DirectionName>Rambouillet</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                      <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef2}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie2</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef2}</siri:OriginRef>
                     <siri:OriginName>${originName2}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef2}</siri:PlaceRef>
                        <siri:PlaceName>${placeName2}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef2}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName2}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName2}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course 2</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime2}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime2}</siri:DestinationAimedArrivalTime>
                     <siri:FirstOrLastJourney>unspecified</siri:FirstOrLastJourney>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <siri:TrainNumbers>
                        <siri:TrainNumberRef>5918</siri:TrainNumberRef>
                     </siri:TrainNumbers>
                     <!-- JourneyParts:-->
                     <siri:JourneyParts>
                        <siri:JourneyPartInfo>
                           <siri:JourneyPartRef>5409</siri:JourneyPartRef>
                           <siri:TrainNumberRef>5928:1</siri:TrainNumberRef>
                           <siri:OperatorRef>${operatorRef2}</siri:OperatorRef>
                        </siri:JourneyPartInfo>
                     </siri:JourneyParts>
                     <!--  MonitoredCall 2ème passage -->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef2}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName2}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName2}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime2}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime2}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime2}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalProximityText>à l'approche</siri:ArrivalProximityText>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:ArrivalStopAssignment>
                           <siri:AimedQuayName>voie 2</siri:AimedQuayName>
                        </siri:ArrivalStopAssignment>
                        <siri:AimedDepartureTime>${aimedDepartureTime2}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime2}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime2}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                        <siri:DistanceFromStop>2300</siri:DistanceFromStop>
                        <siri:NumberOfStopsAway>3</siri:NumberOfStopsAway>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
            </siri:StopMonitoringDelivery>
         </Answer>
         <AnswerExtension>
         </AnswerExtension>
      </wsdl:GetStopMonitoringResponse>
   </soapenv:Body>
</soapenv:Envelope>]]></con:responseContent><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetStopMonitoring"/></con:response><con:dispatchConfig/></con:mockOperation><con:properties/></con:mockService><con:mockService port="8080" path="/test8Producer" host="L276002" name="test8Producer" bindToHostOnly="false" docroot=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.mock.WsdlMockService@require-soap-action">false</con:setting></con:settings><con:mockOperation name="GetStopMonitoring" interface="SiriProducerRpcBinding" operation="GetStopMonitoring"><con:settings/><con:dispatchStyle>SEQUENCE</con:dispatchStyle><con:defaultResponse>Response 1</con:defaultResponse><con:response name="Response 1" encoding="UTF-8"><con:settings/><con:script>// create XmlHolder for request content
def holder = new com.eviware.soapui.support.XmlHolder( mockRequest.requestContent )
def fournisseur = "SNCF-ACCES"
// define namespace
holder.namespaces["siri"] = "http://www.siri.org.uk/siri"
// récupération de l'id message de la request
requestContext.idMessage = holder["//siri:MessageIdentifier"][0]
requestContext.monitoringRef = holder["//siri:MonitoringRef"]
requestContext.version = holder["//Request/@version"].toString()

// identifiant utilisé (en coherence avec le dataset redis)
requestContext.producerRef="SNCF-ACCES"
requestContext.responseMessageIdentifier="SNCF:Message::1:LOC"
requestContext.recordedAtTime = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())
// Passage 1 / course 1
requestContext.itemIdenfier=fournisseur+":Item::1:LOC"
requestContext.lineRef="STIF:Line::004004009"
requestContext.dataFrameRef="any"
requestContext.datedVehicleJourneyRef=fournisseur+":VehicleJourney::1:LOC"
requestContext.journeyPatternRef=fournisseur+":JourneyPattern::1:LOC"
requestContext.journeyPatternName="mission1"
requestContext.routeRef1=fournisseur+":Route::1:LOC"
requestContext.operatorRef1=fournisseur+":Operator::SNCF:"
requestContext.originRef1="STIF:StopPoint:Q:7"
requestContext.originName1="Arrêt 4"
requestContext.placeRef1="STIF:StopPoint:Q:108943:"
requestContext.placeName1="Arrêt 5"
requestContext.destinationRef1="STIF:StopPoint:Q:10"
requestContext.destinationName1="Arrêt 6"
requestContext.vehicleJourneyName1="Course 1"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse = getHeureSuivante(1)
requestContext.originAimedDepartureTime1=heureDepartCourse.toXMLFormat();
requestContext.destinationAimedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,20,0)
//MonitoredCall
requestContext.stopPointRef1=requestContext.monitoringRef
requestContext.stopPointName1="Arrêt 7"
requestContext.aimedArrivalTime1= getAvecMinuteSeconde(heureDepartCourse,2,0).toXMLFormat()
requestContext.actualArrivalTime1= getAvecMinuteSeconde(heureDepartCourse,2,1).toXMLFormat()
requestContext.expectedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,2,2).toXMLFormat()

requestContext.aimedDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,41).toXMLFormat()
requestContext.actualDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,42).toXMLFormat()
requestContext.expectedDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,43).toXMLFormat()


// passage 2 / course 2
requestContext.itemIdenfier2=fournisseur+":Item::2:LOC"
requestContext.lineRef2="STIF:Line::004004009"
requestContext.dataFrameRef2="any"
requestContext.datedVehicleJourneyRef2=fournisseur+":VehicleJourney::2:LOC"
requestContext.journeyPatternRef2=fournisseur+":JourneyPattern::2:LOC"
requestContext.routeRef2=fournisseur+":Route::1:LOC"
requestContext.operatorRef2=fournisseur+":Operator::SNCF:"
requestContext.originRef2="STIF:StopPoint:Q:108935:"
requestContext.originName2="Arrêt 4"
requestContext.placeRef2="STIF:StopPoint:Q:108943:"
requestContext.placeName2="Arrêt 5"
requestContext.destinationRef2="STIF:StopPoint:Q:108949:"
requestContext.destinationName2="Arrêt 6"
requestContext.vehicleJourneyName2="Course 2"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse2 = getHeureSuivante(2)
requestContext.originAimedDepartureTime2=heureDepartCourse2.toXMLFormat();
requestContext.destinationAimedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,20,0)
//MonitoredCall
requestContext.monitoringRef2 = holder["//siri:MonitoringRef"]
requestContext.stopPointRef2=requestContext.monitoringRef
requestContext.stopPointName2="Arrêt 7"
requestContext.aimedArrivalTime2= getAvecMinuteSeconde(heureDepartCourse2,2,0).toXMLFormat()
requestContext.actualArrivalTime2= getAvecMinuteSeconde(heureDepartCourse2,2,1).toXMLFormat()
requestContext.expectedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,2,2).toXMLFormat()

requestContext.aimedDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,41).toXMLFormat()
requestContext.actualDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,42).toXMLFormat()
requestContext.expectedDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,43).toXMLFormat()



// Methodes utilitaires DATE
// Methode Date permettant d'avoir l'heure courante + heure
def getHeureSuivante(int heure){
	def calendar = Calendar.getInstance();
	calendar.add(Calendar.HOUR,heure);
	calendar.set(Calendar.MINUTE, 0);
	calendar.set(Calendar.SECOND, 0);
	calendar.set(Calendar.MILLISECOND, 0);
	def heureSuivante = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return heureSuivante;
}

// Methode permettant de setter les minites et secondes sur l'heure passée
def getAvecMinuteSeconde(javax.xml.datatype.XMLGregorianCalendar xmlCalendar, int minute, int seconde){ 
	Calendar calendar = xmlCalendar.toGregorianCalendar();	
	calendar.set(Calendar.MINUTE, minute);
	calendar.set(Calendar.SECOND, seconde);
	def date = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return date;
      
}
</con:script><con:responseContent><![CDATA[<!--
Cette réponse renvoie les 2 prochains passages de la ZDE STIF:StopPoint:Q:4
Passage 1 : heure courante + 1 avec lineRef CODIFLIGNE et des identifiants non REFLEX
Passage 2 : heure courante + 2 avec lineRef CODIFLIGNE et des identifiants REFLEX
-->
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsdl="http://wsdl.siri.org.uk" xmlns:siri="http://www.siri.org.uk/siri" xmlns:acsb="http://www.ifopt.org.uk/acsb" xmlns:ifop="http://www.ifopt.org.uk/ifopt">
   <soapenv:Header/>
   <soapenv:Body>
      <wsdl:GetStopMonitoringResponse>
         <ServiceDeliveryInfo>
            <siri:ResponseTimestamp>${=javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())}</siri:ResponseTimestamp>
            <siri:ProducerRef>${producerRef}</siri:ProducerRef>
            <siri:ResponseMessageIdentifier>${responseMessageIdentifier}</siri:ResponseMessageIdentifier>
		  <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
         </ServiceDeliveryInfo>
         <Answer>
            <siri:StopMonitoringDelivery version="${version}">
               <siri:ResponseTimestamp>${recordedAtTime}</siri:ResponseTimestamp>
               <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
               <siri:Status>true</siri:Status>
               <siri:MonitoringRef>${monitoringRef}</siri:MonitoringRef>
               <!-- 1 er passage-->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef}</siri:JourneyPatternRef>
                     <siri:JourneyPatternName>${journeyPatternName}</siri:JourneyPatternName>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef1}</siri:RouteRef>
                     <siri:PublishedLineName>N</siri:PublishedLineName>
                     <siri:DirectionName>Rambouillet</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                     <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef1}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie1</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef1}</siri:OriginRef>
                     <siri:OriginName>${originName1}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef1}</siri:PlaceRef>
                        <siri:PlaceName>${placeName1}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef1}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName1}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName1}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime1}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime1}</siri:DestinationAimedArrivalTime>
                     <siri:FirstOrLastJourney>unspecified</siri:FirstOrLastJourney>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <siri:TrainNumbers>
                        <siri:TrainNumberRef>5918</siri:TrainNumberRef>
                     </siri:TrainNumbers>
                     <!-- JourneyParts:-->
                     <siri:JourneyParts>
                        <siri:JourneyPartInfo>
                           <siri:JourneyPartRef>5409</siri:JourneyPartRef>
                           <siri:TrainNumberRef>5928:1</siri:TrainNumberRef>
                           <siri:OperatorRef>${operatorRef1}</siri:OperatorRef>
                        </siri:JourneyPartInfo>
                     </siri:JourneyParts>
                     <!-- MonitoredCall 1er passage-->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef1}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName1}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName1}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime1}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime1}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime1}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalProximityText>à l'approche</siri:ArrivalProximityText>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:ArrivalStopAssignment>
                           <siri:AimedQuayName>voie 2</siri:AimedQuayName>
                        </siri:ArrivalStopAssignment>
                        <siri:AimedDepartureTime>${aimedDepartureTime1}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime1}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime1}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                        <siri:DistanceFromStop>2300</siri:DistanceFromStop>
                        <siri:NumberOfStopsAway>3</siri:NumberOfStopsAway>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
                <!-- 2ème passage -->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier2}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef2}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef2}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef2}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef2}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef2}</siri:JourneyPatternRef>
                     <siri:JourneyPatternName>mission2</siri:JourneyPatternName>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef2}</siri:RouteRef>
                     <siri:PublishedLineName>N</siri:PublishedLineName>
                     <siri:DirectionName>Rambouillet</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                      <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef2}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie2</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef2}</siri:OriginRef>
                     <siri:OriginName>${originName2}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef2}</siri:PlaceRef>
                        <siri:PlaceName>${placeName2}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef2}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName2}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName2}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course 2</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime2}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime2}</siri:DestinationAimedArrivalTime>
                     <siri:FirstOrLastJourney>unspecified</siri:FirstOrLastJourney>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <siri:TrainNumbers>
                        <siri:TrainNumberRef>5918</siri:TrainNumberRef>
                     </siri:TrainNumbers>
                     <!-- JourneyParts:-->
                     <siri:JourneyParts>
                        <siri:JourneyPartInfo>
                           <siri:JourneyPartRef>5409</siri:JourneyPartRef>
                           <siri:TrainNumberRef>5928:1</siri:TrainNumberRef>
                           <siri:OperatorRef>${operatorRef2}</siri:OperatorRef>
                        </siri:JourneyPartInfo>
                     </siri:JourneyParts>
                     <!--  MonitoredCall 2ème passage -->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef2}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName2}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName2}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime2}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime2}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime2}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalProximityText>à l'approche</siri:ArrivalProximityText>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:ArrivalStopAssignment>
                           <siri:AimedQuayName>voie 2</siri:AimedQuayName>
                        </siri:ArrivalStopAssignment>
                        <siri:AimedDepartureTime>${aimedDepartureTime2}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime2}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime2}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                        <siri:DistanceFromStop>2300</siri:DistanceFromStop>
                        <siri:NumberOfStopsAway>3</siri:NumberOfStopsAway>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
            </siri:StopMonitoringDelivery>
         </Answer>
         <AnswerExtension>
         </AnswerExtension>
      </wsdl:GetStopMonitoringResponse>
   </soapenv:Body>
</soapenv:Envelope>]]></con:responseContent><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetStopMonitoring"/></con:response><con:dispatchConfig/></con:mockOperation><con:properties/></con:mockService><con:mockService port="8080" path="/test34Producer" host="L276002" name="test34Producer" bindToHostOnly="false" docroot=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.mock.WsdlMockService@require-soap-action">false</con:setting></con:settings><con:mockOperation name="GetStopMonitoring" interface="SiriProducerRpcBinding" operation="GetStopMonitoring"><con:settings/><con:dispatchStyle>SEQUENCE</con:dispatchStyle><con:defaultResponse>Response 1</con:defaultResponse><con:response name="Response 1" encoding="UTF-8"><con:settings/><con:script>// create XmlHolder for request content
def holder = new com.eviware.soapui.support.XmlHolder( mockRequest.requestContent )
// define namespace
holder.namespaces["siri"] = "http://www.siri.org.uk/siri"
// récupération de l'id message de la request
requestContext.idMessage = holder["//siri:MessageIdentifier"][0]
</con:script><con:responseContent><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:new="http://new.webservice.namespace" xmlns:siri="http://www.siri.org.uk/">
   <soapenv:Header/>
   <soapenv:Body>
      <new:GetStopMonitoringResponse>
         <ServiceDeliveryInfo>
             <siri:ResponseTimestamp>${=javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())}</siri:ResponseTimestamp>
            <siri:ProducerRef>SNCF-ACCES</siri:ProducerRef>
            <siri:ResponseMessageIdentifier>RATP:Message::1:LOC</siri:ResponseMessageIdentifier>
		  <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
         </ServiceDeliveryInfo>
         <Answer>
            <siri:StopMonitoringDelivery version="1.0">
               <siri:ResponseTimestamp>${=javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())}</siri:ResponseTimestamp>
               <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
               <siri:Status>true</siri:Status>
            </siri:StopMonitoringDelivery>
         </Answer>
         <AnswerExtension>
         </AnswerExtension>
      </new:GetStopMonitoringResponse>
   </soapenv:Body>
</soapenv:Envelope>
]]></con:responseContent><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetStopMonitoring"/></con:response><con:dispatchConfig/></con:mockOperation><con:properties/></con:mockService><con:mockService port="8080" path="/test2Producer_2" host="cloudwatt-pc-dev-00" name="test2Producer_2" bindToHostOnly="false" docroot=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.mock.WsdlMockService@require-soap-action">false</con:setting></con:settings><con:mockOperation name="GetStopMonitoring" interface="SiriProducerRpcBinding" operation="GetStopMonitoring"><con:settings/><con:dispatchStyle>SEQUENCE</con:dispatchStyle><con:defaultResponse>Response 1</con:defaultResponse><con:response name="Response 1" encoding="UTF-8"><con:settings/><con:script>// create XmlHolder for request content
def holder = new com.eviware.soapui.support.XmlHolder( mockRequest.requestContent )
def fournisseur = "SNCF-ACCES"
// define namespace
holder.namespaces["siri"] = "http://www.siri.org.uk/siri"
// récupération de l'id message de la request
requestContext.idMessage = holder["//siri:MessageIdentifier"][0]
requestContext.monitoringRef = holder["//siri:MonitoringRef"]
requestContext.version = holder["//Request/@version"].toString()

// identifiant utilisé (en coherence avec le dataset redis)
requestContext.producerRef="SNCF-ACCES"
requestContext.recordedAtTime = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())
// Passage 1 / course 1
requestContext.itemIdenfier=fournisseur+":Item::1:LOC"
requestContext.lineRef="STIF:Line::004004009"
requestContext.dataFrameRef="any"
requestContext.datedVehicleJourneyRef=fournisseur+":VehicleJourney::1:LOC"
requestContext.journeyPatternRef=fournisseur+":JourneyPattern::1:LOC"
requestContext.journeyPatternName="mission1"
requestContext.publishedLineName="N"
requestContext.routeRef1=fournisseur+":Route::1:LOC"
requestContext.directionName="Rambouillet"
requestContext.operatorRef1=fournisseur+":Operator::SNCF:"
requestContext.originRef1="STIF:StopPoint:Q:108935:"
requestContext.originName1="Arrêt 1"
requestContext.placeRef1="STIF:StopPoint:Q:108943:"
requestContext.placeName1="Arrêt 5"
requestContext.destinationRef1="STIF:StopPoint:Q:108949:"
requestContext.destinationName1="Arrêt 10"
requestContext.vehicleJourneyName1="Course 1"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse = getHeureSuivante(1)
requestContext.originAimedDepartureTime1=heureDepartCourse.toXMLFormat();
requestContext.destinationAimedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,20,0)
//MonitoredCall
requestContext.stopPointRef1=requestContext.monitoringRef
requestContext.stopPointName1="Arrêt 2"
requestContext.aimedArrivalTime1= "2015-04-18T12:00:00.000Z"
requestContext.actualArrivalTime1= "2015-04-18T12:20:00.000Z"
requestContext.expectedArrivalTime1="2015-04-18T12:40:00.000Z"

requestContext.aimedDepartureTime1="2015-04-18T12:00:00.000Z"
requestContext.actualDepartureTime1="2015-04-18T12:20:00.000Z"
requestContext.expectedDepartureTime1="2015-04-18T12:40:00.000Z"



// passage 2 / course 2
requestContext.monitoringRef2 = holder["//siri:MonitoringRef"]
requestContext.itemIdenfier2=fournisseur+":Item::2:LOC"
requestContext.lineRef2="STIF:Line::004004009"
requestContext.dataFrameRef2="any"
requestContext.datedVehicleJourneyRef2=fournisseur+":VehicleJourney::2:LOC"
requestContext.journeyPatternRef2=fournisseur+":JourneyPattern::2:LOC"
requestContext.routeRef2=fournisseur+":Route::1:LOC"
requestContext.operatorRef2=fournisseur+":Operator::SNCF:"
requestContext.originRef2="STIF:StopPoint:Q:108935:"
requestContext.originName2="Arrêt 1"
requestContext.placeRef2="STIF:StopPoint:Q:108943:"
requestContext.placeName2="Arrêt 5"
requestContext.destinationRef2="STIF:StopPoint:Q:108949:"
requestContext.destinationName2="Arrêt 10"
requestContext.vehicleJourneyName2="Course 2"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse2 = getHeureSuivante(2)
requestContext.originAimedDepartureTime2="2015-04-18T09:00:00.000Z"
requestContext.destinationAimedArrivalTime2="2015-04-18T12:00:00.000Z"
//MonitoredCall
requestContext.stopPointRef2=requestContext.monitoringRef
requestContext.stopPointName2="Arrêt 2"
requestContext.aimedArrivalTime2= "2015-04-18T14:00:00.000Z"
requestContext.actualArrivalTime2= "2015-04-18T14:20:00.000Z"
requestContext.expectedArrivalTime2="2015-04-18T14:40:00.000Z"

requestContext.aimedDepartureTime2="2015-04-18T14:00:00.000Z"
requestContext.actualDepartureTime2="2015-04-18T14:20:00.000Z"
requestContext.expectedDepartureTime2="2015-04-18T14:40:00.000Z"



// Methodes utilitaires DATE
// Methode Date permettant d'avoir l'heure courante + heure
def getHeureSuivante(int heure){
	def calendar = Calendar.getInstance();
	calendar.add(Calendar.HOUR,heure);
	calendar.set(Calendar.MINUTE, 0);
	calendar.set(Calendar.SECOND, 0);
	calendar.set(Calendar.MILLISECOND, 0);
	def heureSuivante = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return heureSuivante;
}

// Methode permettant de setter les minites et secondes sur l'heure passée
def getAvecMinuteSeconde(javax.xml.datatype.XMLGregorianCalendar xmlCalendar, int minute, int seconde){ 
	Calendar calendar = xmlCalendar.toGregorianCalendar();	
	calendar.set(Calendar.MINUTE, minute);
	calendar.set(Calendar.SECOND, seconde);
	def date = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return date;
      
}
</con:script><con:responseContent><![CDATA[<!--
Cette réponse renvoie les 2 prochains passages de la ZDE STIF:StopPoint:Q:2
Passage 1 : heure courante + 1
Passage 2 : heure courante + 2
-->
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsdl="http://wsdl.siri.org.uk" xmlns:siri="http://www.siri.org.uk/siri" xmlns:acsb="http://www.ifopt.org.uk/acsb" xmlns:ifop="http://www.ifopt.org.uk/ifopt">
   <soapenv:Header/>
   <soapenv:Body>
      <wsdl:GetStopMonitoringResponse>
         <ServiceDeliveryInfo>
            <siri:ResponseTimestamp>${=javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())}</siri:ResponseTimestamp>
            <siri:ProducerRef>${producerRef}</siri:ProducerRef>
            <siri:ResponseMessageIdentifier>${= UUID.randomUUID().toString()}</siri:ResponseMessageIdentifier>
		  <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
         </ServiceDeliveryInfo>
         <Answer>
            <siri:StopMonitoringDelivery version="${version}">
               <siri:ResponseTimestamp>${recordedAtTime}</siri:ResponseTimestamp>
               <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
               <siri:Status>true</siri:Status>
               <siri:MonitoringRef>${monitoringRef}</siri:MonitoringRef>
               <!-- 1 er passage-->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef}</siri:JourneyPatternRef>
                     <siri:JourneyPatternName>${journeyPatternName}</siri:JourneyPatternName>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef1}</siri:RouteRef>
                     <siri:PublishedLineName>${publishedLineName}</siri:PublishedLineName>
                     <siri:DirectionName>${directionName}</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                     <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef1}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie1</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef1}</siri:OriginRef>
                     <siri:OriginName>${originName1}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef1}</siri:PlaceRef>
                        <siri:PlaceName>${placeName1}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef1}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName1}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName1}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime1}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime1}</siri:DestinationAimedArrivalTime>
                     <siri:FirstOrLastJourney>unspecified</siri:FirstOrLastJourney>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <siri:TrainNumbers>
                        <siri:TrainNumberRef>5918</siri:TrainNumberRef>
                     </siri:TrainNumbers>
                     <!-- JourneyParts:-->
                     <siri:JourneyParts>
                        <siri:JourneyPartInfo>
                           <siri:JourneyPartRef>5409</siri:JourneyPartRef>
                           <siri:TrainNumberRef>5928:1</siri:TrainNumberRef>
                           <siri:OperatorRef>${operatorRef1}</siri:OperatorRef>
                        </siri:JourneyPartInfo>
                     </siri:JourneyParts>
                     <!-- MonitoredCall 1er passage-->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef1}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName1}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName1}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime1}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime1}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime1}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalProximityText>à l'approche</siri:ArrivalProximityText>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:ArrivalStopAssignment>
                           <siri:AimedQuayName>voie 2</siri:AimedQuayName>
                        </siri:ArrivalStopAssignment>
                        <siri:AimedDepartureTime>${aimedDepartureTime1}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime1}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime1}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                        <siri:DistanceFromStop>2300</siri:DistanceFromStop>
                        <siri:NumberOfStopsAway>3</siri:NumberOfStopsAway>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
                <!-- 2ème passage -->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier2}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef2}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef2}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef2}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef2}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef2}</siri:JourneyPatternRef>
                     <siri:JourneyPatternName>mission2</siri:JourneyPatternName>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef2}</siri:RouteRef>
                     <siri:PublishedLineName>N</siri:PublishedLineName>
                     <siri:DirectionName>Rambouillet</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                      <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef2}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie2</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef2}</siri:OriginRef>
                     <siri:OriginName>${originName2}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef2}</siri:PlaceRef>
                        <siri:PlaceName>${placeName2}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef2}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName2}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName2}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course 2</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime2}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime2}</siri:DestinationAimedArrivalTime>
                     <siri:FirstOrLastJourney>unspecified</siri:FirstOrLastJourney>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <siri:TrainNumbers>
                        <siri:TrainNumberRef>5918</siri:TrainNumberRef>
                     </siri:TrainNumbers>
                     <!-- JourneyParts:-->
                     <siri:JourneyParts>
                        <siri:JourneyPartInfo>
                           <siri:JourneyPartRef>5409</siri:JourneyPartRef>
                           <siri:TrainNumberRef>5928:1</siri:TrainNumberRef>
                           <siri:OperatorRef>${operatorRef2}</siri:OperatorRef>
                        </siri:JourneyPartInfo>
                     </siri:JourneyParts>
                     <!--  MonitoredCall 2ème passage -->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef2}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName2}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName2}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime2}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime2}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime2}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalProximityText>à l'approche</siri:ArrivalProximityText>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:ArrivalStopAssignment>
                           <siri:AimedQuayName>voie 2</siri:AimedQuayName>
                        </siri:ArrivalStopAssignment>
                        <siri:AimedDepartureTime>${aimedDepartureTime2}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime2}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime2}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                        <siri:DistanceFromStop>2300</siri:DistanceFromStop>
                        <siri:NumberOfStopsAway>3</siri:NumberOfStopsAway>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
            </siri:StopMonitoringDelivery>
         </Answer>
         <AnswerExtension>
         </AnswerExtension>
      </wsdl:GetStopMonitoringResponse>
   </soapenv:Body>
</soapenv:Envelope>]]></con:responseContent><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetStopMonitoring"/></con:response><con:dispatchConfig/></con:mockOperation><con:properties/></con:mockService><con:mockService port="8080" path="/test2Producer_1" host="cloudwatt-pc-dev-00" name="test2Producer_1" bindToHostOnly="false" docroot=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.mock.WsdlMockService@require-soap-action">false</con:setting></con:settings><con:mockOperation name="GetStopMonitoring" interface="SiriProducerRpcBinding" operation="GetStopMonitoring"><con:settings/><con:dispatchStyle>SEQUENCE</con:dispatchStyle><con:defaultResponse>Response 1</con:defaultResponse><con:response name="Response 1" encoding="UTF-8"><con:settings/><con:script>// create XmlHolder for request content
def holder = new com.eviware.soapui.support.XmlHolder( mockRequest.requestContent )
def fournisseur = "SNCF-ACCES"
// define namespace
holder.namespaces["siri"] = "http://www.siri.org.uk/siri"
// récupération de l'id message de la request
requestContext.idMessage = holder["//siri:MessageIdentifier"][0]
requestContext.monitoringRef = holder["//siri:MonitoringRef"]
requestContext.version = holder["//Request/@version"].toString()

// identifiant utilisé (en coherence avec le dataset redis)
requestContext.producerRef="SNCF-ACCES"
requestContext.recordedAtTime = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())
// Passage 1 / course 1
requestContext.itemIdenfier=fournisseur+":Item::1:LOC"
requestContext.lineRef="STIF:Line::004004009"
requestContext.dataFrameRef="any"
requestContext.datedVehicleJourneyRef=fournisseur+":VehicleJourney::1:LOC"
requestContext.journeyPatternRef=fournisseur+":JourneyPattern::1:LOC"
requestContext.journeyPatternName="mission1"
requestContext.publishedLineName="N"
requestContext.routeRef1=fournisseur+":Route::1:LOC"
requestContext.directionName="Rambouillet"
requestContext.operatorRef1=fournisseur+":Operator::SNCF:"
requestContext.originRef1="STIF:StopPoint:Q:108935:"
requestContext.originName1="Arrêt 1"
requestContext.placeRef1="STIF:StopPoint:Q:108943:"
requestContext.placeName1="Arrêt 5"
requestContext.destinationRef1="STIF:StopPoint:Q:108949:"
requestContext.destinationName1="Arrêt 10"
requestContext.vehicleJourneyName1="Course 1"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse = getHeureSuivante(1)
requestContext.originAimedDepartureTime1=heureDepartCourse.toXMLFormat();
requestContext.destinationAimedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,20,0)
//MonitoredCall
requestContext.stopPointRef1=requestContext.monitoringRef
requestContext.stopPointName1="Arrêt 2"
requestContext.aimedArrivalTime1= "2015-04-18T12:00:00.000Z"
requestContext.actualArrivalTime1= "2015-04-18T12:20:00.000Z"
requestContext.expectedArrivalTime1="2015-04-18T12:40:00.000Z"

requestContext.aimedDepartureTime1="2015-04-18T12:00:00.000Z"
requestContext.actualDepartureTime1="2015-04-18T12:20:00.000Z"
requestContext.expectedDepartureTime1="2015-04-18T12:40:00.000Z"



// passage 2 / course 2
requestContext.monitoringRef2 = holder["//siri:MonitoringRef"]
requestContext.itemIdenfier2=fournisseur+":Item::2:LOC"
requestContext.lineRef2="STIF:Line::004004009"
requestContext.dataFrameRef2="any"
requestContext.datedVehicleJourneyRef2=fournisseur+":VehicleJourney::2:LOC"
requestContext.journeyPatternRef2=fournisseur+":JourneyPattern::2:LOC"
requestContext.routeRef2=fournisseur+":Route::1:LOC"
requestContext.operatorRef2=fournisseur+":Operator::SNCF:"
requestContext.originRef2="STIF:StopPoint:Q:108935:"
requestContext.originName2="Arrêt 1"
requestContext.placeRef2="STIF:StopPoint:Q:108943:"
requestContext.placeName2="Arrêt 5"
requestContext.destinationRef2="STIF:StopPoint:Q:108949:"
requestContext.destinationName2="Arrêt 10"
requestContext.vehicleJourneyName2="Course 2"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse2 = getHeureSuivante(2)
requestContext.originAimedDepartureTime2="2015-04-18T09:00:00.000Z"
requestContext.destinationAimedArrivalTime2="2015-04-18T12:00:00.000Z"
//MonitoredCall
requestContext.stopPointRef2=requestContext.monitoringRef
requestContext.stopPointName2="Arrêt 2"
requestContext.aimedArrivalTime2= "2015-04-18T14:00:00.000Z"
requestContext.actualArrivalTime2= "2015-04-18T14:20:00.000Z"
requestContext.expectedArrivalTime2="2015-04-18T14:40:00.000Z"

requestContext.aimedDepartureTime2="2015-04-18T14:00:00.000Z"
requestContext.actualDepartureTime2="2015-04-18T14:20:00.000Z"
requestContext.expectedDepartureTime2="2015-04-18T14:40:00.000Z"



// Methodes utilitaires DATE
// Methode Date permettant d'avoir l'heure courante + heure
def getHeureSuivante(int heure){
	def calendar = Calendar.getInstance();
	calendar.add(Calendar.HOUR,heure);
	calendar.set(Calendar.MINUTE, 0);
	calendar.set(Calendar.SECOND, 0);
	calendar.set(Calendar.MILLISECOND, 0);
	def heureSuivante = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return heureSuivante;
}

// Methode permettant de setter les minites et secondes sur l'heure passée
def getAvecMinuteSeconde(javax.xml.datatype.XMLGregorianCalendar xmlCalendar, int minute, int seconde){ 
	Calendar calendar = xmlCalendar.toGregorianCalendar();	
	calendar.set(Calendar.MINUTE, minute);
	calendar.set(Calendar.SECOND, seconde);
	def date = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return date;
      
}
</con:script><con:responseContent><![CDATA[<!--
Cette réponse renvoie les 2 prochains passages de la ZDE STIF:StopPoint:Q:2
Passage 1 : heure courante + 1
Passage 2 : heure courante + 2
-->
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsdl="http://wsdl.siri.org.uk" xmlns:siri="http://www.siri.org.uk/siri" xmlns:acsb="http://www.ifopt.org.uk/acsb" xmlns:ifop="http://www.ifopt.org.uk/ifopt">
   <soapenv:Header/>
   <soapenv:Body>
      <wsdl:GetStopMonitoringResponse>
         <ServiceDeliveryInfo>
            <siri:ResponseTimestamp>${=javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())}</siri:ResponseTimestamp>
            <siri:ProducerRef>${producerRef}</siri:ProducerRef>
            <siri:ResponseMessageIdentifier>${= UUID.randomUUID().toString()}</siri:ResponseMessageIdentifier>
		  <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
         </ServiceDeliveryInfo>
         <Answer>
            <siri:StopMonitoringDelivery version="${version}">
               <siri:ResponseTimestamp>${recordedAtTime}</siri:ResponseTimestamp>
               <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
               <siri:Status>true</siri:Status>
               <siri:MonitoringRef>${monitoringRef}</siri:MonitoringRef>
               <!-- 1 er passage-->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef}</siri:JourneyPatternRef>
                     <siri:JourneyPatternName>${journeyPatternName}</siri:JourneyPatternName>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef1}</siri:RouteRef>
                     <siri:PublishedLineName>${publishedLineName}</siri:PublishedLineName>
                     <siri:DirectionName>${directionName}</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                     <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef1}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie1</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef1}</siri:OriginRef>
                     <siri:OriginName>${originName1}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef1}</siri:PlaceRef>
                        <siri:PlaceName>${placeName1}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef1}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName1}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName1}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime1}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime1}</siri:DestinationAimedArrivalTime>
                     <siri:FirstOrLastJourney>unspecified</siri:FirstOrLastJourney>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <siri:TrainNumbers>
                        <siri:TrainNumberRef>5918</siri:TrainNumberRef>
                     </siri:TrainNumbers>
                     <!-- JourneyParts:-->
                     <siri:JourneyParts>
                        <siri:JourneyPartInfo>
                           <siri:JourneyPartRef>5409</siri:JourneyPartRef>
                           <siri:TrainNumberRef>5928:1</siri:TrainNumberRef>
                           <siri:OperatorRef>${operatorRef1}</siri:OperatorRef>
                        </siri:JourneyPartInfo>
                     </siri:JourneyParts>
                     <!-- MonitoredCall 1er passage-->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef1}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName1}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName1}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime1}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime1}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime1}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalProximityText>à l'approche</siri:ArrivalProximityText>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:ArrivalStopAssignment>
                           <siri:AimedQuayName>voie 2</siri:AimedQuayName>
                        </siri:ArrivalStopAssignment>
                        <siri:AimedDepartureTime>${aimedDepartureTime1}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime1}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime1}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                        <siri:DistanceFromStop>2300</siri:DistanceFromStop>
                        <siri:NumberOfStopsAway>3</siri:NumberOfStopsAway>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
                <!-- 2ème passage -->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier2}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef2}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef2}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef2}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef2}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef2}</siri:JourneyPatternRef>
                     <siri:JourneyPatternName>mission2</siri:JourneyPatternName>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef2}</siri:RouteRef>
                     <siri:PublishedLineName>N</siri:PublishedLineName>
                     <siri:DirectionName>Rambouillet</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                      <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef2}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie2</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef2}</siri:OriginRef>
                     <siri:OriginName>${originName2}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef2}</siri:PlaceRef>
                        <siri:PlaceName>${placeName2}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef2}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName2}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName2}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course 2</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime2}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime2}</siri:DestinationAimedArrivalTime>
                     <siri:FirstOrLastJourney>unspecified</siri:FirstOrLastJourney>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <siri:TrainNumbers>
                        <siri:TrainNumberRef>5918</siri:TrainNumberRef>
                     </siri:TrainNumbers>
                     <!-- JourneyParts:-->
                     <siri:JourneyParts>
                        <siri:JourneyPartInfo>
                           <siri:JourneyPartRef>5409</siri:JourneyPartRef>
                           <siri:TrainNumberRef>5928:1</siri:TrainNumberRef>
                           <siri:OperatorRef>${operatorRef2}</siri:OperatorRef>
                        </siri:JourneyPartInfo>
                     </siri:JourneyParts>
                     <!--  MonitoredCall 2ème passage -->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef2}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName2}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName2}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime2}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime2}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime2}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalProximityText>à l'approche</siri:ArrivalProximityText>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:ArrivalStopAssignment>
                           <siri:AimedQuayName>voie 2</siri:AimedQuayName>
                        </siri:ArrivalStopAssignment>
                        <siri:AimedDepartureTime>${aimedDepartureTime2}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime2}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime2}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                        <siri:DistanceFromStop>2300</siri:DistanceFromStop>
                        <siri:NumberOfStopsAway>3</siri:NumberOfStopsAway>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
            </siri:StopMonitoringDelivery>
         </Answer>
         <AnswerExtension>
         </AnswerExtension>
      </wsdl:GetStopMonitoringResponse>
   </soapenv:Body>
</soapenv:Envelope>]]></con:responseContent><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetStopMonitoring"/></con:response><con:dispatchConfig/></con:mockOperation><con:properties/></con:mockService><con:mockService port="8080" path="/test3Producer_1" host="cloudwatt-pc-dev-00" name="test3Producer_1" bindToHostOnly="false" docroot=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.mock.WsdlMockService@require-soap-action">false</con:setting></con:settings><con:mockOperation name="GetStopMonitoring" interface="SiriProducerRpcBinding" operation="GetStopMonitoring"><con:settings/><con:dispatchStyle>SEQUENCE</con:dispatchStyle><con:defaultResponse>Response 1</con:defaultResponse><con:response name="Response 1" encoding="UTF-8"><con:settings/><con:script>// create XmlHolder for request content
def holder = new com.eviware.soapui.support.XmlHolder( mockRequest.requestContent )
def fournisseur = "SNCF-ACCES"
// define namespace
holder.namespaces["siri"] = "http://www.siri.org.uk/siri"
// récupération de l'id message de la request
requestContext.idMessage = holder["//siri:MessageIdentifier"][0]
requestContext.monitoringRef = holder["//siri:MonitoringRef"]
requestContext.version = holder["//Request/@version"].toString()

// identifiant utilisé (en coherence avec le dataset redis)
requestContext.producerRef="SNCF-ACCES"
requestContext.recordedAtTime = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())
// Passage 1 / course 1
requestContext.itemIdenfier=fournisseur+":Item::1:LOC"
requestContext.lineRef="STIF:Line::004004009"
requestContext.dataFrameRef="any"
requestContext.datedVehicleJourneyRef=fournisseur+":VehicleJourney::1:LOC"
requestContext.journeyPatternRef=fournisseur+":JourneyPattern::1:LOC"
requestContext.journeyPatternName="mission1"
requestContext.publishedLineName="N"
requestContext.routeRef1=fournisseur+":Route::1:LOC"
requestContext.directionName="Rambouillet"
requestContext.operatorRef1=fournisseur+":Operator::SNCF:"
requestContext.originRef1="STIF:StopPoint:Q:108935:"
requestContext.originName1="Arrêt 1"
requestContext.placeRef1="STIF:StopPoint:Q:108943:"
requestContext.placeName1="Arrêt 5"
requestContext.destinationRef1="STIF:StopPoint:Q:108949:"
requestContext.destinationName1="Arrêt 10"
requestContext.vehicleJourneyName1="Course 1"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse = getHeureSuivante(1)
requestContext.originAimedDepartureTime1=heureDepartCourse.toXMLFormat();
requestContext.destinationAimedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,20,0)
//MonitoredCall
requestContext.stopPointRef1=requestContext.monitoringRef
requestContext.stopPointName1="Arrêt 2"
requestContext.aimedArrivalTime1= getAvecMinuteSeconde(heureDepartCourse,2,0).toXMLFormat()
requestContext.actualArrivalTime1= getAvecMinuteSeconde(heureDepartCourse,2,1).toXMLFormat()
requestContext.expectedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,2,2).toXMLFormat()

requestContext.aimedDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,41).toXMLFormat()
requestContext.actualDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,42).toXMLFormat()
requestContext.expectedDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,43).toXMLFormat()


// passage 2 / course 2
requestContext.monitoringRef2 = holder["//siri:MonitoringRef"]
requestContext.itemIdenfier2=fournisseur+":Item::2:LOC"
requestContext.lineRef2="STIF:Line::004004009"
requestContext.dataFrameRef2="any"
requestContext.datedVehicleJourneyRef2=fournisseur+":VehicleJourney::2:LOC"
requestContext.journeyPatternRef2=fournisseur+":JourneyPattern::2:LOC"
requestContext.routeRef2=fournisseur+":Route::1:LOC"
requestContext.operatorRef2=fournisseur+":Operator::SNCF:"
requestContext.originRef2="STIF:StopPoint:Q:108935:"
requestContext.originName2="Arrêt 1"
requestContext.placeRef2="STIF:StopPoint:Q:108943:"
requestContext.placeName2="Arrêt 5"
requestContext.destinationRef2="STIF:StopPoint:Q:108949:"
requestContext.destinationName2="Arrêt 10"
requestContext.vehicleJourneyName2="Course 2"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse2 = getHeureSuivante(2)
requestContext.originAimedDepartureTime2=heureDepartCourse2.toXMLFormat();
requestContext.destinationAimedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,20,0)
//MonitoredCall
requestContext.stopPointRef2=requestContext.monitoringRef
requestContext.stopPointName2="Arrêt 2"
requestContext.aimedArrivalTime2= getAvecMinuteSeconde(heureDepartCourse2,2,0).toXMLFormat()
requestContext.actualArrivalTime2= getAvecMinuteSeconde(heureDepartCourse2,2,1).toXMLFormat()
requestContext.expectedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,2,2).toXMLFormat()

requestContext.aimedDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,41).toXMLFormat()
requestContext.actualDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,42).toXMLFormat()
requestContext.expectedDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,43).toXMLFormat()



// Methodes utilitaires DATE
// Methode Date permettant d'avoir l'heure courante + heure
def getHeureSuivante(int heure){
	def calendar = Calendar.getInstance();
	calendar.add(Calendar.HOUR,heure);
	calendar.set(Calendar.MINUTE, 0);
	calendar.set(Calendar.SECOND, 0);
	calendar.set(Calendar.MILLISECOND, 0);
	def heureSuivante = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return heureSuivante;
}

// Methode permettant de setter les minites et secondes sur l'heure passée
def getAvecMinuteSeconde(javax.xml.datatype.XMLGregorianCalendar xmlCalendar, int minute, int seconde){ 
	Calendar calendar = xmlCalendar.toGregorianCalendar();	
	calendar.set(Calendar.MINUTE, minute);
	calendar.set(Calendar.SECOND, seconde);
	def date = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return date;
      
}
</con:script><con:responseContent><![CDATA[<!--
Cette réponse renvoie les 2 prochains passages de la ZDE STIF:StopPoint:Q:2
Passage 1 : heure courante + 1
Passage 2 : heure courante + 2
-->
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsdl="http://wsdl.siri.org.uk" xmlns:siri="http://www.siri.org.uk/siri" xmlns:acsb="http://www.ifopt.org.uk/acsb" xmlns:ifop="http://www.ifopt.org.uk/ifopt">
   <soapenv:Header/>
   <soapenv:Body>
      <wsdl:GetStopMonitoringResponse>
         <ServiceDeliveryInfo>
            <siri:ResponseTimestamp>${=javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())}</siri:ResponseTimestamp>
            <siri:ProducerRef>${producerRef}</siri:ProducerRef>
            <siri:ResponseMessageIdentifier>${= UUID.randomUUID().toString()}</siri:ResponseMessageIdentifier>
		  <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
         </ServiceDeliveryInfo>
         <Answer>
            <siri:StopMonitoringDelivery version="${version}">
               <siri:ResponseTimestamp>${recordedAtTime}</siri:ResponseTimestamp>
               <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
               <siri:Status>true</siri:Status>
               <siri:MonitoringRef>${monitoringRef}</siri:MonitoringRef>
               <!-- 1 er passage-->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef}</siri:JourneyPatternRef>
                     <siri:JourneyPatternName>${journeyPatternName}</siri:JourneyPatternName>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef1}</siri:RouteRef>
                     <siri:PublishedLineName>${publishedLineName}</siri:PublishedLineName>
                     <siri:DirectionName>${directionName}</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                     <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef1}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie1</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef1}</siri:OriginRef>
                     <siri:OriginName>${originName1}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef1}</siri:PlaceRef>
                        <siri:PlaceName>${placeName1}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef1}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName1}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName1}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime1}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime1}</siri:DestinationAimedArrivalTime>
                     <siri:FirstOrLastJourney>unspecified</siri:FirstOrLastJourney>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <siri:TrainNumbers>
                        <siri:TrainNumberRef>5918</siri:TrainNumberRef>
                     </siri:TrainNumbers>
                     <!-- JourneyParts:-->
                     <siri:JourneyParts>
                        <siri:JourneyPartInfo>
                           <siri:JourneyPartRef>5409</siri:JourneyPartRef>
                           <siri:TrainNumberRef>5928:1</siri:TrainNumberRef>
                           <siri:OperatorRef>${operatorRef1}</siri:OperatorRef>
                        </siri:JourneyPartInfo>
                     </siri:JourneyParts>
                     <!-- MonitoredCall 1er passage-->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef1}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName1}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName1}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime1}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime1}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime1}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalProximityText>à l'approche</siri:ArrivalProximityText>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:ArrivalStopAssignment>
                           <siri:AimedQuayName>voie 2</siri:AimedQuayName>
                        </siri:ArrivalStopAssignment>
                        <siri:AimedDepartureTime>${aimedDepartureTime1}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime1}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime1}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                        <siri:DistanceFromStop>2300</siri:DistanceFromStop>
                        <siri:NumberOfStopsAway>3</siri:NumberOfStopsAway>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
                <!-- 2ème passage -->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier2}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef2}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef2}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef2}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef2}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef2}</siri:JourneyPatternRef>
                     <siri:JourneyPatternName>mission2</siri:JourneyPatternName>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef2}</siri:RouteRef>
                     <siri:PublishedLineName>N</siri:PublishedLineName>
                     <siri:DirectionName>Rambouillet</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                      <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef2}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie2</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef2}</siri:OriginRef>
                     <siri:OriginName>${originName2}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef2}</siri:PlaceRef>
                        <siri:PlaceName>${placeName2}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef2}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName2}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName2}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course 2</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime2}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime2}</siri:DestinationAimedArrivalTime>
                     <siri:FirstOrLastJourney>unspecified</siri:FirstOrLastJourney>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <siri:TrainNumbers>
                        <siri:TrainNumberRef>5918</siri:TrainNumberRef>
                     </siri:TrainNumbers>
                     <!-- JourneyParts:-->
                     <siri:JourneyParts>
                        <siri:JourneyPartInfo>
                           <siri:JourneyPartRef>5409</siri:JourneyPartRef>
                           <siri:TrainNumberRef>5928:1</siri:TrainNumberRef>
                           <siri:OperatorRef>${operatorRef2}</siri:OperatorRef>
                        </siri:JourneyPartInfo>
                     </siri:JourneyParts>
                     <!--  MonitoredCall 2ème passage -->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef2}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName2}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName2}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime2}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime2}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime2}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalProximityText>à l'approche</siri:ArrivalProximityText>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:ArrivalStopAssignment>
                           <siri:AimedQuayName>voie 2</siri:AimedQuayName>
                        </siri:ArrivalStopAssignment>
                        <siri:AimedDepartureTime>${aimedDepartureTime2}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime2}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime2}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                        <siri:DistanceFromStop>2300</siri:DistanceFromStop>
                        <siri:NumberOfStopsAway>3</siri:NumberOfStopsAway>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
            </siri:StopMonitoringDelivery>
         </Answer>
         <AnswerExtension>
         </AnswerExtension>
      </wsdl:GetStopMonitoringResponse>
   </soapenv:Body>
</soapenv:Envelope>]]></con:responseContent><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetStopMonitoring"/></con:response><con:dispatchConfig/></con:mockOperation><con:properties/></con:mockService><con:mockService port="8080" path="/test3Producer_2" host="cloudwatt-pc-dev-00" name="test3Producer_2" bindToHostOnly="false" docroot=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.mock.WsdlMockService@require-soap-action">false</con:setting></con:settings><con:mockOperation name="GetStopMonitoring" interface="SiriProducerRpcBinding" operation="GetStopMonitoring"><con:settings/><con:dispatchStyle>SEQUENCE</con:dispatchStyle><con:defaultResponse>Response 1</con:defaultResponse><con:response name="Response 1" encoding="UTF-8"><con:settings/><con:script>// create XmlHolder for request content
def holder = new com.eviware.soapui.support.XmlHolder( mockRequest.requestContent )
def fournisseur = "SNCF-ACCES"
// define namespace
holder.namespaces["siri"] = "http://www.siri.org.uk/siri"
// récupération de l'id message de la request
requestContext.idMessage = holder["//siri:MessageIdentifier"][0]
requestContext.monitoringRef = holder["//siri:MonitoringRef"]
requestContext.version = holder["//Request/@version"].toString()

// identifiant utilisé (en coherence avec le dataset redis)
requestContext.producerRef="SNCF-ACCES"
requestContext.recordedAtTime = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())
// Passage 1 / course 1
requestContext.itemIdenfier=fournisseur+":Item::1:LOC"
requestContext.lineRef="STIF:Line::004004009"
requestContext.dataFrameRef="any"
requestContext.datedVehicleJourneyRef=fournisseur+":VehicleJourney::1:LOC"
requestContext.journeyPatternRef=fournisseur+":JourneyPattern::1:LOC"
requestContext.journeyPatternName="mission1"
requestContext.publishedLineName="N"
requestContext.routeRef1=fournisseur+":Route::1:LOC"
requestContext.directionName="Rambouillet"
requestContext.operatorRef1=fournisseur+":Operator::SNCF:"
requestContext.originRef1="STIF:StopPoint:Q:108935:"
requestContext.originName1="Arrêt 1"
requestContext.placeRef1="STIF:StopPoint:Q:108943:"
requestContext.placeName1="Arrêt 5"
requestContext.destinationRef1="STIF:StopPoint:Q:108949:"
requestContext.destinationName1="Arrêt 10"
requestContext.vehicleJourneyName1="Course 1"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse = getHeureSuivante(1)
requestContext.originAimedDepartureTime1=heureDepartCourse.toXMLFormat();
requestContext.destinationAimedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,20,0)
//MonitoredCall
requestContext.stopPointRef1=requestContext.monitoringRef
requestContext.stopPointName1="Arrêt 2"
//requestContext.aimedArrivalTime1= getAvecMinuteSeconde(heureDepartCourse,2,0).toXMLFormat()
requestContext.aimedArrivalTime1="2014-04-29T05:00:00.000Z"
requestContext.actualArrivalTime1= getAvecMinuteSeconde(heureDepartCourse,2,1).toXMLFormat()
requestContext.expectedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,2,2).toXMLFormat()

requestContext.aimedDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,41).toXMLFormat()
requestContext.actualDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,42).toXMLFormat()
requestContext.expectedDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,43).toXMLFormat()


// passage 2 / course 2
requestContext.monitoringRef2 = holder["//siri:MonitoringRef"]
requestContext.itemIdenfier2=fournisseur+":Item::2:LOC"
requestContext.lineRef2="STIF:Line::004004009"
requestContext.dataFrameRef2="any"
requestContext.datedVehicleJourneyRef2=fournisseur+":VehicleJourney::2:LOC"
requestContext.journeyPatternRef2=fournisseur+":JourneyPattern::2:LOC"
requestContext.routeRef2=fournisseur+":Route::1:LOC"
requestContext.operatorRef2=fournisseur+":Operator::SNCF:"
requestContext.originRef2="STIF:StopPoint:Q:108935:"
requestContext.originName2="Arrêt 1"
requestContext.placeRef2="STIF:StopPoint:Q:108943:"
requestContext.placeName2="Arrêt 5"
requestContext.destinationRef2="STIF:StopPoint:Q:108949:"
requestContext.destinationName2="Arrêt 10"
requestContext.vehicleJourneyName2="Course 2"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse2 = getHeureSuivante(2)
requestContext.originAimedDepartureTime2=heureDepartCourse2.toXMLFormat();
requestContext.destinationAimedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,20,0)
//MonitoredCall
requestContext.stopPointRef2=requestContext.monitoringRef
requestContext.stopPointName2="Arrêt 2"
requestContext.aimedArrivalTime2= getAvecMinuteSeconde(heureDepartCourse2,2,0).toXMLFormat()
requestContext.actualArrivalTime2= getAvecMinuteSeconde(heureDepartCourse2,2,1).toXMLFormat()
requestContext.expectedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,2,2).toXMLFormat()

requestContext.aimedDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,41).toXMLFormat()
requestContext.actualDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,42).toXMLFormat()
requestContext.expectedDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,43).toXMLFormat()



// Methodes utilitaires DATE
// Methode Date permettant d'avoir l'heure courante + heure
def getHeureSuivante(int heure){
	def calendar = Calendar.getInstance();
	calendar.add(Calendar.HOUR,heure);
	calendar.set(Calendar.MINUTE, 0);
	calendar.set(Calendar.SECOND, 0);
	calendar.set(Calendar.MILLISECOND, 0);
	def heureSuivante = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return heureSuivante;
}

// Methode permettant de setter les minites et secondes sur l'heure passée
def getAvecMinuteSeconde(javax.xml.datatype.XMLGregorianCalendar xmlCalendar, int minute, int seconde){ 
	Calendar calendar = xmlCalendar.toGregorianCalendar();	
	calendar.set(Calendar.MINUTE, minute);
	calendar.set(Calendar.SECOND, seconde);
	def date = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return date;
      
}
</con:script><con:responseContent><![CDATA[<!--
Cette réponse renvoie les 2 prochains passages de la ZDE STIF:StopPoint:Q:2
Passage 1 : heure courante + 1
Passage 2 : heure courante + 2
-->
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsdl="http://wsdl.siri.org.uk" xmlns:siri="http://www.siri.org.uk/siri" xmlns:acsb="http://www.ifopt.org.uk/acsb" xmlns:ifop="http://www.ifopt.org.uk/ifopt">
   <soapenv:Header/>
   <soapenv:Body>
      <wsdl:GetStopMonitoringResponse>
         <ServiceDeliveryInfo>
            <siri:ResponseTimestamp>${=javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())}</siri:ResponseTimestamp>
            <siri:ProducerRef>${producerRef}</siri:ProducerRef>
            <siri:ResponseMessageIdentifier>${= UUID.randomUUID().toString()}</siri:ResponseMessageIdentifier>
		  <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
         </ServiceDeliveryInfo>
         <Answer>
            <siri:StopMonitoringDelivery version="${version}">
               <siri:ResponseTimestamp>${recordedAtTime}</siri:ResponseTimestamp>
               <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
               <siri:Status>true</siri:Status>
               <siri:MonitoringRef>${monitoringRef}</siri:MonitoringRef>
               <!-- 1 er passage-->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef}</siri:JourneyPatternRef>
                     <siri:JourneyPatternName>${journeyPatternName}</siri:JourneyPatternName>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef1}</siri:RouteRef>
                     <siri:PublishedLineName>${publishedLineName}</siri:PublishedLineName>
                     <siri:DirectionName>${directionName}</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                     <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef1}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie1</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef1}</siri:OriginRef>
                     <siri:OriginName>${originName1}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef1}</siri:PlaceRef>
                        <siri:PlaceName>${placeName1}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef1}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName1}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName1}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime1}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime1}</siri:DestinationAimedArrivalTime>
                     <siri:FirstOrLastJourney>unspecified</siri:FirstOrLastJourney>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <siri:TrainNumbers>
                        <siri:TrainNumberRef>5918</siri:TrainNumberRef>
                     </siri:TrainNumbers>
                     <!-- JourneyParts:-->
                     <siri:JourneyParts>
                        <siri:JourneyPartInfo>
                           <siri:JourneyPartRef>5409</siri:JourneyPartRef>
                           <siri:TrainNumberRef>5928:1</siri:TrainNumberRef>
                           <siri:OperatorRef>${operatorRef1}</siri:OperatorRef>
                        </siri:JourneyPartInfo>
                     </siri:JourneyParts>
                     <!-- MonitoredCall 1er passage-->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef1}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName1}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName1}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime1}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime1}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime1}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalProximityText>à l'approche</siri:ArrivalProximityText>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:ArrivalStopAssignment>
                           <siri:AimedQuayName>voie 2</siri:AimedQuayName>
                        </siri:ArrivalStopAssignment>
                        <siri:AimedDepartureTime>${aimedDepartureTime1}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime1}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime1}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                        <siri:DistanceFromStop>2300</siri:DistanceFromStop>
                        <siri:NumberOfStopsAway>3</siri:NumberOfStopsAway>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
                <!-- 2ème passage -->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier2}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef2}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef2}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef2}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef2}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef2}</siri:JourneyPatternRef>
                     <siri:JourneyPatternName>mission2</siri:JourneyPatternName>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef2}</siri:RouteRef>
                     <siri:PublishedLineName>N</siri:PublishedLineName>
                     <siri:DirectionName>Rambouillet</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                      <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef2}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie2</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef2}</siri:OriginRef>
                     <siri:OriginName>${originName2}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef2}</siri:PlaceRef>
                        <siri:PlaceName>${placeName2}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef2}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName2}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName2}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course 2</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime2}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime2}</siri:DestinationAimedArrivalTime>
                     <siri:FirstOrLastJourney>unspecified</siri:FirstOrLastJourney>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <siri:TrainNumbers>
                        <siri:TrainNumberRef>5918</siri:TrainNumberRef>
                     </siri:TrainNumbers>
                     <!-- JourneyParts:-->
                     <siri:JourneyParts>
                        <siri:JourneyPartInfo>
                           <siri:JourneyPartRef>5409</siri:JourneyPartRef>
                           <siri:TrainNumberRef>5928:1</siri:TrainNumberRef>
                           <siri:OperatorRef>${operatorRef2}</siri:OperatorRef>
                        </siri:JourneyPartInfo>
                     </siri:JourneyParts>
                     <!--  MonitoredCall 2ème passage -->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef2}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName2}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName2}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime2}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime2}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime2}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalProximityText>à l'approche</siri:ArrivalProximityText>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:ArrivalStopAssignment>
                           <siri:AimedQuayName>voie 2</siri:AimedQuayName>
                        </siri:ArrivalStopAssignment>
                        <siri:AimedDepartureTime>${aimedDepartureTime2}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime2}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime2}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                        <siri:DistanceFromStop>2300</siri:DistanceFromStop>
                        <siri:NumberOfStopsAway>3</siri:NumberOfStopsAway>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
            </siri:StopMonitoringDelivery>
         </Answer>
         <AnswerExtension>
         </AnswerExtension>
      </wsdl:GetStopMonitoringResponse>
   </soapenv:Body>
</soapenv:Envelope>]]></con:responseContent><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetStopMonitoring"/></con:response><con:dispatchConfig/></con:mockOperation><con:properties/></con:mockService><con:mockService port="8080" path="/test4Producer_1" host="cloudwatt-pc-dev-00" name="test4Producer_1" bindToHostOnly="false" docroot=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.mock.WsdlMockService@require-soap-action">false</con:setting></con:settings><con:mockOperation name="GetStopMonitoring" interface="SiriProducerRpcBinding" operation="GetStopMonitoring"><con:settings/><con:dispatchStyle>SEQUENCE</con:dispatchStyle><con:defaultResponse>Response 1</con:defaultResponse><con:response name="Response 1" encoding="UTF-8"><con:settings/><con:script>// create XmlHolder for request content
def holder = new com.eviware.soapui.support.XmlHolder( mockRequest.requestContent )
def fournisseur = "SNCF-ACCES"
// define namespace
holder.namespaces["siri"] = "http://www.siri.org.uk/siri"
// récupération de l'id message de la request
requestContext.idMessage = holder["//siri:MessageIdentifier"][0]
requestContext.monitoringRef = holder["//siri:MonitoringRef"]
requestContext.version = holder["//Request/@version"].toString()

// identifiant utilisé (en coherence avec le dataset redis)
requestContext.producerRef="SNCF-ACCES"
requestContext.recordedAtTime = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())
// Passage 1 / course 1
requestContext.itemIdenfier=fournisseur+":Item::1:LOC"
requestContext.lineRef="STIF:Line::004004009"
requestContext.dataFrameRef="any"
requestContext.datedVehicleJourneyRef=fournisseur+":VehicleJourney::1:LOC"
requestContext.journeyPatternRef=fournisseur+":JourneyPattern::1:LOC"
requestContext.journeyPatternName="mission1"
requestContext.publishedLineName="N"
requestContext.routeRef1=fournisseur+":Route::1:LOC"
requestContext.directionName="Rambouillet"
requestContext.operatorRef1=fournisseur+":Operator::SNCF:"
requestContext.originRef1="STIF:StopPoint:Q:108935:"
requestContext.originName1="Arrêt 1"
requestContext.placeRef1="STIF:StopPoint:Q:108943:"
requestContext.placeName1="Arrêt 5"
requestContext.destinationRef1="STIF:StopPoint:Q:108949:"
requestContext.destinationName1="Arrêt 10"
requestContext.vehicleJourneyName1="Course 1"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse = getHeureSuivante(1)
requestContext.originAimedDepartureTime1=heureDepartCourse.toXMLFormat();
requestContext.destinationAimedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,20,0)
//MonitoredCall
requestContext.stopPointRef1=requestContext.monitoringRef
requestContext.stopPointName1="Arrêt 2"
requestContext.aimedArrivalTime1= getAvecMinuteSeconde(heureDepartCourse,2,0).toXMLFormat()
requestContext.actualArrivalTime1= getAvecMinuteSeconde(heureDepartCourse,2,1).toXMLFormat()
requestContext.expectedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,2,2).toXMLFormat()

requestContext.aimedDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,41).toXMLFormat()
requestContext.actualDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,42).toXMLFormat()
requestContext.expectedDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,43).toXMLFormat()


// passage 2 / course 2
requestContext.monitoringRef2 = holder["//siri:MonitoringRef"]
requestContext.itemIdenfier2=fournisseur+":Item::2:LOC"
requestContext.lineRef2="STIF:Line::004004009"
requestContext.dataFrameRef2="any"
requestContext.datedVehicleJourneyRef2=fournisseur+":VehicleJourney::2:LOC"
requestContext.journeyPatternRef2=fournisseur+":JourneyPattern::2:LOC"
requestContext.routeRef2=fournisseur+":Route::1:LOC"
requestContext.operatorRef2=fournisseur+":Operator::SNCF:"
requestContext.originRef2="STIF:StopPoint:Q:108935:"
requestContext.originName2="Arrêt 1"
requestContext.placeRef2="STIF:StopPoint:Q:108943:"
requestContext.placeName2="Arrêt 5"
requestContext.destinationRef2="STIF:StopPoint:Q:108949:"
requestContext.destinationName2="Arrêt 10"
requestContext.vehicleJourneyName2="Course 2"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse2 = getHeureSuivante(2)
requestContext.originAimedDepartureTime2=heureDepartCourse2.toXMLFormat();
requestContext.destinationAimedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,20,0)
//MonitoredCall
requestContext.stopPointRef2=requestContext.monitoringRef
requestContext.stopPointName2="Arrêt 2"
requestContext.aimedArrivalTime2= getAvecMinuteSeconde(heureDepartCourse2,2,0).toXMLFormat()
requestContext.actualArrivalTime2= getAvecMinuteSeconde(heureDepartCourse2,2,1).toXMLFormat()
requestContext.expectedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,2,2).toXMLFormat()

requestContext.aimedDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,41).toXMLFormat()
requestContext.actualDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,42).toXMLFormat()
requestContext.expectedDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,43).toXMLFormat()



// Methodes utilitaires DATE
// Methode Date permettant d'avoir l'heure courante + heure
def getHeureSuivante(int heure){
	def calendar = Calendar.getInstance();
	calendar.add(Calendar.HOUR,heure);
	calendar.set(Calendar.MINUTE, 0);
	calendar.set(Calendar.SECOND, 0);
	calendar.set(Calendar.MILLISECOND, 0);
	def heureSuivante = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return heureSuivante;
}

// Methode permettant de setter les minites et secondes sur l'heure passée
def getAvecMinuteSeconde(javax.xml.datatype.XMLGregorianCalendar xmlCalendar, int minute, int seconde){ 
	Calendar calendar = xmlCalendar.toGregorianCalendar();	
	calendar.set(Calendar.MINUTE, minute);
	calendar.set(Calendar.SECOND, seconde);
	def date = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return date;
      
}
</con:script><con:responseContent><![CDATA[<!--
Cette réponse renvoie les 2 prochains passages de la ZDE STIF:StopPoint:Q:2
Passage 1 : item LOC 1 
Passage 2 : item LOC 2
-->
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsdl="http://wsdl.siri.org.uk" xmlns:siri="http://www.siri.org.uk/siri" xmlns:acsb="http://www.ifopt.org.uk/acsb" xmlns:ifop="http://www.ifopt.org.uk/ifopt">
   <soapenv:Header/>
   <soapenv:Body>
      <wsdl:GetStopMonitoringResponse>
         <ServiceDeliveryInfo>
            <siri:ResponseTimestamp>${=javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())}</siri:ResponseTimestamp>
            <siri:ProducerRef>${producerRef}</siri:ProducerRef>
            <siri:ResponseMessageIdentifier>${= UUID.randomUUID().toString()}</siri:ResponseMessageIdentifier>
		  <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
         </ServiceDeliveryInfo>
         <Answer>
            <siri:StopMonitoringDelivery version="${version}">
               <siri:ResponseTimestamp>${recordedAtTime}</siri:ResponseTimestamp>
               <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
               <siri:Status>true</siri:Status>
               <siri:MonitoringRef>${monitoringRef}</siri:MonitoringRef>
               <!-- 1 er passage-->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef}</siri:JourneyPatternRef>
                     <siri:JourneyPatternName>${journeyPatternName}</siri:JourneyPatternName>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef1}</siri:RouteRef>
                     <siri:PublishedLineName>${publishedLineName}</siri:PublishedLineName>
                     <siri:DirectionName>${directionName}</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                     <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef1}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie1</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef1}</siri:OriginRef>
                     <siri:OriginName>${originName1}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef1}</siri:PlaceRef>
                        <siri:PlaceName>${placeName1}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef1}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName1}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName1}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime1}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime1}</siri:DestinationAimedArrivalTime>
                     <siri:FirstOrLastJourney>unspecified</siri:FirstOrLastJourney>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <siri:TrainNumbers>
                        <siri:TrainNumberRef>5918</siri:TrainNumberRef>
                     </siri:TrainNumbers>
                     <!-- JourneyParts:-->
                     <siri:JourneyParts>
                        <siri:JourneyPartInfo>
                           <siri:JourneyPartRef>5409</siri:JourneyPartRef>
                           <siri:TrainNumberRef>5928:1</siri:TrainNumberRef>
                           <siri:OperatorRef>${operatorRef1}</siri:OperatorRef>
                        </siri:JourneyPartInfo>
                     </siri:JourneyParts>
                     <!-- MonitoredCall 1er passage-->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef1}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName1}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName1}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime1}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime1}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime1}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalProximityText>à l'approche</siri:ArrivalProximityText>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:ArrivalStopAssignment>
                           <siri:AimedQuayName>voie 2</siri:AimedQuayName>
                        </siri:ArrivalStopAssignment>
                        <siri:AimedDepartureTime>${aimedDepartureTime1}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime1}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime1}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                        <siri:DistanceFromStop>2300</siri:DistanceFromStop>
                        <siri:NumberOfStopsAway>3</siri:NumberOfStopsAway>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
                <!-- 2ème passage -->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier2}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef2}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef2}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef2}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef2}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef2}</siri:JourneyPatternRef>
                     <siri:JourneyPatternName>mission2</siri:JourneyPatternName>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef2}</siri:RouteRef>
                     <siri:PublishedLineName>N</siri:PublishedLineName>
                     <siri:DirectionName>Rambouillet</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                      <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef2}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie2</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef2}</siri:OriginRef>
                     <siri:OriginName>${originName2}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef2}</siri:PlaceRef>
                        <siri:PlaceName>${placeName2}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef2}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName2}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName2}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course 2</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime2}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime2}</siri:DestinationAimedArrivalTime>
                     <siri:FirstOrLastJourney>unspecified</siri:FirstOrLastJourney>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <siri:TrainNumbers>
                        <siri:TrainNumberRef>5918</siri:TrainNumberRef>
                     </siri:TrainNumbers>
                     <!-- JourneyParts:-->
                     <siri:JourneyParts>
                        <siri:JourneyPartInfo>
                           <siri:JourneyPartRef>5409</siri:JourneyPartRef>
                           <siri:TrainNumberRef>5928:1</siri:TrainNumberRef>
                           <siri:OperatorRef>${operatorRef2}</siri:OperatorRef>
                        </siri:JourneyPartInfo>
                     </siri:JourneyParts>
                     <!--  MonitoredCall 2ème passage -->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef2}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName2}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName2}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime2}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime2}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime2}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalProximityText>à l'approche</siri:ArrivalProximityText>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:ArrivalStopAssignment>
                           <siri:AimedQuayName>voie 2</siri:AimedQuayName>
                        </siri:ArrivalStopAssignment>
                        <siri:AimedDepartureTime>${aimedDepartureTime2}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime2}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime2}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                        <siri:DistanceFromStop>2300</siri:DistanceFromStop>
                        <siri:NumberOfStopsAway>3</siri:NumberOfStopsAway>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
            </siri:StopMonitoringDelivery>
         </Answer>
         <AnswerExtension>
         </AnswerExtension>
      </wsdl:GetStopMonitoringResponse>
   </soapenv:Body>
</soapenv:Envelope>]]></con:responseContent><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetStopMonitoring"/></con:response><con:dispatchConfig/></con:mockOperation><con:properties/></con:mockService><con:mockService port="8080" path="/test4Producer_2" host="cloudwatt-pc-dev-00" name="test4Producer_2" bindToHostOnly="false" docroot=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.mock.WsdlMockService@require-soap-action">false</con:setting></con:settings><con:mockOperation name="GetStopMonitoring" interface="SiriProducerRpcBinding" operation="GetStopMonitoring"><con:settings/><con:dispatchStyle>SEQUENCE</con:dispatchStyle><con:defaultResponse>Response 1</con:defaultResponse><con:response name="Response 1" encoding="UTF-8"><con:settings/><con:script>// create XmlHolder for request content
def holder = new com.eviware.soapui.support.XmlHolder( mockRequest.requestContent )
def fournisseur = "SNCF-ACCES"
// define namespace
holder.namespaces["siri"] = "http://www.siri.org.uk/siri"
// récupération de l'id message de la request
requestContext.idMessage = holder["//siri:MessageIdentifier"][0]
requestContext.monitoringRef = holder["//siri:MonitoringRef"]
requestContext.version = holder["//Request/@version"].toString()

// identifiant utilisé (en coherence avec le dataset redis)
requestContext.producerRef="SNCF-ACCES"
requestContext.recordedAtTime = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())
// Passage 1 / course 1
requestContext.itemIdenfier=fournisseur+":Item::3:LOC"
requestContext.lineRef="STIF:Line::004004009"
requestContext.dataFrameRef="any"
requestContext.datedVehicleJourneyRef=fournisseur+":VehicleJourney::1:LOC"
requestContext.journeyPatternRef=fournisseur+":JourneyPattern::1:LOC"
requestContext.journeyPatternName="mission1"
requestContext.publishedLineName="N"
requestContext.routeRef1=fournisseur+":Route::1:LOC"
requestContext.directionName="Rambouillet"
requestContext.operatorRef1=fournisseur+":Operator::SNCF:"
requestContext.originRef1="STIF:StopPoint:Q:108935:"
requestContext.originName1="Arrêt 1"
requestContext.placeRef1="STIF:StopPoint:Q:108943:"
requestContext.placeName1="Arrêt 5"
requestContext.destinationRef1="STIF:StopPoint:Q:108949:"
requestContext.destinationName1="Arrêt 10"
requestContext.vehicleJourneyName1="Course 1"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse = getHeureSuivante(1)
requestContext.originAimedDepartureTime1=heureDepartCourse.toXMLFormat();
requestContext.destinationAimedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,20,0)
//MonitoredCall
requestContext.stopPointRef1=requestContext.monitoringRef
requestContext.stopPointName1="Arrêt 2"
requestContext.aimedArrivalTime1= getAvecMinuteSeconde(heureDepartCourse,2,0).toXMLFormat()
requestContext.actualArrivalTime1= getAvecMinuteSeconde(heureDepartCourse,2,1).toXMLFormat()
requestContext.expectedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,2,2).toXMLFormat()

requestContext.aimedDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,41).toXMLFormat()
requestContext.actualDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,42).toXMLFormat()
requestContext.expectedDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,43).toXMLFormat()


// passage 2 / course 2
requestContext.monitoringRef2 = holder["//siri:MonitoringRef"]
requestContext.itemIdenfier2=fournisseur+":Item::4:LOC"
requestContext.lineRef2="STIF:Line::004004009"
requestContext.dataFrameRef2="any"
requestContext.datedVehicleJourneyRef2=fournisseur+":VehicleJourney::2:LOC"
requestContext.journeyPatternRef2=fournisseur+":JourneyPattern::2:LOC"
requestContext.routeRef2=fournisseur+":Route::1:LOC"
requestContext.operatorRef2=fournisseur+":Operator::SNCF:"
requestContext.originRef2="STIF:StopPoint:Q:108935:"
requestContext.originName2="Arrêt 1"
requestContext.placeRef2="STIF:StopPoint:Q:108943:"
requestContext.placeName2="Arrêt 5"
requestContext.destinationRef2="STIF:StopPoint:Q:108949:"
requestContext.destinationName2="Arrêt 10"
requestContext.vehicleJourneyName2="Course 2"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse2 = getHeureSuivante(2)
requestContext.originAimedDepartureTime2=heureDepartCourse2.toXMLFormat();
requestContext.destinationAimedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,20,0)
//MonitoredCall
requestContext.stopPointRef2=requestContext.monitoringRef
requestContext.stopPointName2="Arrêt 2"
requestContext.aimedArrivalTime2= getAvecMinuteSeconde(heureDepartCourse2,2,0).toXMLFormat()
requestContext.actualArrivalTime2= getAvecMinuteSeconde(heureDepartCourse2,2,1).toXMLFormat()
requestContext.expectedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,2,2).toXMLFormat()

requestContext.aimedDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,41).toXMLFormat()
requestContext.actualDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,42).toXMLFormat()
requestContext.expectedDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,43).toXMLFormat()



// Methodes utilitaires DATE
// Methode Date permettant d'avoir l'heure courante + heure
def getHeureSuivante(int heure){
	def calendar = Calendar.getInstance();
	calendar.add(Calendar.HOUR,heure);
	calendar.set(Calendar.MINUTE, 0);
	calendar.set(Calendar.SECOND, 0);
	calendar.set(Calendar.MILLISECOND, 0);
	def heureSuivante = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return heureSuivante;
}

// Methode permettant de setter les minites et secondes sur l'heure passée
def getAvecMinuteSeconde(javax.xml.datatype.XMLGregorianCalendar xmlCalendar, int minute, int seconde){ 
	Calendar calendar = xmlCalendar.toGregorianCalendar();	
	calendar.set(Calendar.MINUTE, minute);
	calendar.set(Calendar.SECOND, seconde);
	def date = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return date;
      
}
</con:script><con:responseContent><![CDATA[<!--
Cette réponse renvoie les 2 prochains passages de la ZDE STIF:StopPoint:Q:2
Passage 1 : item LOC 3 
Passage 2 : item LOC 4
-->
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsdl="http://wsdl.siri.org.uk" xmlns:siri="http://www.siri.org.uk/siri" xmlns:acsb="http://www.ifopt.org.uk/acsb" xmlns:ifop="http://www.ifopt.org.uk/ifopt">
   <soapenv:Header/>
   <soapenv:Body>
      <wsdl:GetStopMonitoringResponse>
         <ServiceDeliveryInfo>
            <siri:ResponseTimestamp>${=javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())}</siri:ResponseTimestamp>
            <siri:ProducerRef>${producerRef}</siri:ProducerRef>
            <siri:ResponseMessageIdentifier>${= UUID.randomUUID().toString()}</siri:ResponseMessageIdentifier>
		  <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
         </ServiceDeliveryInfo>
         <Answer>
            <siri:StopMonitoringDelivery version="${version}">
               <siri:ResponseTimestamp>${recordedAtTime}</siri:ResponseTimestamp>
               <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
               <siri:Status>true</siri:Status>
               <siri:MonitoringRef>${monitoringRef}</siri:MonitoringRef>
               <!-- 1 er passage-->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef}</siri:JourneyPatternRef>
                     <siri:JourneyPatternName>${journeyPatternName}</siri:JourneyPatternName>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef1}</siri:RouteRef>
                     <siri:PublishedLineName>${publishedLineName}</siri:PublishedLineName>
                     <siri:DirectionName>${directionName}</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                     <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef1}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie1</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef1}</siri:OriginRef>
                     <siri:OriginName>${originName1}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef1}</siri:PlaceRef>
                        <siri:PlaceName>${placeName1}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef1}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName1}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName1}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime1}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime1}</siri:DestinationAimedArrivalTime>
                     <siri:FirstOrLastJourney>unspecified</siri:FirstOrLastJourney>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <siri:TrainNumbers>
                        <siri:TrainNumberRef>5918</siri:TrainNumberRef>
                     </siri:TrainNumbers>
                     <!-- JourneyParts:-->
                     <siri:JourneyParts>
                        <siri:JourneyPartInfo>
                           <siri:JourneyPartRef>5409</siri:JourneyPartRef>
                           <siri:TrainNumberRef>5928:1</siri:TrainNumberRef>
                           <siri:OperatorRef>${operatorRef1}</siri:OperatorRef>
                        </siri:JourneyPartInfo>
                     </siri:JourneyParts>
                     <!-- MonitoredCall 1er passage-->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef1}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName1}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName1}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime1}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime1}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime1}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalProximityText>à l'approche</siri:ArrivalProximityText>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:ArrivalStopAssignment>
                           <siri:AimedQuayName>voie 2</siri:AimedQuayName>
                        </siri:ArrivalStopAssignment>
                        <siri:AimedDepartureTime>${aimedDepartureTime1}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime1}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime1}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                        <siri:DistanceFromStop>2300</siri:DistanceFromStop>
                        <siri:NumberOfStopsAway>3</siri:NumberOfStopsAway>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
                <!-- 2ème passage -->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier2}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef2}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef2}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef2}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef2}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef2}</siri:JourneyPatternRef>
                     <siri:JourneyPatternName>mission2</siri:JourneyPatternName>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef2}</siri:RouteRef>
                     <siri:PublishedLineName>N</siri:PublishedLineName>
                     <siri:DirectionName>Rambouillet</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                      <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef2}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie2</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef2}</siri:OriginRef>
                     <siri:OriginName>${originName2}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef2}</siri:PlaceRef>
                        <siri:PlaceName>${placeName2}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef2}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName2}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName2}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course 2</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime2}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime2}</siri:DestinationAimedArrivalTime>
                     <siri:FirstOrLastJourney>unspecified</siri:FirstOrLastJourney>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <siri:TrainNumbers>
                        <siri:TrainNumberRef>5918</siri:TrainNumberRef>
                     </siri:TrainNumbers>
                     <!-- JourneyParts:-->
                     <siri:JourneyParts>
                        <siri:JourneyPartInfo>
                           <siri:JourneyPartRef>5409</siri:JourneyPartRef>
                           <siri:TrainNumberRef>5928:1</siri:TrainNumberRef>
                           <siri:OperatorRef>${operatorRef2}</siri:OperatorRef>
                        </siri:JourneyPartInfo>
                     </siri:JourneyParts>
                     <!--  MonitoredCall 2ème passage -->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef2}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName2}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName2}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime2}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime2}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime2}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalProximityText>à l'approche</siri:ArrivalProximityText>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:ArrivalStopAssignment>
                           <siri:AimedQuayName>voie 2</siri:AimedQuayName>
                        </siri:ArrivalStopAssignment>
                        <siri:AimedDepartureTime>${aimedDepartureTime2}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime2}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime2}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                        <siri:DistanceFromStop>2300</siri:DistanceFromStop>
                        <siri:NumberOfStopsAway>3</siri:NumberOfStopsAway>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
            </siri:StopMonitoringDelivery>
         </Answer>
         <AnswerExtension>
         </AnswerExtension>
      </wsdl:GetStopMonitoringResponse>
   </soapenv:Body>
</soapenv:Envelope>]]></con:responseContent><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetStopMonitoring"/></con:response><con:dispatchConfig/></con:mockOperation><con:properties/></con:mockService><con:mockService port="8080" path="/test5Producer" host="localhost" name="test5Producer" bindToHostOnly="false" docroot=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.mock.WsdlMockService@require-soap-action">false</con:setting></con:settings><con:mockOperation name="GetStopMonitoring" interface="SiriProducerRpcBinding" operation="GetStopMonitoring"><con:settings/><con:dispatchStyle>SEQUENCE</con:dispatchStyle><con:defaultResponse>Response 1</con:defaultResponse><con:response name="Response 1" encoding="UTF-8"><con:settings/><con:script>// create XmlHolder for request content
def holder = new com.eviware.soapui.support.XmlHolder( mockRequest.requestContent )

// define namespace
holder.namespaces["siri"] = "http://www.siri.org.uk/siri"
// récupération de l'id message de la request
requestContext.idMessage = holder["//siri:MessageIdentifier"][0]
requestContext.monitoringRef = holder["//siri:MonitoringRef"]
requestContext.version = holder["//Request/@version"].toString()

// identifiant utilisé (en coherence avec le dataset redis)
requestContext.producerRef="SNCF-ACCES"
</con:script><con:responseContent><![CDATA[<!--Cette réponse renvoie une erreur NoInfoForTopic-->

<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsdl="http://wsdl.siri.org.uk" xmlns:siri="http://www.siri.org.uk/siri" xmlns:acsb="http://www.ifopt.org.uk/acsb" xmlns:ifop="http://www.ifopt.org.uk/ifopt">
   <soapenv:Header/>
   <soapenv:Body>
      <wsdl:GetStopMonitoringResponse>
         <ServiceDeliveryInfo>
            <siri:ResponseTimestamp>${=javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())}</siri:ResponseTimestamp>
            <siri:ProducerRef>${producerRef}</siri:ProducerRef>
            <siri:ResponseMessageIdentifier>${= UUID.randomUUID().toString()}</siri:ResponseMessageIdentifier>
		  <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
         </ServiceDeliveryInfo>
	    <Answer>
            <siri:StopMonitoringDelivery version="${version}">
               <siri:ResponseTimestamp>${=javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())}</siri:ResponseTimestamp>
               <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
               <siri:Status>false</siri:Status>
               <siri:ErrorCondition>
                  <siri:NoInfoForTopicError>
                     <siri:ErrorText>La requête est valide, mais aucune donnée correspondante n'est disponible sur le serveur</siri:ErrorText>
                  </siri:NoInfoForTopicError>
                  <siri:Description>La requête est valide, mais aucune donnée correspondante n'est disponible sur le serveur</siri:Description>
               </siri:ErrorCondition>
               <siri:MonitoringRef>${monitoringRef}</siri:MonitoringRef>
            </siri:StopMonitoringDelivery>
         </Answer>
      </wsdl:GetStopMonitoringResponse>
   </soapenv:Body>
</soapenv:Envelope>]]></con:responseContent><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetStopMonitoring"/></con:response><con:dispatchConfig/></con:mockOperation><con:properties/></con:mockService><con:mockService port="8080" path="/test10Producer" host="cloudwatt-pc-dev-00" name="test10Producer" bindToHostOnly="false" docroot=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.mock.WsdlMockService@require-soap-action">false</con:setting></con:settings><con:mockOperation name="GetStopMonitoring" interface="SiriProducerRpcBinding" operation="GetStopMonitoring"><con:settings/><con:dispatchStyle>SEQUENCE</con:dispatchStyle><con:defaultResponse>Response 1</con:defaultResponse><con:response name="Response 1" encoding="UTF-8"><con:settings/><con:script>// create XmlHolder for request content
def holder = new com.eviware.soapui.support.XmlHolder( mockRequest.requestContent )
def fournisseur = "SNCF-ACCES"
// define namespace
holder.namespaces["siri"] = "http://www.siri.org.uk/siri"
// récupération de l'id message de la request
requestContext.idMessage = holder["//siri:MessageIdentifier"][0]
requestContext.monitoringRef = holder["//siri:MonitoringRef"]
requestContext.version = holder["//Request/@version"].toString()

// identifiant utilisé (en coherence avec le dataset redis)
requestContext.producerRef="SNCF-ACCES"
requestContext.responseMessageIdentifier="SNCF:Message::1:LOC"
requestContext.recordedAtTime = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())
// Passage 1 / course 1
requestContext.itemIdenfier=fournisseur+":Item::1:LOC"
requestContext.lineRef="STIF:Line::004004009"
requestContext.dataFrameRef="any"
requestContext.datedVehicleJourneyRef=fournisseur+":VehicleJourney::1:LOC"
requestContext.journeyPatternRef=fournisseur+":JourneyPattern::1:LOC"
requestContext.journeyPatternName="mission1"
requestContext.routeRef1=fournisseur+":Route::1:LOC"
requestContext.operatorRef1=fournisseur+":Operator::SNCF:"
requestContext.originRef1="STIF:StopPoint:Q:7"
requestContext.originName1="Arrêt 4"
requestContext.placeRef1="STIF:StopPoint:Q:108943:"
requestContext.placeName1="Arrêt 5"
requestContext.destinationRef1="STIF:StopPoint:Q:10"
requestContext.destinationName1="Arrêt 6"
requestContext.vehicleJourneyName1="Course 1"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse = getHeureSuivante(1)
requestContext.originAimedDepartureTime1=heureDepartCourse.toXMLFormat();
requestContext.destinationAimedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,20,0)
//MonitoredCall
requestContext.stopPointRef1=requestContext.monitoringRef
requestContext.stopPointName1="Arrêt 7"
requestContext.aimedArrivalTime1= getAvecMinuteSeconde(heureDepartCourse,2,0).toXMLFormat()
requestContext.actualArrivalTime1= getAvecMinuteSeconde(heureDepartCourse,2,1).toXMLFormat()
requestContext.expectedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,2,2).toXMLFormat()

requestContext.aimedDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,41).toXMLFormat()
requestContext.actualDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,42).toXMLFormat()
requestContext.expectedDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,43).toXMLFormat()


// passage 2 / course 2
requestContext.itemIdenfier2=fournisseur+":Item::2:LOC"
requestContext.lineRef2="STIF:Line::004004009"
requestContext.dataFrameRef2="any"
requestContext.datedVehicleJourneyRef2=fournisseur+":VehicleJourney::2:LOC"
requestContext.journeyPatternRef2=fournisseur+":JourneyPattern::2:LOC"
requestContext.routeRef2=fournisseur+":Route::1:LOC"
requestContext.operatorRef2=fournisseur+":Operator::SNCF:"
requestContext.originRef2="STIF:StopPoint:Q:108935:"
requestContext.originName2="Arrêt 4"
requestContext.placeRef2="STIF:StopPoint:Q:108943:"
requestContext.placeName2="Arrêt 5"
requestContext.destinationRef2="STIF:StopPoint:Q:108949:"
requestContext.destinationName2="Arrêt 6"
requestContext.vehicleJourneyName2="Course 2"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse2 = getHeureSuivante(2)
requestContext.originAimedDepartureTime2=heureDepartCourse2.toXMLFormat();
requestContext.destinationAimedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,20,0)
//MonitoredCall
requestContext.monitoringRef2 = holder["//siri:MonitoringRef"]
requestContext.stopPointRef2=requestContext.monitoringRef
requestContext.stopPointName2="Arrêt 7"
requestContext.aimedArrivalTime2= getAvecMinuteSeconde(heureDepartCourse2,2,0).toXMLFormat()
requestContext.actualArrivalTime2= getAvecMinuteSeconde(heureDepartCourse2,2,1).toXMLFormat()
requestContext.expectedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,2,2).toXMLFormat()

requestContext.aimedDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,41).toXMLFormat()
requestContext.actualDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,42).toXMLFormat()
requestContext.expectedDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,43).toXMLFormat()



// Methodes utilitaires DATE
// Methode Date permettant d'avoir l'heure courante + heure
def getHeureSuivante(int heure){
	def calendar = Calendar.getInstance();
	calendar.add(Calendar.HOUR,heure);
	calendar.set(Calendar.MINUTE, 0);
	calendar.set(Calendar.SECOND, 0);
	calendar.set(Calendar.MILLISECOND, 0);
	def heureSuivante = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return heureSuivante;
}

// Methode permettant de setter les minites et secondes sur l'heure passée
def getAvecMinuteSeconde(javax.xml.datatype.XMLGregorianCalendar xmlCalendar, int minute, int seconde){ 
	Calendar calendar = xmlCalendar.toGregorianCalendar();	
	calendar.set(Calendar.MINUTE, minute);
	calendar.set(Calendar.SECOND, seconde);
	def date = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return date;
      
}
</con:script><con:responseContent><![CDATA[<!--
Cette réponse renvoie un message non valide SIRI
-->
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsdl="http://wsdl.siri.org.uk" xmlns:siri="http://www.siri.org.uk/siri" xmlns:acsb="http://www.ifopt.org.uk/acsb" xmlns:ifop="http://www.ifopt.org.uk/ifopt">
   <soapenv:Header/>
   <soapenv:Body>
      <wsdl:GetStopMonitoringResponse>
        <!-- Absence du chevron --> 
        <ServiceDeliveryInfo
            <siri:ResponseTimestamp>${=javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())}</siri:ResponseTimestamp>
            <siri:ProducerRef>${producerRef}</siri:ProducerRef>
            <siri:ResponseMessageIdentifier>${responseMessageIdentifier}</siri:ResponseMessageIdentifier>
		  <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
         </ServiceDeliveryInfo>
         <Answer>
            <siri:StopMonitoringDelivery version="${version}">
               <siri:ResponseTimestamp>${recordedAtTime}</siri:ResponseTimestamp>
               <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
               <siri:Status>true</siri:Status>
               <siri:MonitoringRef>${monitoringRef}</siri:MonitoringRef>
               <!-- 1 er passage-->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef}</siri:JourneyPatternRef>
                     <siri:JourneyPatternName>${journeyPatternName}</siri:JourneyPatternName>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef1}</siri:RouteRef>
                     <siri:PublishedLineName>N</siri:PublishedLineName>
                     <siri:DirectionName>Rambouillet</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                     <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef1}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie1</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef1}</siri:OriginRef>
                     <siri:OriginName>${originName1}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef1}</siri:PlaceRef>
                        <siri:PlaceName>${placeName1}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef1}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName1}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName1}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime1}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime1}</siri:DestinationAimedArrivalTime>
                     <siri:FirstOrLastJourney>unspecified</siri:FirstOrLastJourney>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <siri:TrainNumbers>
                        <siri:TrainNumberRef>5918</siri:TrainNumberRef>
                     </siri:TrainNumbers>
                     <!-- JourneyParts:-->
                     <siri:JourneyParts>
                        <siri:JourneyPartInfo>
                           <siri:JourneyPartRef>5409</siri:JourneyPartRef>
                           <siri:TrainNumberRef>5928:1</siri:TrainNumberRef>
                           <siri:OperatorRef>${operatorRef1}</siri:OperatorRef>
                        </siri:JourneyPartInfo>
                     </siri:JourneyParts>
                     <!-- MonitoredCall 1er passage-->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef1}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName1}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName1}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime1}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime1}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime1}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalProximityText>à l'approche</siri:ArrivalProximityText>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:ArrivalStopAssignment>
                           <siri:AimedQuayName>voie 2</siri:AimedQuayName>
                        </siri:ArrivalStopAssignment>
                        <siri:AimedDepartureTime>${aimedDepartureTime1}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime1}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime1}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                        <siri:DistanceFromStop>2300</siri:DistanceFromStop>
                        <siri:NumberOfStopsAway>3</siri:NumberOfStopsAway>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
                <!-- 2ème passage -->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier2}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef2}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef2}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef2}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef2}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef2}</siri:JourneyPatternRef>
                     <siri:JourneyPatternName>mission2</siri:JourneyPatternName>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef2}</siri:RouteRef>
                     <siri:PublishedLineName>N</siri:PublishedLineName>
                     <siri:DirectionName>Rambouillet</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                      <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef2}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie2</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef2}</siri:OriginRef>
                     <siri:OriginName>${originName2}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef2}</siri:PlaceRef>
                        <siri:PlaceName>${placeName2}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef2}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName2}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName2}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course 2</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime2}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime2}</siri:DestinationAimedArrivalTime>
                     <siri:FirstOrLastJourney>unspecified</siri:FirstOrLastJourney>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <siri:TrainNumbers>
                        <siri:TrainNumberRef>5918</siri:TrainNumberRef>
                     </siri:TrainNumbers>
                     <!-- JourneyParts:-->
                     <siri:JourneyParts>
                        <siri:JourneyPartInfo>
                           <siri:JourneyPartRef>5409</siri:JourneyPartRef>
                           <siri:TrainNumberRef>5928:1</siri:TrainNumberRef>
                           <siri:OperatorRef>${operatorRef2}</siri:OperatorRef>
                        </siri:JourneyPartInfo>
                     </siri:JourneyParts>
                     <!--  MonitoredCall 2ème passage -->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef2}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName2}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName2}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime2}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime2}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime2}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalProximityText>à l'approche</siri:ArrivalProximityText>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:ArrivalStopAssignment>
                           <siri:AimedQuayName>voie 2</siri:AimedQuayName>
                        </siri:ArrivalStopAssignment>
                        <siri:AimedDepartureTime>${aimedDepartureTime2}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime2}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime2}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                        <siri:DistanceFromStop>2300</siri:DistanceFromStop>
                        <siri:NumberOfStopsAway>3</siri:NumberOfStopsAway>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
            </siri:StopMonitoringDelivery>
         </Answer>
         <AnswerExtension>
         </AnswerExtension>
      </wsdl:GetStopMonitoringResponse>
   </soapenv:Body>
</soapenv:Envelope>]]></con:responseContent><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetStopMonitoring"/></con:response><con:dispatchConfig/></con:mockOperation><con:properties/></con:mockService><con:mockService port="8080" path="/test35Producer" host="L276002" name="test35Producer" bindToHostOnly="false" docroot=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.mock.WsdlMockService@require-soap-action">false</con:setting></con:settings><con:mockOperation name="GetStopMonitoring" interface="SiriProducerRpcBinding" operation="GetStopMonitoring"><con:settings/><con:dispatchStyle>SEQUENCE</con:dispatchStyle><con:defaultResponse>Response 1</con:defaultResponse><con:response name="Response 1" encoding="UTF-8"><con:settings/><con:script>// create XmlHolder for request content
def holder = new com.eviware.soapui.support.XmlHolder( mockRequest.requestContent )
def fournisseur = "SNCF-ACCES"
// define namespace
holder.namespaces["siri"] = "http://www.siri.org.uk/siri"
// récupération de l'id message de la request
requestContext.idMessage = holder["//siri:MessageIdentifier"][0]
requestContext.monitoringRef = holder["//siri:MonitoringRef"]
requestContext.version = holder["//Request/@version"].toString()

// identifiant utilisé (en coherence avec le dataset redis)
requestContext.producerRef="SNCF-ACCES"
requestContext.recordedAtTime = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())
// Passage 1 / course 1
requestContext.itemIdenfier=fournisseur+":Item::1:LOC"
requestContext.lineRef="STIF:Line::004004009"
requestContext.dataFrameRef="any"
requestContext.datedVehicleJourneyRef=fournisseur+":VehicleJourney::1:LOC"
requestContext.journeyPatternRef=fournisseur+":JourneyPattern::1:LOC"
requestContext.journeyPatternName="mission1"
requestContext.publishedLineName="N"
requestContext.routeRef1=fournisseur+":Route::1:LOC"
requestContext.directionName="Rambouillet"
requestContext.operatorRef1=fournisseur+":Operator::SNCF:"
requestContext.originRef1="STIF:StopPoint:Q:108935:"
requestContext.originName1="Arrêt 1"
requestContext.placeRef1="STIF:StopPoint:Q:108943:"
requestContext.placeName1="Arrêt 5"
requestContext.destinationRef1="STIF:StopPoint:Q:108949:"
requestContext.destinationName1="Arrêt 10"
requestContext.vehicleJourneyName1="Course 1"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse = getHeureSuivante(1)
requestContext.originAimedDepartureTime1=heureDepartCourse.toXMLFormat();
requestContext.destinationAimedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,20,0)
//MonitoredCall
requestContext.stopPointRef1=requestContext.monitoringRef
requestContext.stopPointName1="Arrêt 2"
requestContext.aimedArrivalTime1= getAvecMinuteSeconde(heureDepartCourse,2,0).toXMLFormat()
requestContext.actualArrivalTime1= getAvecMinuteSeconde(heureDepartCourse,2,1).toXMLFormat()
requestContext.expectedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,2,2).toXMLFormat()

requestContext.aimedDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,41).toXMLFormat()
requestContext.actualDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,42).toXMLFormat()
requestContext.expectedDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,43).toXMLFormat()


// passage 2 / course 2
requestContext.monitoringRef2 = holder["//siri:MonitoringRef"]
requestContext.itemIdenfier2=fournisseur+":Item::2:LOC"
requestContext.lineRef2="STIF:Line::004004009"
requestContext.dataFrameRef2="any"
requestContext.datedVehicleJourneyRef2=fournisseur+":VehicleJourney::2:LOC"
requestContext.journeyPatternRef2=fournisseur+":JourneyPattern::2:LOC"
requestContext.routeRef2=fournisseur+":Route::1:LOC"
requestContext.operatorRef2=fournisseur+":Operator::SNCF:"
requestContext.originRef2="STIF:StopPoint:Q:108935:"
requestContext.originName2="Arrêt 1"
requestContext.placeRef2="STIF:StopPoint:Q:108943:"
requestContext.placeName2="Arrêt 5"
requestContext.destinationRef2="STIF:StopPoint:Q:108949:"
requestContext.destinationName2="Arrêt 10"
requestContext.vehicleJourneyName2="Course 2"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse2 = getHeureSuivante(2)
requestContext.originAimedDepartureTime2=heureDepartCourse2.toXMLFormat();
requestContext.destinationAimedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,20,0)
//MonitoredCall
requestContext.stopPointRef2=requestContext.monitoringRef
requestContext.stopPointName2="Arrêt 2"
requestContext.aimedArrivalTime2= getAvecMinuteSeconde(heureDepartCourse2,2,0).toXMLFormat()
requestContext.actualArrivalTime2= getAvecMinuteSeconde(heureDepartCourse2,2,1).toXMLFormat()
requestContext.expectedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,2,2).toXMLFormat()

requestContext.aimedDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,41).toXMLFormat()
requestContext.actualDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,42).toXMLFormat()
requestContext.expectedDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,43).toXMLFormat()



// Methodes utilitaires DATE
// Methode Date permettant d'avoir l'heure courante + heure
def getHeureSuivante(int heure){
	def calendar = Calendar.getInstance();
	calendar.add(Calendar.HOUR,heure);
	calendar.set(Calendar.MINUTE, 0);
	calendar.set(Calendar.SECOND, 0);
	calendar.set(Calendar.MILLISECOND, 0);
	def heureSuivante = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return heureSuivante;
}

// Methode permettant de setter les minites et secondes sur l'heure passée
def getAvecMinuteSeconde(javax.xml.datatype.XMLGregorianCalendar xmlCalendar, int minute, int seconde){ 
	Calendar calendar = xmlCalendar.toGregorianCalendar();	
	calendar.set(Calendar.MINUTE, minute);
	calendar.set(Calendar.SECOND, seconde);
	def date = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return date;
      
}
</con:script><con:responseContent><![CDATA[<!--
Cette réponse renvoie les 2 prochains passages de la ZDE STIF:StopPoint:Q:2
Passage 1 : heure courante + 1
Passage 2 : heure courante + 2
-->
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsdl="http://wsdl.siri.org.uk" xmlns:siri="http://www.siri.org.uk/siri" xmlns:acsb="http://www.ifopt.org.uk/acsb" xmlns:ifop="http://www.ifopt.org.uk/ifopt">
   <soapenv:Header/>
   <soapenv:Body>
      <wsdl:GetStopMonitoringResponse>
         <ServiceDeliveryInfo>
            <siri:ResponseTimestamp>${=javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())}</siri:ResponseTimestamp>
            <siri:ProducerRef>${producerRef}</siri:ProducerRef>
            <siri:ResponseMessageIdentifier>${= UUID.randomUUID().toString()}</siri:ResponseMessageIdentifier>
		  <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
         </ServiceDeliveryInfo>
         <Answer>
            <siri:StopMonitoringDelivery version="${version}">
               <siri:ResponseTimestamp>${recordedAtTime}</siri:ResponseTimestamp>
               <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
               <siri:Status>true</siri:Status>
               <siri:MonitoringRef>${monitoringRef}</siri:MonitoringRef>
               <!-- 1 er passage-->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef}</siri:JourneyPatternRef>
                     <siri:JourneyPatternName>${journeyPatternName}</siri:JourneyPatternName>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef1}</siri:RouteRef>
                     <siri:PublishedLineName>${publishedLineName}</siri:PublishedLineName>
                     <siri:DirectionName>${directionName}</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                     <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef1}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie1</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef1}</siri:OriginRef>
                     <siri:OriginName>${originName1}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef1}</siri:PlaceRef>
                        <siri:PlaceName>${placeName1}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef1}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName1}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName1}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime1}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime1}</siri:DestinationAimedArrivalTime>
                     <siri:FirstOrLastJourney>unspecified</siri:FirstOrLastJourney>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <siri:TrainNumbers>
                        <siri:TrainNumberRef>5918</siri:TrainNumberRef>
                     </siri:TrainNumbers>
                     <!-- JourneyParts:-->
                     <siri:JourneyParts>
                        <siri:JourneyPartInfo>
                           <siri:JourneyPartRef>5409</siri:JourneyPartRef>
                           <siri:TrainNumberRef>5928:1</siri:TrainNumberRef>
                           <siri:OperatorRef>${operatorRef1}</siri:OperatorRef>
                        </siri:JourneyPartInfo>
                     </siri:JourneyParts>
                     <!-- MonitoredCall 1er passage-->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef1}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName1}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName1}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime1}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime1}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime1}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalProximityText>à l'approche</siri:ArrivalProximityText>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:ArrivalStopAssignment>
                           <siri:AimedQuayName>voie 2</siri:AimedQuayName>
                        </siri:ArrivalStopAssignment>
                        <siri:AimedDepartureTime>${aimedDepartureTime1}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime1}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime1}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                        <siri:DistanceFromStop>2300</siri:DistanceFromStop>
                        <siri:NumberOfStopsAway>3</siri:NumberOfStopsAway>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
                <!-- 2ème passage -->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier2}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef2}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef2}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef2}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef2}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef2}</siri:JourneyPatternRef>
                     <siri:JourneyPatternName>mission2</siri:JourneyPatternName>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef2}</siri:RouteRef>
                     <siri:PublishedLineName>N</siri:PublishedLineName>
                     <siri:DirectionName>Rambouillet</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                      <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef2}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie2</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef2}</siri:OriginRef>
                     <siri:OriginName>${originName2}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef2}</siri:PlaceRef>
                        <siri:PlaceName>${placeName2}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef2}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName2}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName2}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course 2</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime2}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime2}</siri:DestinationAimedArrivalTime>
                     <siri:FirstOrLastJourney>unspecified</siri:FirstOrLastJourney>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <siri:TrainNumbers>
                        <siri:TrainNumberRef>5918</siri:TrainNumberRef>
                     </siri:TrainNumbers>
                     <!-- JourneyParts:-->
                     <siri:JourneyParts>
                        <siri:JourneyPartInfo>
                           <siri:JourneyPartRef>5409</siri:JourneyPartRef>
                           <siri:TrainNumberRef>5928:1</siri:TrainNumberRef>
                           <siri:OperatorRef>${operatorRef2}</siri:OperatorRef>
                        </siri:JourneyPartInfo>
                     </siri:JourneyParts>
                     <!--  MonitoredCall 2ème passage -->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef2}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName2}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName2}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime2}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime2}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime2}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalProximityText>à l'approche</siri:ArrivalProximityText>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:ArrivalStopAssignment>
                           <siri:AimedQuayName>voie 2</siri:AimedQuayName>
                        </siri:ArrivalStopAssignment>
                        <siri:AimedDepartureTime>${aimedDepartureTime2}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime2}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime2}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                        <siri:DistanceFromStop>2300</siri:DistanceFromStop>
                        <siri:NumberOfStopsAway>3</siri:NumberOfStopsAway>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
            </siri:StopMonitoringDelivery>
         </Answer>
         <AnswerExtension>
         </AnswerExtension>
      </wsdl:GetStopMonitoringResponse>
   </soapenv:Body>
</soapenv:Envelope>]]></con:responseContent><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetStopMonitoring"/></con:response><con:dispatchConfig/></con:mockOperation><con:properties/></con:mockService><con:mockService port="8080" path="/test11Producer" host="cloudwatt-pc-dev-00" name="test11Producer" bindToHostOnly="false" docroot=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.mock.WsdlMockService@require-soap-action">false</con:setting></con:settings><con:mockOperation name="GetStopMonitoring" interface="SiriProducerRpcBinding" operation="GetStopMonitoring"><con:settings/><con:dispatchStyle>SEQUENCE</con:dispatchStyle><con:defaultResponse>Response 1</con:defaultResponse><con:response name="Response 1" encoding="UTF-8"><con:settings/><con:script>// create XmlHolder for request content
def holder = new com.eviware.soapui.support.XmlHolder( mockRequest.requestContent )
def fournisseur = "SNCF-ACCES"
// define namespace
holder.namespaces["siri"] = "http://www.siri.org.uk/siri"
// récupération de l'id message de la request
requestContext.idMessage = holder["//siri:MessageIdentifier"][0]
requestContext.monitoringRef = holder["//siri:MonitoringRef"]
requestContext.version = holder["//Request/@version"].toString()

// identifiant utilisé (en coherence avec le dataset redis)
requestContext.producerRef="SNCF"
requestContext.recordedAtTime = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())
// Passage 1 / course 1
requestContext.itemIdenfier=fournisseur+":Item::1:LOC"
requestContext.lineRef="STIF:Line::004004009"
requestContext.dataFrameRef="any"
requestContext.datedVehicleJourneyRef=fournisseur+":VehicleJourney::1:LOC"
requestContext.journeyPatternRef=fournisseur+":JourneyPattern::1:LOC"
requestContext.journeyPatternName="mission1"
requestContext.publishedLineName="N"
requestContext.routeRef1=fournisseur+":Route::1:LOC"
requestContext.directionName="Rambouillet"
requestContext.operatorRef1=fournisseur+":Operator::SNCF:"
requestContext.originRef1="STIF:StopPoint:Q:108935:"
requestContext.originName1="Arrêt 1"
requestContext.placeRef1="STIF:StopPoint:Q:108943:"
requestContext.placeName1="Arrêt 5"
requestContext.destinationRef1="STIF:StopPoint:Q:108949:"
requestContext.destinationName1="Arrêt 10"
requestContext.vehicleJourneyName1="Course 1"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse = getHeureSuivante(1)
requestContext.originAimedDepartureTime1=heureDepartCourse.toXMLFormat();
requestContext.destinationAimedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,20,0)
//MonitoredCall
requestContext.stopPointRef1=requestContext.monitoringRef
requestContext.stopPointName1="Arrêt 2"
requestContext.aimedArrivalTime1= getAvecMinuteSeconde(heureDepartCourse,2,0).toXMLFormat()
requestContext.actualArrivalTime1= getAvecMinuteSeconde(heureDepartCourse,2,1).toXMLFormat()
requestContext.expectedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,2,2).toXMLFormat()

requestContext.aimedDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,41).toXMLFormat()
requestContext.actualDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,42).toXMLFormat()
requestContext.expectedDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,43).toXMLFormat()


// passage 2 / course 2
requestContext.monitoringRef2 = holder["//siri:MonitoringRef"]
requestContext.itemIdenfier2=fournisseur+":Item::2:LOC"
requestContext.lineRef2="STIF:Line::004004009"
requestContext.dataFrameRef2="any"
requestContext.datedVehicleJourneyRef2=fournisseur+":VehicleJourney::2:LOC"
requestContext.journeyPatternRef2=fournisseur+":JourneyPattern::2:LOC"
requestContext.routeRef2=fournisseur+":Route::1:LOC"
requestContext.operatorRef2=fournisseur+":Operator::SNCF:"
requestContext.originRef2="STIF:StopPoint:Q:108935:"
requestContext.originName2="Arrêt 1"
requestContext.placeRef2="STIF:StopPoint:Q:108943:"
requestContext.placeName2="Arrêt 5"
requestContext.destinationRef2="STIF:StopPoint:Q:108949:"
requestContext.destinationName2="Arrêt 10"
requestContext.vehicleJourneyName2="Course 2"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse2 = getHeureSuivante(2)
requestContext.originAimedDepartureTime2=heureDepartCourse2.toXMLFormat();
requestContext.destinationAimedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,20,0)
//MonitoredCall
requestContext.stopPointRef2=requestContext.monitoringRef
requestContext.stopPointName2="Arrêt 2"
requestContext.aimedArrivalTime2= getAvecMinuteSeconde(heureDepartCourse2,2,0).toXMLFormat()
requestContext.actualArrivalTime2= getAvecMinuteSeconde(heureDepartCourse2,2,1).toXMLFormat()
requestContext.expectedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,2,2).toXMLFormat()

requestContext.aimedDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,41).toXMLFormat()
requestContext.actualDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,42).toXMLFormat()
requestContext.expectedDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,43).toXMLFormat()



// Methodes utilitaires DATE
// Methode Date permettant d'avoir l'heure courante + heure
def getHeureSuivante(int heure){
	def calendar = Calendar.getInstance();
	calendar.add(Calendar.HOUR,heure);
	calendar.set(Calendar.MINUTE, 0);
	calendar.set(Calendar.SECOND, 0);
	calendar.set(Calendar.MILLISECOND, 0);
	def heureSuivante = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return heureSuivante;
}

// Methode permettant de setter les minites et secondes sur l'heure passée
def getAvecMinuteSeconde(javax.xml.datatype.XMLGregorianCalendar xmlCalendar, int minute, int seconde){ 
	Calendar calendar = xmlCalendar.toGregorianCalendar();	
	calendar.set(Calendar.MINUTE, minute);
	calendar.set(Calendar.SECOND, seconde);
	def date = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return date;
      
}
</con:script><con:responseContent><![CDATA[<!--
Cette réponse renvoie les 2 prochains passages de la ZDE STIF:StopPoint:Q:2 d'un partenaire non présent dans le référentiel des partenaires.
-->

<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsdl="http://wsdl.siri.org.uk" xmlns:siri="http://www.siri.org.uk/siri" xmlns:acsb="http://www.ifopt.org.uk/acsb" xmlns:ifop="http://www.ifopt.org.uk/ifopt">
   <soapenv:Header/>
   <soapenv:Body>
      <wsdl:GetStopMonitoringResponse>
         <ServiceDeliveryInfo>
            <siri:ResponseTimestamp>${=javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())}</siri:ResponseTimestamp>
            <siri:ProducerRef>${producerRef}</siri:ProducerRef>
            <siri:ResponseMessageIdentifier>${= UUID.randomUUID().toString()}</siri:ResponseMessageIdentifier>
		  <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
         </ServiceDeliveryInfo>
         <Answer>
            <siri:StopMonitoringDelivery version="${version}">
               <siri:ResponseTimestamp>${recordedAtTime}</siri:ResponseTimestamp>
               <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
               <siri:Status>true</siri:Status>
               <siri:MonitoringRef>${monitoringRef}</siri:MonitoringRef>
               <!-- 1 er passage-->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef}</siri:JourneyPatternRef>
                     <siri:JourneyPatternName>${journeyPatternName}</siri:JourneyPatternName>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef1}</siri:RouteRef>
                     <siri:PublishedLineName>${publishedLineName}</siri:PublishedLineName>
                     <siri:DirectionName>${directionName}</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                     <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef1}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie1</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef1}</siri:OriginRef>
                     <siri:OriginName>${originName1}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef1}</siri:PlaceRef>
                        <siri:PlaceName>${placeName1}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef1}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName1}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName1}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime1}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime1}</siri:DestinationAimedArrivalTime>
                     <siri:FirstOrLastJourney>unspecified</siri:FirstOrLastJourney>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <siri:TrainNumbers>
                        <siri:TrainNumberRef>5918</siri:TrainNumberRef>
                     </siri:TrainNumbers>
                     <!-- JourneyParts:-->
                     <siri:JourneyParts>
                        <siri:JourneyPartInfo>
                           <siri:JourneyPartRef>5409</siri:JourneyPartRef>
                           <siri:TrainNumberRef>5928:1</siri:TrainNumberRef>
                           <siri:OperatorRef>${operatorRef1}</siri:OperatorRef>
                        </siri:JourneyPartInfo>
                     </siri:JourneyParts>
                     <!-- MonitoredCall 1er passage-->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef1}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName1}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName1}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime1}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime1}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime1}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalProximityText>à l'approche</siri:ArrivalProximityText>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:ArrivalStopAssignment>
                           <siri:AimedQuayName>voie 2</siri:AimedQuayName>
                        </siri:ArrivalStopAssignment>
                        <siri:AimedDepartureTime>${aimedDepartureTime1}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime1}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime1}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                        <siri:DistanceFromStop>2300</siri:DistanceFromStop>
                        <siri:NumberOfStopsAway>3</siri:NumberOfStopsAway>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
                <!-- 2ème passage -->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier2}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef2}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef2}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef2}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef2}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef2}</siri:JourneyPatternRef>
                     <siri:JourneyPatternName>mission2</siri:JourneyPatternName>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef2}</siri:RouteRef>
                     <siri:PublishedLineName>N</siri:PublishedLineName>
                     <siri:DirectionName>Rambouillet</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                      <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef2}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie2</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef2}</siri:OriginRef>
                     <siri:OriginName>${originName2}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef2}</siri:PlaceRef>
                        <siri:PlaceName>${placeName2}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef2}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName2}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName2}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course 2</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime2}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime2}</siri:DestinationAimedArrivalTime>
                     <siri:FirstOrLastJourney>unspecified</siri:FirstOrLastJourney>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <siri:TrainNumbers>
                        <siri:TrainNumberRef>5918</siri:TrainNumberRef>
                     </siri:TrainNumbers>
                     <!-- JourneyParts:-->
                     <siri:JourneyParts>
                        <siri:JourneyPartInfo>
                           <siri:JourneyPartRef>5409</siri:JourneyPartRef>
                           <siri:TrainNumberRef>5928:1</siri:TrainNumberRef>
                           <siri:OperatorRef>${operatorRef2}</siri:OperatorRef>
                        </siri:JourneyPartInfo>
                     </siri:JourneyParts>
                     <!--  MonitoredCall 2ème passage -->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef2}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName2}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName2}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime2}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime2}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime2}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalProximityText>à l'approche</siri:ArrivalProximityText>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:ArrivalStopAssignment>
                           <siri:AimedQuayName>voie 2</siri:AimedQuayName>
                        </siri:ArrivalStopAssignment>
                        <siri:AimedDepartureTime>${aimedDepartureTime2}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime2}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime2}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                        <siri:DistanceFromStop>2300</siri:DistanceFromStop>
                        <siri:NumberOfStopsAway>3</siri:NumberOfStopsAway>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
            </siri:StopMonitoringDelivery>
         </Answer>
         <AnswerExtension>
         </AnswerExtension>
      </wsdl:GetStopMonitoringResponse>
   </soapenv:Body>
</soapenv:Envelope>]]></con:responseContent><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetStopMonitoring"/></con:response><con:dispatchConfig/></con:mockOperation><con:properties/></con:mockService><con:mockService port="8080" path="/" host="cloudwatt-pc-dev-00" name="test79Producer"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.mock.WsdlMockService@require-soap-action">false</con:setting></con:settings><con:mockOperation name="GetSiriService" interface="SiriProducerRpcBinding" operation="GetSiriService"><con:settings/><con:dispatchStyle>QUERY_MATCH</con:dispatchStyle><con:defaultResponse>MockResponse 2</con:defaultResponse><con:response name="Response 1" encoding="UTF-8"><con:settings/><con:script>// create XmlHolder for request content
def holder = new com.eviware.soapui.support.XmlHolder( mockRequest.requestContent )
def fournisseur = "SNCF-ACCES"
// define namespace
holder.namespaces["siri"] = "http://www.siri.org.uk/siri"
// récupération de l'id message de la request
requestContext.idMessage = holder["//siri:MessageIdentifier"][0]
requestContext.monitoringRef = holder["//siri:MonitoringRef"]
requestContext.version = holder["//Request/@version"].toString()

// identifiant utilisé (en coherence avec le dataset redis)
requestContext.producerRef="SNCF-ACCES"
requestContext.recordedAtTime = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())
// Passage 1 / course 1
requestContext.itemIdenfier=fournisseur+":Item::1:LOC"
requestContext.lineRef="STIF:Line::004004009"
requestContext.dataFrameRef="any"
requestContext.datedVehicleJourneyRef=fournisseur+":VehicleJourney::1:LOC"
requestContext.journeyPatternRef=fournisseur+":JourneyPattern::1:LOC"
requestContext.journeyPatternName="mission1"
requestContext.publishedLineName="N"
requestContext.routeRef1=fournisseur+":Route::1:LOC"
requestContext.directionName="Rambouillet"
requestContext.operatorRef1=fournisseur+":Operator::SNCF:"
requestContext.originRef1="STIF:StopPoint:Q:108935:"
requestContext.originName1="Arrêt 1"
requestContext.placeRef1="STIF:StopPoint:Q:108943:"
requestContext.placeName1="Arrêt 5"
requestContext.destinationRef1="STIF:StopPoint:Q:108949:"
requestContext.destinationName1="Arrêt 10"
requestContext.vehicleJourneyName1="Course 1"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse = getHeureSuivante(1)
requestContext.originAimedDepartureTime1=heureDepartCourse.toXMLFormat();
requestContext.destinationAimedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,20,0)
//MonitoredCall
requestContext.stopPointRef1=requestContext.monitoringRef
requestContext.stopPointName1="Arrêt 2"
requestContext.aimedArrivalTime1= getAvecMinuteSeconde(heureDepartCourse,2,0).toXMLFormat()
requestContext.actualArrivalTime1= getAvecMinuteSeconde(heureDepartCourse,2,1).toXMLFormat()
requestContext.expectedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,2,2).toXMLFormat()

requestContext.aimedDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,41).toXMLFormat()
requestContext.actualDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,42).toXMLFormat()
requestContext.expectedDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,43).toXMLFormat()




// passage 2 / course 2
requestContext.monitoringRef2 = holder["//siri:MonitoringRef"]
requestContext.itemIdenfier2=fournisseur+":Item::2:LOC"
requestContext.lineRef2="STIF:Line::004004009"
requestContext.dataFrameRef2="any"
requestContext.datedVehicleJourneyRef2=fournisseur+":VehicleJourney::2:LOC"
requestContext.journeyPatternRef2=fournisseur+":JourneyPattern::2:LOC"
requestContext.routeRef2=fournisseur+":Route::1:LOC"
requestContext.operatorRef2=fournisseur+":Operator::SNCF:"
requestContext.originRef2="STIF:StopPoint:Q:108935:"
requestContext.originName2="Arrêt 1"
requestContext.placeRef2="STIF:StopPoint:Q:108943:"
requestContext.placeName2="Arrêt 5"
requestContext.destinationRef2="STIF:StopPoint:Q:108949:"
requestContext.destinationName2="Arrêt 10"
requestContext.vehicleJourneyName2="Course 2"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse2 = getHeureSuivante(2)
requestContext.originAimedDepartureTime2=heureDepartCourse2.toXMLFormat();
requestContext.destinationAimedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,20,0)
//MonitoredCall
requestContext.stopPointRef2=requestContext.monitoringRef
requestContext.stopPointName2="Arrêt 2"
requestContext.aimedArrivalTime2= getAvecMinuteSeconde(heureDepartCourse2,2,0).toXMLFormat()
requestContext.actualArrivalTime2= getAvecMinuteSeconde(heureDepartCourse2,2,1).toXMLFormat()
requestContext.expectedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,2,2).toXMLFormat()

requestContext.aimedDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,41).toXMLFormat()
requestContext.actualDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,42).toXMLFormat()
requestContext.expectedDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,43).toXMLFormat()



// Methodes utilitaires DATE
// Methode Date permettant d'avoir l'heure courante + heure
def getHeureSuivante(int heure){
	def calendar = Calendar.getInstance();
	calendar.add(Calendar.HOUR,heure);
	calendar.set(Calendar.MINUTE, 0);
	calendar.set(Calendar.SECOND, 0);
	calendar.set(Calendar.MILLISECOND, 0);
	def heureSuivante = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return heureSuivante;
}

// Methode permettant de setter les minites et secondes sur l'heure passée
def getAvecMinuteSeconde(javax.xml.datatype.XMLGregorianCalendar xmlCalendar, int minute, int seconde){ 
	Calendar calendar = xmlCalendar.toGregorianCalendar();	
	calendar.set(Calendar.MINUTE, minute);
	calendar.set(Calendar.SECOND, seconde);
	def date = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return date;
      
}


</con:script><con:responseContent><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsdl="http://wsdl.siri.org.uk" xmlns:siri="http://www.siri.org.uk/siri" xmlns:acsb="http://www.ifopt.org.uk/acsb" xmlns:ifop="http://www.ifopt.org.uk/ifopt" xmlns:_0="http://datex2.eu/schema/2_0RC1/2_0">
   <soapenv:Header/>
   <soapenv:Body>
      <wsdl:GetSiriServiceResponse>
         <Answer srsName="1">
            <siri:ResponseTimestamp>${=javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())}</siri:ResponseTimestamp>
            <!--Optional:-->
            <siri:ProducerRef>${producerRef}</siri:ProducerRef>
            <siri:ResponseMessageIdentifier>${= UUID.randomUUID().toString()}</siri:ResponseMessageIdentifier>
            <!--Optional:-->
            <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
            <!--Optional:-->
            <siri:Status>true</siri:Status>
            <!--Optional:-->
            <siri:MoreData>false</siri:MoreData>
            <siri:StopMonitoringDelivery version="2.0[FR-IDF-2.4]">
               <siri:ResponseTimestamp>${recordedAtTime}</siri:ResponseTimestamp>
               <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
               <siri:Status>true</siri:Status>
               <siri:ErrorCondition>
                  <siri:InvalidDataReferencesError number="12">
                     <!--Optional:-->
                     <siri:ErrorText>invalidDataReferencesError</siri:ErrorText>
                  </siri:InvalidDataReferencesError>
                  <siri:BeyondDataHorizon number="15">
                     <!--Optional:-->
                     <siri:ErrorText>beyondDataHorizon</siri:ErrorText>
                  </siri:BeyondDataHorizon>
                  <!--Optional:-->
                  <siri:Description>description</siri:Description>
               </siri:ErrorCondition>
               <siri:MonitoringRef>${monitoringRef}</siri:MonitoringRef>
               <siri:MonitoringRef>STIF:StopPoint:Q:108941:</siri:MonitoringRef>
               <siri:MonitoringRef>STIF:StopPoint:Q:108942:</siri:MonitoringRef>
               <siri:MonitoringRef>STIF:StopPoint:Q:108943:</siri:MonitoringRef>
               <siri:MonitoringRef>STIF:StopPoint:Q:108944:</siri:MonitoringRef>
               <!-- 1 er passage-->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef}</siri:JourneyPatternRef>
                     <siri:JourneyPatternName>${journeyPatternName}</siri:JourneyPatternName>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef1}</siri:RouteRef>
                     <siri:PublishedLineName>${publishedLineName}</siri:PublishedLineName>
                     <siri:DirectionName>${directionName}</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                     <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef1}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie1</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef1}</siri:OriginRef>
                     <siri:OriginName>${originName1}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef1}</siri:PlaceRef>
                        <siri:PlaceName>${placeName1}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef1}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName1}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName1}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime1}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime1}</siri:DestinationAimedArrivalTime>
                     <siri:FirstOrLastJourney>unspecified</siri:FirstOrLastJourney>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <siri:TrainNumbers>
                        <siri:TrainNumberRef>5918</siri:TrainNumberRef>
                     </siri:TrainNumbers>
                     <!-- JourneyParts:-->
                     <siri:JourneyParts>
                        <siri:JourneyPartInfo>
                           <siri:JourneyPartRef>5409</siri:JourneyPartRef>
                           <siri:TrainNumberRef>5928:1</siri:TrainNumberRef>
                           <siri:OperatorRef>${operatorRef1}</siri:OperatorRef>
                        </siri:JourneyPartInfo>
                     </siri:JourneyParts>
                     <!-- MonitoredCall 1er passage-->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef1}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName1}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName1}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime1}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime1}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime1}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalProximityText>à l'approche</siri:ArrivalProximityText>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:ArrivalStopAssignment>
                           <siri:AimedQuayName>voie 2</siri:AimedQuayName>
                        </siri:ArrivalStopAssignment>
                        <siri:AimedDepartureTime>${aimedDepartureTime1}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime1}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime1}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                        <siri:DistanceFromStop>2300</siri:DistanceFromStop>
                        <siri:NumberOfStopsAway>3</siri:NumberOfStopsAway>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
                <!-- 2ème passage -->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier2}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef2}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef2}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef2}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef2}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef2}</siri:JourneyPatternRef>
                     <siri:JourneyPatternName>mission2</siri:JourneyPatternName>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef2}</siri:RouteRef>
                     <siri:PublishedLineName>N</siri:PublishedLineName>
                     <siri:DirectionName>Rambouillet</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                      <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef2}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie2</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef2}</siri:OriginRef>
                     <siri:OriginName>${originName2}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef2}</siri:PlaceRef>
                        <siri:PlaceName>${placeName2}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef2}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName2}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName2}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course 2</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime2}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime2}</siri:DestinationAimedArrivalTime>
                     <siri:FirstOrLastJourney>unspecified</siri:FirstOrLastJourney>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <siri:TrainNumbers>
                        <siri:TrainNumberRef>5918</siri:TrainNumberRef>
                     </siri:TrainNumbers>
                     <!-- JourneyParts:-->
                     <siri:JourneyParts>
                        <siri:JourneyPartInfo>
                           <siri:JourneyPartRef>5409</siri:JourneyPartRef>
                           <siri:TrainNumberRef>5928:1</siri:TrainNumberRef>
                           <siri:OperatorRef>${operatorRef2}</siri:OperatorRef>
                        </siri:JourneyPartInfo>
                     </siri:JourneyParts>
                     <!--  MonitoredCall 2ème passage -->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef2}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName2}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName2}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime2}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime2}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime2}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalProximityText>à l'approche</siri:ArrivalProximityText>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:ArrivalStopAssignment>
                           <siri:AimedQuayName>voie 2</siri:AimedQuayName>
                        </siri:ArrivalStopAssignment>
                        <siri:AimedDepartureTime>${aimedDepartureTime2}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime2}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime2}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                        <siri:DistanceFromStop>2300</siri:DistanceFromStop>
                        <siri:NumberOfStopsAway>3</siri:NumberOfStopsAway>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
            </siri:StopMonitoringDelivery>
         </Answer>
      </wsdl:GetSiriServiceResponse>
   </soapenv:Body>
</soapenv:Envelope>]]></con:responseContent><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetSiriService"/></con:response><con:response name="MockResponse 2" encoding="UTF-8"><con:settings/><con:responseContent xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetSiriService"/></con:response><con:dispatchConfig/></con:mockOperation><con:properties/></con:mockService><con:mockService port="8080" path="/test4Producer_3" host="cloudwatt-pc-dev-00" name="test4Producer_3" bindToHostOnly="false" docroot=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.mock.WsdlMockService@require-soap-action">false</con:setting></con:settings><con:mockOperation name="GetStopMonitoring" interface="SiriProducerRpcBinding" operation="GetStopMonitoring"><con:settings/><con:dispatchStyle>SEQUENCE</con:dispatchStyle><con:defaultResponse>Response 1</con:defaultResponse><con:response name="Response 1" encoding="UTF-8"><con:settings/><con:script>// create XmlHolder for request content
def holder = new com.eviware.soapui.support.XmlHolder( mockRequest.requestContent )
def fournisseur = "SNCF-ACCES"
// define namespace
holder.namespaces["siri"] = "http://www.siri.org.uk/siri"
// récupération de l'id message de la request
requestContext.idMessage = holder["//siri:MessageIdentifier"][0]
requestContext.monitoringRef = holder["//siri:MonitoringRef"]
requestContext.version = holder["//Request/@version"].toString()

// identifiant utilisé (en coherence avec le dataset redis)
requestContext.producerRef="SNCF-ACCES"
requestContext.recordedAtTime = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())
// Passage 1 / course 1
requestContext.itemIdenfier=fournisseur+":Item::2:LOC"
requestContext.lineRef="STIF:Line::004004009"
requestContext.dataFrameRef="any"
requestContext.datedVehicleJourneyRef=fournisseur+":VehicleJourney::1:LOC"
requestContext.journeyPatternRef=fournisseur+":JourneyPattern::1:LOC"
requestContext.journeyPatternName="mission1"
requestContext.publishedLineName="N"
requestContext.routeRef1=fournisseur+":Route::1:LOC"
requestContext.directionName="Rambouillet"
requestContext.operatorRef1=fournisseur+":Operator::SNCF:"
requestContext.originRef1="STIF:StopPoint:Q:108935:"
requestContext.originName1="Arrêt 1"
requestContext.placeRef1="STIF:StopPoint:Q:108943:"
requestContext.placeName1="Arrêt 5"
requestContext.destinationRef1="STIF:StopPoint:Q:108949:"
requestContext.destinationName1="Arrêt 10"
requestContext.vehicleJourneyName1="Course 1"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse = getHeureSuivante(1)
requestContext.originAimedDepartureTime1=heureDepartCourse.toXMLFormat();
requestContext.destinationAimedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,20,0)
//MonitoredCall
requestContext.stopPointRef1=requestContext.monitoringRef
requestContext.stopPointName1="Arrêt 2"
requestContext.aimedArrivalTime1= getAvecMinuteSeconde(heureDepartCourse,5,0).toXMLFormat()
requestContext.actualArrivalTime1= getAvecMinuteSeconde(heureDepartCourse,5,1).toXMLFormat()
requestContext.expectedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,5,2).toXMLFormat()

requestContext.aimedDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,41).toXMLFormat()
requestContext.actualDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,42).toXMLFormat()
requestContext.expectedDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,43).toXMLFormat()


// passage 2 / course 2
requestContext.monitoringRef2 = holder["//siri:MonitoringRef"]
requestContext.itemIdenfier2=fournisseur+":Item::4:LOC"
requestContext.lineRef2="STIF:Line::004004009"
requestContext.dataFrameRef2="any"
requestContext.datedVehicleJourneyRef2=fournisseur+":VehicleJourney::2:LOC"
requestContext.journeyPatternRef2=fournisseur+":JourneyPattern::2:LOC"
requestContext.routeRef2=fournisseur+":Route::1:LOC"
requestContext.operatorRef2=fournisseur+":Operator::SNCF:"
requestContext.originRef2="STIF:StopPoint:Q:108935:"
requestContext.originName2="Arrêt 1"
requestContext.placeRef2="STIF:StopPoint:Q:108943:"
requestContext.placeName2="Arrêt 5"
requestContext.destinationRef2="STIF:StopPoint:Q:108949:"
requestContext.destinationName2="Arrêt 10"
requestContext.vehicleJourneyName2="Course 2"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse2 = getHeureSuivante(2)
requestContext.originAimedDepartureTime2=heureDepartCourse2.toXMLFormat();
requestContext.destinationAimedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,20,0)
//MonitoredCall
requestContext.stopPointRef2=requestContext.monitoringRef
requestContext.stopPointName2="Arrêt 2"
requestContext.aimedArrivalTime2= getAvecMinuteSeconde(heureDepartCourse2,5,0).toXMLFormat()
requestContext.actualArrivalTime2= getAvecMinuteSeconde(heureDepartCourse2,5,1).toXMLFormat()
requestContext.expectedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,5,2).toXMLFormat()

requestContext.aimedDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,41).toXMLFormat()
requestContext.actualDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,42).toXMLFormat()
requestContext.expectedDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,43).toXMLFormat()



// Methodes utilitaires DATE
// Methode Date permettant d'avoir l'heure courante + heure
def getHeureSuivante(int heure){
	def calendar = Calendar.getInstance();
	calendar.add(Calendar.HOUR,heure);
	calendar.set(Calendar.MINUTE, 0);
	calendar.set(Calendar.SECOND, 0);
	calendar.set(Calendar.MILLISECOND, 0);
	def heureSuivante = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return heureSuivante;
}

// Methode permettant de setter les minites et secondes sur l'heure passée
def getAvecMinuteSeconde(javax.xml.datatype.XMLGregorianCalendar xmlCalendar, int minute, int seconde){ 
	Calendar calendar = xmlCalendar.toGregorianCalendar();	
	calendar.set(Calendar.MINUTE, minute);
	calendar.set(Calendar.SECOND, seconde);
	def date = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return date;
      
}
</con:script><con:responseContent><![CDATA[<!--
Cette réponse renvoie les 2 prochains passages de la ZDE STIF:StopPoint:Q:2
Passage 1 : item LOC 3 
Passage 2 : item LOC 4
-->
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsdl="http://wsdl.siri.org.uk" xmlns:siri="http://www.siri.org.uk/siri" xmlns:acsb="http://www.ifopt.org.uk/acsb" xmlns:ifop="http://www.ifopt.org.uk/ifopt">
   <soapenv:Header/>
   <soapenv:Body>
      <wsdl:GetStopMonitoringResponse>
         <ServiceDeliveryInfo>
            <siri:ResponseTimestamp>${=javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())}</siri:ResponseTimestamp>
            <siri:ProducerRef>${producerRef}</siri:ProducerRef>
            <siri:ResponseMessageIdentifier>${= UUID.randomUUID().toString()}</siri:ResponseMessageIdentifier>
		  <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
         </ServiceDeliveryInfo>
         <Answer>
            <siri:StopMonitoringDelivery version="${version}">
               <siri:ResponseTimestamp>${recordedAtTime}</siri:ResponseTimestamp>
               <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
               <siri:Status>true</siri:Status>
               <siri:MonitoringRef>${monitoringRef}</siri:MonitoringRef>
               <!-- 1 er passage-->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef}</siri:JourneyPatternRef>
                     <siri:JourneyPatternName>${journeyPatternName}</siri:JourneyPatternName>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef1}</siri:RouteRef>
                     <siri:PublishedLineName>${publishedLineName}</siri:PublishedLineName>
                     <siri:DirectionName>${directionName}</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                     <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef1}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie1</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef1}</siri:OriginRef>
                     <siri:OriginName>${originName1}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef1}</siri:PlaceRef>
                        <siri:PlaceName>${placeName1}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef1}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName1}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName1}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime1}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime1}</siri:DestinationAimedArrivalTime>
                     <siri:FirstOrLastJourney>unspecified</siri:FirstOrLastJourney>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <siri:TrainNumbers>
                        <siri:TrainNumberRef>5918</siri:TrainNumberRef>
                     </siri:TrainNumbers>
                     <!-- JourneyParts:-->
                     <siri:JourneyParts>
                        <siri:JourneyPartInfo>
                           <siri:JourneyPartRef>5409</siri:JourneyPartRef>
                           <siri:TrainNumberRef>5928:1</siri:TrainNumberRef>
                           <siri:OperatorRef>${operatorRef1}</siri:OperatorRef>
                        </siri:JourneyPartInfo>
                     </siri:JourneyParts>
                     <!-- MonitoredCall 1er passage-->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef1}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName1}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName1}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime1}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime1}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime1}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalProximityText>à l'approche</siri:ArrivalProximityText>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:ArrivalStopAssignment>
                           <siri:AimedQuayName>voie 2</siri:AimedQuayName>
                        </siri:ArrivalStopAssignment>
                        <siri:AimedDepartureTime>${aimedDepartureTime1}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime1}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime1}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                        <siri:DistanceFromStop>2300</siri:DistanceFromStop>
                        <siri:NumberOfStopsAway>3</siri:NumberOfStopsAway>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
                <!-- 2ème passage -->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier2}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef2}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef2}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef2}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef2}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef2}</siri:JourneyPatternRef>
                     <siri:JourneyPatternName>mission2</siri:JourneyPatternName>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef2}</siri:RouteRef>
                     <siri:PublishedLineName>N</siri:PublishedLineName>
                     <siri:DirectionName>Rambouillet</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                      <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef2}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie2</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef2}</siri:OriginRef>
                     <siri:OriginName>${originName2}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef2}</siri:PlaceRef>
                        <siri:PlaceName>${placeName2}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef2}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName2}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName2}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course 2</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime2}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime2}</siri:DestinationAimedArrivalTime>
                     <siri:FirstOrLastJourney>unspecified</siri:FirstOrLastJourney>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <siri:TrainNumbers>
                        <siri:TrainNumberRef>5918</siri:TrainNumberRef>
                     </siri:TrainNumbers>
                     <!-- JourneyParts:-->
                     <siri:JourneyParts>
                        <siri:JourneyPartInfo>
                           <siri:JourneyPartRef>5409</siri:JourneyPartRef>
                           <siri:TrainNumberRef>5928:1</siri:TrainNumberRef>
                           <siri:OperatorRef>${operatorRef2}</siri:OperatorRef>
                        </siri:JourneyPartInfo>
                     </siri:JourneyParts>
                     <!--  MonitoredCall 2ème passage -->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef2}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName2}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName2}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime2}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime2}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime2}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalProximityText>à l'approche</siri:ArrivalProximityText>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:ArrivalStopAssignment>
                           <siri:AimedQuayName>voie 2</siri:AimedQuayName>
                        </siri:ArrivalStopAssignment>
                        <siri:AimedDepartureTime>${aimedDepartureTime2}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime2}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime2}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                        <siri:DistanceFromStop>2300</siri:DistanceFromStop>
                        <siri:NumberOfStopsAway>3</siri:NumberOfStopsAway>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
            </siri:StopMonitoringDelivery>
         </Answer>
         <AnswerExtension>
         </AnswerExtension>
      </wsdl:GetStopMonitoringResponse>
   </soapenv:Body>
</soapenv:Envelope>]]></con:responseContent><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetStopMonitoring"/></con:response><con:dispatchConfig/></con:mockOperation><con:properties/></con:mockService><con:mockService port="8080" path="/test84Producer_2" host="L276002" name="test84Producer_2" bindToHostOnly="false" docroot=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.mock.WsdlMockService@require-soap-action">false</con:setting></con:settings><con:mockOperation name="GetStopMonitoring" interface="SiriProducerRpcBinding" operation="GetStopMonitoring"><con:settings/><con:dispatchStyle>SEQUENCE</con:dispatchStyle><con:defaultResponse>Response 1</con:defaultResponse><con:response name="Response 1" encoding="UTF-8"><con:settings/><con:script>// create XmlHolder for request content
def holder = new com.eviware.soapui.support.XmlHolder( mockRequest.requestContent )
def fournisseur = "SNCF-ACCES"
// define namespace
holder.namespaces["siri"] = "http://www.siri.org.uk/siri"
// récupération de l'id message de la request
requestContext.idMessage = holder["//siri:MessageIdentifier"][0]
requestContext.monitoringRef = holder["//siri:MonitoringRef"]
requestContext.version = holder["//Request/@version"].toString()

// identifiant utilisé (en coherence avec le dataset redis)
requestContext.producerRef="SNCF-ACCES"
requestContext.responseMessageIdentifier="SNCF:Message::1:LOC"
requestContext.recordedAtTime = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())
// Passage 1 / course 1
requestContext.itemIdenfier=fournisseur+":Item::1:LOC"
requestContext.lineRef="STIF:Line::TEST7:"
requestContext.dataFrameRef="any"
requestContext.datedVehicleJourneyRef=fournisseur+":VehicleJourney::1:LOC"
requestContext.journeyPatternRef=fournisseur+":JourneyPattern::1:LOC"
requestContext.journeyPatternName="mission1"
requestContext.routeRef1=fournisseur+":Route::1:LOC"
requestContext.operatorRef1=fournisseur+":Operator::SNCF:"
requestContext.originRef1="STIF:StopPoint:Q:108935:"
requestContext.originName1="Arrêt 4"
requestContext.placeRef1="STIF:StopPoint:Q:108943:"
requestContext.placeName1="Arrêt 5"
requestContext.destinationRef1="STIF:StopPoint:Q:108949:"
requestContext.destinationName1="Arrêt 6"
requestContext.vehicleJourneyName1="Course 1"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse = getHeureSuivante(1)
requestContext.originAimedDepartureTime1=heureDepartCourse.toXMLFormat();
requestContext.destinationAimedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,20,0)
//MonitoredCall
requestContext.stopPointRef1=requestContext.monitoringRef
requestContext.stopPointName1="Arrêt 7"
requestContext.aimedArrivalTime1= getAvecMinuteSeconde(heureDepartCourse,2,0).toXMLFormat()
requestContext.actualArrivalTime1= getAvecMinuteSeconde(heureDepartCourse,2,1).toXMLFormat()
requestContext.expectedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,2,2).toXMLFormat()

requestContext.aimedDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,41).toXMLFormat()
requestContext.actualDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,42).toXMLFormat()
requestContext.expectedDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,43).toXMLFormat()


// passage 2 / course 2
requestContext.itemIdenfier2=fournisseur+":Item::2:LOC"
requestContext.lineRef2="STIF:Line::004004009"
requestContext.dataFrameRef2="any"
requestContext.datedVehicleJourneyRef2=fournisseur+":VehicleJourney::2:LOC"
requestContext.journeyPatternRef2=fournisseur+":JourneyPattern::2:LOC"
requestContext.routeRef2=fournisseur+":Route::1:LOC"
requestContext.operatorRef2=fournisseur+":Operator::SNCF:"
requestContext.originRef2="STIF:StopPoint:Q:108935:"
requestContext.originName2="Arrêt 4"
requestContext.placeRef2="STIF:StopPoint:Q:108943:"
requestContext.placeName2="Arrêt 5"
requestContext.destinationRef2="STIF:StopPoint:Q:108949:"
requestContext.destinationName2="Arrêt 6"
requestContext.vehicleJourneyName2="Course 2"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse2 = getHeureSuivante(2)
requestContext.originAimedDepartureTime2=heureDepartCourse2.toXMLFormat();
requestContext.destinationAimedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,20,0)
//MonitoredCall
requestContext.stopPointRef2=requestContext.monitoringRef
requestContext.stopPointName2="Arrêt 7"
requestContext.aimedArrivalTime2= getAvecMinuteSeconde(heureDepartCourse2,2,0).toXMLFormat()
requestContext.actualArrivalTime2= getAvecMinuteSeconde(heureDepartCourse2,2,1).toXMLFormat()
requestContext.expectedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,2,2).toXMLFormat()

requestContext.aimedDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,41).toXMLFormat()
requestContext.actualDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,42).toXMLFormat()
requestContext.expectedDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,43).toXMLFormat()



// Methodes utilitaires DATE
// Methode Date permettant d'avoir l'heure courante + heure
def getHeureSuivante(int heure){
	def calendar = Calendar.getInstance();
	calendar.add(Calendar.HOUR,heure);
	calendar.set(Calendar.MINUTE, 0);
	calendar.set(Calendar.SECOND, 0);
	calendar.set(Calendar.MILLISECOND, 0);
	def heureSuivante = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return heureSuivante;
}

// Methode permettant de setter les minites et secondes sur l'heure passée
def getAvecMinuteSeconde(javax.xml.datatype.XMLGregorianCalendar xmlCalendar, int minute, int seconde){ 
	Calendar calendar = xmlCalendar.toGregorianCalendar();	
	calendar.set(Calendar.MINUTE, minute);
	calendar.set(Calendar.SECOND, seconde);
	def date = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return date;
      
}
</con:script><con:responseContent><![CDATA[<!--
Cette réponse renvoie les 2 prochains passages de la ZDE STIF:StopPoint:Q:4
Passage 1 : heure courante + 1 avec lineRef non CODIFLIGNE
Passage 2 : heure courante + 2 avec lineRef CODIFLIGNE
-->
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsdl="http://wsdl.siri.org.uk" xmlns:siri="http://www.siri.org.uk/siri" xmlns:acsb="http://www.ifopt.org.uk/acsb" xmlns:ifop="http://www.ifopt.org.uk/ifopt">
   <soapenv:Header/>
   <soapenv:Body>
      <wsdl:GetStopMonitoringResponse>
         <ServiceDeliveryInfo>
            <siri:ResponseTimestamp>${=javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())}</siri:ResponseTimestamp>
            <siri:ProducerRef>${producerRef}</siri:ProducerRef>
            <siri:ResponseMessageIdentifier>${responseMessageIdentifier}</siri:ResponseMessageIdentifier>
		  <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
         </ServiceDeliveryInfo>
         <Answer>
            <siri:StopMonitoringDelivery version="${version}">
               <siri:ResponseTimestamp>${recordedAtTime}</siri:ResponseTimestamp>
               <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
               <siri:Status>true</siri:Status>
               <siri:MonitoringRef>${monitoringRef}</siri:MonitoringRef>
               <!-- 1 er passage-->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef}</siri:JourneyPatternRef>
                     <siri:JourneyPatternName>${journeyPatternName}</siri:JourneyPatternName>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef1}</siri:RouteRef>
                     <siri:PublishedLineName>N</siri:PublishedLineName>
                     <siri:DirectionName>Rambouillet</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                     <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef1}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie1</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef1}</siri:OriginRef>
                     <siri:OriginName>${originName1}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef1}</siri:PlaceRef>
                        <siri:PlaceName>${placeName1}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef1}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName1}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName1}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime1}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime1}</siri:DestinationAimedArrivalTime>
                     <siri:FirstOrLastJourney>unspecified</siri:FirstOrLastJourney>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <siri:TrainNumbers>
                        <siri:TrainNumberRef>5918</siri:TrainNumberRef>
                     </siri:TrainNumbers>
                     <!-- JourneyParts:-->
                     <siri:JourneyParts>
                        <siri:JourneyPartInfo>
                           <siri:JourneyPartRef>5409</siri:JourneyPartRef>
                           <siri:TrainNumberRef>5928:1</siri:TrainNumberRef>
                           <siri:OperatorRef>${operatorRef1}</siri:OperatorRef>
                        </siri:JourneyPartInfo>
                     </siri:JourneyParts>
                     <!-- MonitoredCall 1er passage-->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef1}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName1}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName1}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime1}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime1}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime1}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalProximityText>à l'approche</siri:ArrivalProximityText>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:ArrivalStopAssignment>
                           <siri:AimedQuayName>voie 2</siri:AimedQuayName>
                        </siri:ArrivalStopAssignment>
                        <siri:AimedDepartureTime>${aimedDepartureTime1}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime1}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime1}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                        <siri:DistanceFromStop>2300</siri:DistanceFromStop>
                        <siri:NumberOfStopsAway>3</siri:NumberOfStopsAway>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
                
               </siri:MonitoredStopVisit>
               
            </siri:StopMonitoringDelivery>
         </Answer>
         <AnswerExtension>
         </AnswerExtension>
      </wsdl:GetStopMonitoringResponse>
   </soapenv:Body>
</soapenv:Envelope>]]></con:responseContent><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetStopMonitoring"/></con:response><con:dispatchConfig/></con:mockOperation><con:properties/></con:mockService><con:mockService port="8080" path="/test84Producer" host="L276002" name="test84Producer" bindToHostOnly="false" docroot=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.mock.WsdlMockService@require-soap-action">false</con:setting></con:settings><con:mockOperation name="GetStopMonitoring" interface="SiriProducerRpcBinding" operation="GetStopMonitoring"><con:settings/><con:dispatchStyle>SCRIPT</con:dispatchStyle><con:defaultResponse>Response 1</con:defaultResponse><con:response name="Response 1" encoding="UTF-8"><con:settings/><con:script>// create XmlHolder for request content
def holder = new com.eviware.soapui.support.XmlHolder( mockRequest.requestContent )
def fournisseur = "SNCF-ACCES"
// define namespace
holder.namespaces["siri"] = "http://www.siri.org.uk/siri"
// récupération de l'id message de la request
requestContext.idMessage = holder["//siri:MessageIdentifier"][0]
requestContext.monitoringRef = holder["//siri:MonitoringRef"]
requestContext.version = holder["//Request/@version"].toString()

// identifiant utilisé (en coherence avec le dataset redis)
requestContext.producerRef="SNCF-ACCES"
requestContext.recordedAtTime = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())
// Passage 1 / course 1
requestContext.itemIdenfier=fournisseur+":Item::1:LOC"
requestContext.lineRef="STIF:Line::004004009"
requestContext.dataFrameRef="any"
requestContext.datedVehicleJourneyRef=fournisseur+":VehicleJourney::1:LOC"
requestContext.journeyPatternRef=fournisseur+":JourneyPattern::1:LOC"
requestContext.journeyPatternName="mission1"
requestContext.publishedLineName="N"
requestContext.routeRef1=fournisseur+":Route::1:LOC"
requestContext.directionName="Rambouillet"
requestContext.operatorRef1=fournisseur+":Operator::SNCF:"
requestContext.originRef1="STIF:StopPoint:Q:108935:"
requestContext.originName1="Arrêt 1"
requestContext.placeRef1="STIF:StopPoint:Q:108943:"
requestContext.placeName1="Arrêt 5"
requestContext.destinationRef1="STIF:StopPoint:Q:108949:"
requestContext.destinationName1="Arrêt 10"
requestContext.vehicleJourneyName1="Course 1"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse = getHeureSuivante(1)
requestContext.originAimedDepartureTime1=heureDepartCourse.toXMLFormat();
requestContext.destinationAimedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,20,0)
//MonitoredCall
requestContext.stopPointRef1=requestContext.monitoringRef
requestContext.stopPointName1="Arrêt 2"
requestContext.aimedArrivalTime1= getAvecMinuteSeconde(heureDepartCourse,2,0).toXMLFormat()
//requestContext.aimedArrivalTime1="2014-04-29T13:00:00.000Z"
requestContext.actualArrivalTime1= getAvecMinuteSeconde(heureDepartCourse,2,1).toXMLFormat()
//requestContext.actualArrivalTime1 = "2014-04-29T13:00:00.000+02:00"
requestContext.expectedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,2,2).toXMLFormat()

requestContext.aimedDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,41).toXMLFormat()
requestContext.actualDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,42).toXMLFormat()
requestContext.expectedDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,43).toXMLFormat()


// passage 2 / course 2
requestContext.monitoringRef2 = holder["//siri:MonitoringRef"]
requestContext.itemIdenfier2=fournisseur+":Item::2:LOC"
requestContext.lineRef2="STIF:Line::004004009"
requestContext.dataFrameRef2="any"
requestContext.datedVehicleJourneyRef2=fournisseur+":VehicleJourney::2:LOC"
requestContext.journeyPatternRef2=fournisseur+":JourneyPattern::2:LOC"
requestContext.routeRef2=fournisseur+":Route::1:LOC"
requestContext.operatorRef2=fournisseur+":Operator::SNCF:"
requestContext.originRef2="STIF:StopPoint:Q:108935:"
requestContext.originName2="Arrêt 1"
requestContext.placeRef2="STIF:StopPoint:Q:108943:"
requestContext.placeName2="Arrêt 5"
requestContext.destinationRef2="STIF:StopPoint:Q:108949:"
requestContext.destinationName2="Arrêt 10"
requestContext.vehicleJourneyName2="Course 2"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse2 = getHeureSuivante(2)
requestContext.originAimedDepartureTime2=heureDepartCourse2.toXMLFormat();
requestContext.destinationAimedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,20,0)
//MonitoredCall
requestContext.stopPointRef2=requestContext.monitoringRef
requestContext.stopPointName2="Arrêt 2"
requestContext.aimedArrivalTime2= getAvecMinuteSeconde(heureDepartCourse2,2,0).toXMLFormat()
requestContext.actualArrivalTime2= getAvecMinuteSeconde(heureDepartCourse2,2,1).toXMLFormat()
requestContext.expectedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,2,2).toXMLFormat()

requestContext.aimedDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,41).toXMLFormat()
requestContext.actualDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,42).toXMLFormat()
requestContext.expectedDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,43).toXMLFormat()



// Methodes utilitaires DATE
// Methode Date permettant d'avoir l'heure courante + heure
def getHeureSuivante(int heure){
	def calendar = Calendar.getInstance();
	calendar.add(Calendar.HOUR,heure);
	calendar.set(Calendar.MINUTE, 0);
	calendar.set(Calendar.SECOND, 0);
	calendar.set(Calendar.MILLISECOND, 0);
	def heureSuivante = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return heureSuivante;
}

// Methode permettant de setter les minites et secondes sur l'heure passée
def getAvecMinuteSeconde(javax.xml.datatype.XMLGregorianCalendar xmlCalendar, int minute, int seconde){ 
	Calendar calendar = xmlCalendar.toGregorianCalendar();	
	calendar.set(Calendar.MINUTE, minute);
	calendar.set(Calendar.SECOND, seconde);
	def date = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return date;
      
}
</con:script><con:responseContent><![CDATA[<!--
Cette réponse renvoie les 2 prochains passages de la ZDE STIF:StopPoint:Q:2
Passage 1 : heure courante + 1
Passage 2 : heure courante + 2
-->
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsdl="http://wsdl.siri.org.uk" xmlns:siri="http://www.siri.org.uk/siri" xmlns:acsb="http://www.ifopt.org.uk/acsb" xmlns:ifop="http://www.ifopt.org.uk/ifopt">
   <soapenv:Header/>
   <soapenv:Body>
      <wsdl:GetStopMonitoringResponse>
         <ServiceDeliveryInfo>
            <siri:ResponseTimestamp>${=javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())}</siri:ResponseTimestamp>
            <siri:ProducerRef>${producerRef}</siri:ProducerRef>
            <siri:ResponseMessageIdentifier>${= UUID.randomUUID().toString()}</siri:ResponseMessageIdentifier>
		  <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
         </ServiceDeliveryInfo>
         <Answer>
            <siri:StopMonitoringDelivery version="${version}">
            	<siri:SubscriptionFilterRef>?</siri:SubscriptionFilterRef>
               <siri:ResponseTimestamp>${recordedAtTime}</siri:ResponseTimestamp>
               <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
               <siri:Status>true</siri:Status>
               <siri:MonitoringRef>${monitoringRef}</siri:MonitoringRef>
               <!-- 1 er passage-->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef}</siri:JourneyPatternRef>
                     <siri:JourneyPatternName>${journeyPatternName}</siri:JourneyPatternName>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef1}</siri:RouteRef>
                     <siri:PublishedLineName>${publishedLineName}</siri:PublishedLineName>
                     <siri:DirectionName>${directionName}</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                     <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef1}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie1</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef1}</siri:OriginRef>
                     <siri:OriginName>${originName1}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef1}</siri:PlaceRef>
                        <siri:PlaceName>${placeName1}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef1}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName1}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName1}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime1}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime1}</siri:DestinationAimedArrivalTime>
                     <siri:FirstOrLastJourney>unspecified</siri:FirstOrLastJourney>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <siri:TrainNumbers>
                        <siri:TrainNumberRef>5918</siri:TrainNumberRef>
                     </siri:TrainNumbers>
                     <!-- JourneyParts:-->
                     <siri:JourneyParts>
                        <siri:JourneyPartInfo>
                           <siri:JourneyPartRef>5409</siri:JourneyPartRef>
                           <siri:TrainNumberRef>5928:1</siri:TrainNumberRef>
                           <siri:OperatorRef>${operatorRef1}</siri:OperatorRef>
                        </siri:JourneyPartInfo>
                     </siri:JourneyParts>
                     <!-- MonitoredCall 1er passage-->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef1}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName1}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName1}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime1}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime1}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime1}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalProximityText>à l'approche</siri:ArrivalProximityText>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:ArrivalStopAssignment>
                           <siri:AimedQuayName>voie 2</siri:AimedQuayName>
                        </siri:ArrivalStopAssignment>
                        <siri:AimedDepartureTime>${aimedDepartureTime1}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime1}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime1}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                        <siri:DistanceFromStop>2300</siri:DistanceFromStop>
                        <siri:NumberOfStopsAway>3</siri:NumberOfStopsAway>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
                <!-- 2ème passage -->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier2}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef2}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef2}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef2}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef2}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef2}</siri:JourneyPatternRef>
                     <siri:JourneyPatternName>mission2</siri:JourneyPatternName>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef2}</siri:RouteRef>
                     <siri:PublishedLineName>N</siri:PublishedLineName>
                     <siri:DirectionName>Rambouillet</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                      <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef2}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie2</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef2}</siri:OriginRef>
                     <siri:OriginName>${originName2}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef2}</siri:PlaceRef>
                        <siri:PlaceName>${placeName2}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef2}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName2}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName2}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course 2</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime2}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime2}</siri:DestinationAimedArrivalTime>
                     <siri:FirstOrLastJourney>unspecified</siri:FirstOrLastJourney>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <siri:TrainNumbers>
                        <siri:TrainNumberRef>5918</siri:TrainNumberRef>
                     </siri:TrainNumbers>
                     <!-- JourneyParts:-->
                     <siri:JourneyParts>
                        <siri:JourneyPartInfo>
                           <siri:JourneyPartRef>5409</siri:JourneyPartRef>
                           <siri:TrainNumberRef>5928:1</siri:TrainNumberRef>
                           <siri:OperatorRef>${operatorRef2}</siri:OperatorRef>
                        </siri:JourneyPartInfo>
                     </siri:JourneyParts>
                     <!--  MonitoredCall 2ème passage -->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef2}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName2}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName2}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime2}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime2}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime2}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalProximityText>à l'approche</siri:ArrivalProximityText>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:ArrivalStopAssignment>
                           <siri:AimedQuayName>voie 2</siri:AimedQuayName>
                        </siri:ArrivalStopAssignment>
                        <siri:AimedDepartureTime>${aimedDepartureTime2}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime2}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime2}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                        <siri:DistanceFromStop>2300</siri:DistanceFromStop>
                        <siri:NumberOfStopsAway>3</siri:NumberOfStopsAway>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
            </siri:StopMonitoringDelivery>
         </Answer>
         <AnswerExtension>
         </AnswerExtension>
      </wsdl:GetStopMonitoringResponse>
   </soapenv:Body>
</soapenv:Envelope>]]></con:responseContent><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetStopMonitoring"/></con:response><con:dispatchConfig/></con:mockOperation><con:properties/></con:mockService><con:mockService port="8080" path="/test10Producer_2" host="cloudwatt-pc-dev-00" name="test10Producer_2" bindToHostOnly="false" docroot=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.mock.WsdlMockService@require-soap-action">false</con:setting></con:settings><con:mockOperation name="GetStopMonitoring" interface="SiriProducerRpcBinding" operation="GetStopMonitoring"><con:settings/><con:dispatchStyle>SEQUENCE</con:dispatchStyle><con:defaultResponse>Response 1</con:defaultResponse><con:response name="Response 1" encoding="UTF-8"><con:settings/><con:script>// create XmlHolder for request content
def holder = new com.eviware.soapui.support.XmlHolder( mockRequest.requestContent )
def fournisseur = "SNCF-ACCES"
// define namespace
holder.namespaces["siri"] = "http://www.siri.org.uk/siri"
// récupération de l'id message de la request
requestContext.idMessage = holder["//siri:MessageIdentifier"][0]
requestContext.monitoringRef = holder["//siri:MonitoringRef"]
requestContext.version = holder["//Request/@version"].toString()

// identifiant utilisé (en coherence avec le dataset redis)
requestContext.producerRef="SNCF-ACCES"
requestContext.responseMessageIdentifier="SNCF:Message::1:LOC"
requestContext.recordedAtTime = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())
// Passage 1 / course 1
requestContext.itemIdenfier=fournisseur+":Item::1:LOC"
requestContext.lineRef="STIF:Line::004004009"
requestContext.dataFrameRef="any"
requestContext.datedVehicleJourneyRef=fournisseur+":VehicleJourney::1:LOC"
requestContext.journeyPatternRef=fournisseur+":JourneyPattern::1:LOC"
requestContext.journeyPatternName="mission1"
requestContext.routeRef1=fournisseur+":Route::1:LOC"
requestContext.operatorRef1=fournisseur+":Operator::SNCF:"
requestContext.originRef1="STIF:StopPoint:Q:7"
requestContext.originName1="Arrêt 4"
requestContext.placeRef1="STIF:StopPoint:Q:108943:"
requestContext.placeName1="Arrêt 5"
requestContext.destinationRef1="STIF:StopPoint:Q:10"
requestContext.destinationName1="Arrêt 6"
requestContext.vehicleJourneyName1="Course 1"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse = getHeureSuivante(1)
requestContext.originAimedDepartureTime1=heureDepartCourse.toXMLFormat();
requestContext.destinationAimedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,20,0)
//MonitoredCall
requestContext.stopPointRef1=requestContext.monitoringRef
requestContext.stopPointName1="Arrêt 7"
requestContext.aimedArrivalTime1= getAvecMinuteSeconde(heureDepartCourse,2,0).toXMLFormat()
requestContext.actualArrivalTime1= getAvecMinuteSeconde(heureDepartCourse,2,1).toXMLFormat()
requestContext.expectedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,2,2).toXMLFormat()

requestContext.aimedDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,41).toXMLFormat()
requestContext.actualDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,42).toXMLFormat()
requestContext.expectedDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,43).toXMLFormat()


// passage 2 / course 2
requestContext.itemIdenfier2=fournisseur+":Item::2:LOC"
requestContext.lineRef2="STIF:Line::004004009"
requestContext.dataFrameRef2="any"
requestContext.datedVehicleJourneyRef2=fournisseur+":VehicleJourney::2:LOC"
requestContext.journeyPatternRef2=fournisseur+":JourneyPattern::2:LOC"
requestContext.routeRef2=fournisseur+":Route::1:LOC"
requestContext.operatorRef2=fournisseur+":Operator::SNCF:"
requestContext.originRef2="STIF:StopPoint:Q:108935:"
requestContext.originName2="Arrêt 4"
requestContext.placeRef2="STIF:StopPoint:Q:108943:"
requestContext.placeName2="Arrêt 5"
requestContext.destinationRef2="STIF:StopPoint:Q:108949:"
requestContext.destinationName2="Arrêt 6"
requestContext.vehicleJourneyName2="Course 2"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse2 = getHeureSuivante(2)
requestContext.originAimedDepartureTime2=heureDepartCourse2.toXMLFormat();
requestContext.destinationAimedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,20,0)
//MonitoredCall
requestContext.monitoringRef2 = holder["//siri:MonitoringRef"]
requestContext.stopPointRef2=requestContext.monitoringRef
requestContext.stopPointName2="Arrêt 7"
requestContext.aimedArrivalTime2= getAvecMinuteSeconde(heureDepartCourse2,2,0).toXMLFormat()
requestContext.actualArrivalTime2= getAvecMinuteSeconde(heureDepartCourse2,2,1).toXMLFormat()
requestContext.expectedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,2,2).toXMLFormat()

requestContext.aimedDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,41).toXMLFormat()
requestContext.actualDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,42).toXMLFormat()
requestContext.expectedDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,43).toXMLFormat()



// Methodes utilitaires DATE
// Methode Date permettant d'avoir l'heure courante + heure
def getHeureSuivante(int heure){
	def calendar = Calendar.getInstance();
	calendar.add(Calendar.HOUR,heure);
	calendar.set(Calendar.MINUTE, 0);
	calendar.set(Calendar.SECOND, 0);
	calendar.set(Calendar.MILLISECOND, 0);
	def heureSuivante = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return heureSuivante;
}

// Methode permettant de setter les minites et secondes sur l'heure passée
def getAvecMinuteSeconde(javax.xml.datatype.XMLGregorianCalendar xmlCalendar, int minute, int seconde){ 
	Calendar calendar = xmlCalendar.toGregorianCalendar();	
	calendar.set(Calendar.MINUTE, minute);
	calendar.set(Calendar.SECOND, seconde);
	def date = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return date;
      
}
</con:script><con:responseContent><![CDATA[<!--
Cette réponse renvoie un message non valide SIRI
-->
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsdl="http://wsdl.siri.org.uk" xmlns:siri="http://www.siri.org.uk/siri" xmlns:acsb="http://www.ifopt.org.uk/acsb" xmlns:ifop="http://www.ifopt.org.uk/ifopt">
   <soapenv:Header/>
   <soapenv:Body>
      <wsdl:GetStopMonitoringResponse>
        <ServiceDeliveryInfo>
            <siri:ResponseTimestamp>${=javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())}</siri:ResponseTimestamp>
            <siri:ProducerRef>${producerRef}</siri:ProducerRef>
            <siri:ResponseMessageIdentifier>${responseMessageIdentifier}</siri:ResponseMessageIdentifier>
		  <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
        <!-- Absence balise fermante --> 
        <Answer>
            <siri:StopMonitoringDelivery version="${version}">
               <siri:ResponseTimestamp>${recordedAtTime}</siri:ResponseTimestamp>
               <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
               <siri:Status>true</siri:Status>
               <siri:MonitoringRef>${monitoringRef}</siri:MonitoringRef>
               <!-- 1 er passage-->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef}</siri:JourneyPatternRef>
                     <siri:JourneyPatternName>${journeyPatternName}</siri:JourneyPatternName>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef1}</siri:RouteRef>
                     <siri:PublishedLineName>N</siri:PublishedLineName>
                     <siri:DirectionName>Rambouillet</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                     <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef1}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie1</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef1}</siri:OriginRef>
                     <siri:OriginName>${originName1}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef1}</siri:PlaceRef>
                        <siri:PlaceName>${placeName1}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef1}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName1}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName1}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime1}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime1}</siri:DestinationAimedArrivalTime>
                     <siri:FirstOrLastJourney>unspecified</siri:FirstOrLastJourney>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <siri:TrainNumbers>
                        <siri:TrainNumberRef>5918</siri:TrainNumberRef>
                     </siri:TrainNumbers>
                     <!-- JourneyParts:-->
                     <siri:JourneyParts>
                        <siri:JourneyPartInfo>
                           <siri:JourneyPartRef>5409</siri:JourneyPartRef>
                           <siri:TrainNumberRef>5928:1</siri:TrainNumberRef>
                           <siri:OperatorRef>${operatorRef1}</siri:OperatorRef>
                        </siri:JourneyPartInfo>
                     </siri:JourneyParts>
                     <!-- MonitoredCall 1er passage-->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef1}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName1}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName1}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime1}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime1}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime1}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalProximityText>à l'approche</siri:ArrivalProximityText>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:ArrivalStopAssignment>
                           <siri:AimedQuayName>voie 2</siri:AimedQuayName>
                        </siri:ArrivalStopAssignment>
                        <siri:AimedDepartureTime>${aimedDepartureTime1}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime1}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime1}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                        <siri:DistanceFromStop>2300</siri:DistanceFromStop>
                        <siri:NumberOfStopsAway>3</siri:NumberOfStopsAway>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
                <!-- 2ème passage -->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier2}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef2}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef2}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef2}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef2}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef2}</siri:JourneyPatternRef>
                     <siri:JourneyPatternName>mission2</siri:JourneyPatternName>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef2}</siri:RouteRef>
                     <siri:PublishedLineName>N</siri:PublishedLineName>
                     <siri:DirectionName>Rambouillet</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                      <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef2}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie2</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef2}</siri:OriginRef>
                     <siri:OriginName>${originName2}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef2}</siri:PlaceRef>
                        <siri:PlaceName>${placeName2}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef2}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName2}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName2}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course 2</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime2}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime2}</siri:DestinationAimedArrivalTime>
                     <siri:FirstOrLastJourney>unspecified</siri:FirstOrLastJourney>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <siri:TrainNumbers>
                        <siri:TrainNumberRef>5918</siri:TrainNumberRef>
                     </siri:TrainNumbers>
                     <!-- JourneyParts:-->
                     <siri:JourneyParts>
                        <siri:JourneyPartInfo>
                           <siri:JourneyPartRef>5409</siri:JourneyPartRef>
                           <siri:TrainNumberRef>5928:1</siri:TrainNumberRef>
                           <siri:OperatorRef>${operatorRef2}</siri:OperatorRef>
                        </siri:JourneyPartInfo>
                     </siri:JourneyParts>
                     <!--  MonitoredCall 2ème passage -->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef2}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName2}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName2}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime2}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime2}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime2}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalProximityText>à l'approche</siri:ArrivalProximityText>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:ArrivalStopAssignment>
                           <siri:AimedQuayName>voie 2</siri:AimedQuayName>
                        </siri:ArrivalStopAssignment>
                        <siri:AimedDepartureTime>${aimedDepartureTime2}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime2}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime2}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                        <siri:DistanceFromStop>2300</siri:DistanceFromStop>
                        <siri:NumberOfStopsAway>3</siri:NumberOfStopsAway>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
            </siri:StopMonitoringDelivery>
         </Answer>
         <AnswerExtension>
         </AnswerExtension>
      </wsdl:GetStopMonitoringResponse>
   </soapenv:Body>
</soapenv:Envelope>]]></con:responseContent><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetStopMonitoring"/></con:response><con:dispatchConfig/></con:mockOperation><con:properties/></con:mockService><con:mockService port="8080" path="/test10Producer_3" host="cloudwatt-pc-dev-00" name="test10Producer_3" bindToHostOnly="false" docroot=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.mock.WsdlMockService@require-soap-action">false</con:setting></con:settings><con:mockOperation name="GetStopMonitoring" interface="SiriProducerRpcBinding" operation="GetStopMonitoring"><con:settings/><con:dispatchStyle>SEQUENCE</con:dispatchStyle><con:defaultResponse>Response 1</con:defaultResponse><con:response name="Response 1" encoding="UTF-8"><con:settings/><con:script>// create XmlHolder for request content
def holder = new com.eviware.soapui.support.XmlHolder( mockRequest.requestContent )
def fournisseur = "SNCF-ACCES"
// define namespace
holder.namespaces["siri"] = "http://www.siri.org.uk/siri"
// récupération de l'id message de la request
requestContext.idMessage = holder["//siri:MessageIdentifier"][0]
requestContext.monitoringRef = holder["//siri:MonitoringRef"]
requestContext.version = holder["//Request/@version"].toString()

// identifiant utilisé (en coherence avec le dataset redis)
requestContext.producerRef="SNCF-ACCES"
requestContext.recordedAtTime = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())
// Passage 1 / course 1
requestContext.itemIdenfier=fournisseur+":Item::1:LOC"
requestContext.lineRef="STIF:Line::004004009"
requestContext.dataFrameRef="any"
requestContext.datedVehicleJourneyRef=fournisseur+":VehicleJourney::1:LOC"
requestContext.journeyPatternRef=fournisseur+":JourneyPattern::1:LOC"
requestContext.journeyPatternName="mission1"
requestContext.publishedLineName="N"
requestContext.routeRef1=fournisseur+":Route::1:LOC"
requestContext.directionName="Rambouillet"
requestContext.operatorRef1=fournisseur+":Operator::SNCF:"
requestContext.originRef1="STIF:StopPoint:Q:108935:"
requestContext.originName1="Arrêt 1"
requestContext.placeRef1="STIF:StopPoint:Q:108943:"
requestContext.placeName1="Arrêt 5"
requestContext.destinationRef1="STIF:StopPoint:Q:108949:"
requestContext.destinationName1="Arrêt 10"
requestContext.vehicleJourneyName1="Course 1"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse = getHeureSuivante(1)
requestContext.originAimedDepartureTime1=heureDepartCourse.toXMLFormat();
requestContext.destinationAimedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,20,0)
//MonitoredCall
requestContext.stopPointRef1=requestContext.monitoringRef
requestContext.stopPointName1="Arrêt 2"
requestContext.aimedArrivalTime1= getAvecMinuteSeconde(heureDepartCourse,2,0).toXMLFormat()
//requestContext.aimedArrivalTime1="2014-04-29T13:00:00.000Z"
requestContext.actualArrivalTime1= getAvecMinuteSeconde(heureDepartCourse,2,1).toXMLFormat()
//requestContext.actualArrivalTime1 = "2014-04-29T13:00:00.000+02:00"
requestContext.expectedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,2,2).toXMLFormat()

requestContext.aimedDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,41).toXMLFormat()
requestContext.actualDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,42).toXMLFormat()
requestContext.expectedDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,43).toXMLFormat()


// passage 2 / course 2
requestContext.monitoringRef2 = holder["//siri:MonitoringRef"]
requestContext.itemIdenfier2=fournisseur+":Item::2:LOC"
requestContext.lineRef2="STIF:Line::004004009"
requestContext.dataFrameRef2="any"
requestContext.datedVehicleJourneyRef2=fournisseur+":VehicleJourney::2:LOC"
requestContext.journeyPatternRef2=fournisseur+":JourneyPattern::2:LOC"
requestContext.routeRef2=fournisseur+":Route::1:LOC"
requestContext.operatorRef2=fournisseur+":Operator::SNCF:"
requestContext.originRef2="STIF:StopPoint:Q:108935:"
requestContext.originName2="Arrêt 1"
requestContext.placeRef2="STIF:StopPoint:Q:108943:"
requestContext.placeName2="Arrêt 5"
requestContext.destinationRef2="STIF:StopPoint:Q:108949:"
requestContext.destinationName2="Arrêt 10"
requestContext.vehicleJourneyName2="Course 2"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse2 = getHeureSuivante(2)
requestContext.originAimedDepartureTime2=heureDepartCourse2.toXMLFormat();
requestContext.destinationAimedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,20,0)
//MonitoredCall
requestContext.stopPointRef2=requestContext.monitoringRef
requestContext.stopPointName2="Arrêt 2"
requestContext.aimedArrivalTime2= getAvecMinuteSeconde(heureDepartCourse2,2,0).toXMLFormat()
requestContext.actualArrivalTime2= getAvecMinuteSeconde(heureDepartCourse2,2,1).toXMLFormat()
requestContext.expectedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,2,2).toXMLFormat()

requestContext.aimedDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,41).toXMLFormat()
requestContext.actualDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,42).toXMLFormat()
requestContext.expectedDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,43).toXMLFormat()



// Methodes utilitaires DATE
// Methode Date permettant d'avoir l'heure courante + heure
def getHeureSuivante(int heure){
	def calendar = Calendar.getInstance();
	calendar.add(Calendar.HOUR,heure);
	calendar.set(Calendar.MINUTE, 0);
	calendar.set(Calendar.SECOND, 0);
	calendar.set(Calendar.MILLISECOND, 0);
	def heureSuivante = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return heureSuivante;
}

// Methode permettant de setter les minites et secondes sur l'heure passée
def getAvecMinuteSeconde(javax.xml.datatype.XMLGregorianCalendar xmlCalendar, int minute, int seconde){ 
	Calendar calendar = xmlCalendar.toGregorianCalendar();	
	calendar.set(Calendar.MINUTE, minute);
	calendar.set(Calendar.SECOND, seconde);
	def date = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return date;
      
}
</con:script><con:responseContent><![CDATA[<!--
Cette réponse renvoie un message non valide SIRI : Suppression de la valeur du monitoring ref
-->
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsdl="http://wsdl.siri.org.uk" xmlns:siri="http://www.siri.org.uk/siri" xmlns:acsb="http://www.ifopt.org.uk/acsb" xmlns:ifop="http://www.ifopt.org.uk/ifopt">
   <soapenv:Header/>
   <soapenv:Body>
      <wsdl:GetStopMonitoringResponse>
         <ServiceDeliveryInfo>
            <siri:ResponseTimestamp>${=javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())}</siri:ResponseTimestamp>
            <siri:ProducerRef>${producerRef}</siri:ProducerRef>
            <siri:ResponseMessageIdentifier>${= UUID.randomUUID().toString()}</siri:ResponseMessageIdentifier>
		  <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
         </ServiceDeliveryInfo>
         <Answer>
            <siri:StopMonitoringDelivery version="${version}">
            	<siri:SubscriptionFilterRef>?</siri:SubscriptionFilterRef>
               <siri:ResponseTimestamp>${recordedAtTime}</siri:ResponseTimestamp>
               <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
               <siri:Status>true</siri:Status>
               <!-- Ajout de la valeur MonitoringName-->
               <siri:MonitoringName>Monitoring Name</siri:MonitoringName>
               <siri:MonitoringRef>${monitoringRef}</siri:MonitoringRef>
               
               <!-- 1 er passage-->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef}</siri:JourneyPatternRef>
                     <siri:JourneyPatternName>${journeyPatternName}</siri:JourneyPatternName>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef1}</siri:RouteRef>
                     <siri:PublishedLineName>${publishedLineName}</siri:PublishedLineName>
                     <siri:DirectionName>${directionName}</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                     <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef1}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie1</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef1}</siri:OriginRef>
                     <siri:OriginName>${originName1}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef1}</siri:PlaceRef>
                        <siri:PlaceName>${placeName1}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef1}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName1}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName1}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime1}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime1}</siri:DestinationAimedArrivalTime>
                     <siri:FirstOrLastJourney>unspecified</siri:FirstOrLastJourney>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <siri:TrainNumbers>
                        <siri:TrainNumberRef>5918</siri:TrainNumberRef>
                     </siri:TrainNumbers>
                     <!-- JourneyParts:-->
                     <siri:JourneyParts>
                        <siri:JourneyPartInfo>
                           <siri:JourneyPartRef>5409</siri:JourneyPartRef>
                           <siri:TrainNumberRef>5928:1</siri:TrainNumberRef>
                           <siri:OperatorRef>${operatorRef1}</siri:OperatorRef>
                        </siri:JourneyPartInfo>
                     </siri:JourneyParts>
                     <!-- MonitoredCall 1er passage-->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef1}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName1}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName1}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime1}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime1}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime1}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalProximityText>à l'approche</siri:ArrivalProximityText>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:ArrivalStopAssignment>
                           <siri:AimedQuayName>voie 2</siri:AimedQuayName>
                        </siri:ArrivalStopAssignment>
                        <siri:AimedDepartureTime>${aimedDepartureTime1}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime1}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime1}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                        <siri:DistanceFromStop>2300</siri:DistanceFromStop>
                        <siri:NumberOfStopsAway>3</siri:NumberOfStopsAway>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
                <!-- 2ème passage -->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier2}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef2}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef2}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef2}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef2}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef2}</siri:JourneyPatternRef>
                     <siri:JourneyPatternName>mission2</siri:JourneyPatternName>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef2}</siri:RouteRef>
                     <siri:PublishedLineName>N</siri:PublishedLineName>
                     <siri:DirectionName>Rambouillet</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                      <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef2}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie2</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef2}</siri:OriginRef>
                     <siri:OriginName>${originName2}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef2}</siri:PlaceRef>
                        <siri:PlaceName>${placeName2}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef2}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName2}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName2}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course 2</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime2}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime2}</siri:DestinationAimedArrivalTime>
                     <siri:FirstOrLastJourney>unspecified</siri:FirstOrLastJourney>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <siri:TrainNumbers>
                        <siri:TrainNumberRef>5918</siri:TrainNumberRef>
                     </siri:TrainNumbers>
                     <!-- JourneyParts:-->
                     <siri:JourneyParts>
                        <siri:JourneyPartInfo>
                           <siri:JourneyPartRef>5409</siri:JourneyPartRef>
                           <siri:TrainNumberRef>5928:1</siri:TrainNumberRef>
                           <siri:OperatorRef>${operatorRef2}</siri:OperatorRef>
                        </siri:JourneyPartInfo>
                     </siri:JourneyParts>
                     <!--  MonitoredCall 2ème passage -->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef2}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName2}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName2}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime2}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime2}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime2}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalProximityText>à l'approche</siri:ArrivalProximityText>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:ArrivalStopAssignment>
                           <siri:AimedQuayName>voie 2</siri:AimedQuayName>
                        </siri:ArrivalStopAssignment>
                        <siri:AimedDepartureTime>${aimedDepartureTime2}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime2}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime2}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                        <siri:DistanceFromStop>2300</siri:DistanceFromStop>
                        <siri:NumberOfStopsAway>3</siri:NumberOfStopsAway>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
            </siri:StopMonitoringDelivery>
         </Answer>
         <AnswerExtension>
         </AnswerExtension>
      </wsdl:GetStopMonitoringResponse>
   </soapenv:Body>
</soapenv:Envelope>]]></con:responseContent><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetStopMonitoring"/></con:response><con:dispatchConfig/></con:mockOperation><con:properties/></con:mockService><con:mockService port="8080" path="/test10Producer_4" host="cloudwatt-pc-dev-00" name="test10Producer_4" bindToHostOnly="false" docroot=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.mock.WsdlMockService@require-soap-action">false</con:setting></con:settings><con:mockOperation name="GetStopMonitoring" interface="SiriProducerRpcBinding" operation="GetStopMonitoring"><con:settings/><con:dispatchStyle>SEQUENCE</con:dispatchStyle><con:defaultResponse>Response 1</con:defaultResponse><con:response name="Response 1" encoding="UTF-8"><con:settings/><con:script>// create XmlHolder for request content
def holder = new com.eviware.soapui.support.XmlHolder( mockRequest.requestContent )
def fournisseur = "SNCF-ACCES"
// define namespace
holder.namespaces["siri"] = "http://www.siri.org.uk/siri"
// récupération de l'id message de la request
requestContext.idMessage = holder["//siri:MessageIdentifier"][0]
requestContext.monitoringRef = holder["//siri:MonitoringRef"]
requestContext.version = holder["//Request/@version"].toString()

// identifiant utilisé (en coherence avec le dataset redis)
requestContext.producerRef="SNCF-ACCES"
requestContext.recordedAtTime = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())
// Passage 1 / course 1
requestContext.itemIdenfier=fournisseur+":Item::1:LOC"
requestContext.lineRef="STIF:Line::004004009"
requestContext.dataFrameRef="any"
requestContext.datedVehicleJourneyRef=fournisseur+":VehicleJourney::1:LOC"
requestContext.journeyPatternRef=fournisseur+":JourneyPattern::1:LOC"
requestContext.journeyPatternName="mission1"
requestContext.publishedLineName="N"
requestContext.routeRef1=fournisseur+":Route::1:LOC"
requestContext.directionName="Rambouillet"
requestContext.operatorRef1=fournisseur+":Operator::SNCF:"
requestContext.originRef1="STIF:StopPoint:Q:108935:"
requestContext.originName1="Arrêt 1"
requestContext.placeRef1="STIF:StopPoint:Q:108943:"
requestContext.placeName1="Arrêt 5"
requestContext.destinationRef1="STIF:StopPoint:Q:108949:"
requestContext.destinationName1="Arrêt 10"
requestContext.vehicleJourneyName1="Course 1"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse = getHeureSuivante(1)
requestContext.originAimedDepartureTime1=heureDepartCourse.toXMLFormat();
requestContext.destinationAimedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,20,0)
//MonitoredCall
requestContext.stopPointRef1=requestContext.monitoringRef
requestContext.stopPointName1="Arrêt 2"
requestContext.aimedArrivalTime1= getAvecMinuteSeconde(heureDepartCourse,2,0).toXMLFormat()
//requestContext.aimedArrivalTime1="2014-04-29T13:00:00.000Z"
requestContext.actualArrivalTime1= getAvecMinuteSeconde(heureDepartCourse,2,1).toXMLFormat()
//requestContext.actualArrivalTime1 = "2014-04-29T13:00:00.000+02:00"
requestContext.expectedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,2,2).toXMLFormat()

requestContext.aimedDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,41).toXMLFormat()
requestContext.actualDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,42).toXMLFormat()
requestContext.expectedDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,43).toXMLFormat()


// passage 2 / course 2
requestContext.monitoringRef2 = holder["//siri:MonitoringRef"]
requestContext.itemIdenfier2=fournisseur+":Item::2:LOC"
requestContext.lineRef2="STIF:Line::004004009"
requestContext.dataFrameRef2="any"
requestContext.datedVehicleJourneyRef2=fournisseur+":VehicleJourney::2:LOC"
requestContext.journeyPatternRef2=fournisseur+":JourneyPattern::2:LOC"
requestContext.routeRef2=fournisseur+":Route::1:LOC"
requestContext.operatorRef2=fournisseur+":Operator::SNCF:"
requestContext.originRef2="STIF:StopPoint:Q:108935:"
requestContext.originName2="Arrêt 1"
requestContext.placeRef2="STIF:StopPoint:Q:108943:"
requestContext.placeName2="Arrêt 5"
requestContext.destinationRef2="STIF:StopPoint:Q:108949:"
requestContext.destinationName2="Arrêt 10"
requestContext.vehicleJourneyName2="Course 2"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse2 = getHeureSuivante(2)
requestContext.originAimedDepartureTime2=heureDepartCourse2.toXMLFormat();
requestContext.destinationAimedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,20,0)
//MonitoredCall
requestContext.stopPointRef2=requestContext.monitoringRef
requestContext.stopPointName2="Arrêt 2"
requestContext.aimedArrivalTime2= getAvecMinuteSeconde(heureDepartCourse2,2,0).toXMLFormat()
requestContext.actualArrivalTime2= getAvecMinuteSeconde(heureDepartCourse2,2,1).toXMLFormat()
requestContext.expectedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,2,2).toXMLFormat()

requestContext.aimedDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,41).toXMLFormat()
requestContext.actualDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,42).toXMLFormat()
requestContext.expectedDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,43).toXMLFormat()



// Methodes utilitaires DATE
// Methode Date permettant d'avoir l'heure courante + heure
def getHeureSuivante(int heure){
	def calendar = Calendar.getInstance();
	calendar.add(Calendar.HOUR,heure);
	calendar.set(Calendar.MINUTE, 0);
	calendar.set(Calendar.SECOND, 0);
	calendar.set(Calendar.MILLISECOND, 0);
	def heureSuivante = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return heureSuivante;
}

// Methode permettant de setter les minites et secondes sur l'heure passée
def getAvecMinuteSeconde(javax.xml.datatype.XMLGregorianCalendar xmlCalendar, int minute, int seconde){ 
	Calendar calendar = xmlCalendar.toGregorianCalendar();	
	calendar.set(Calendar.MINUTE, minute);
	calendar.set(Calendar.SECOND, seconde);
	def date = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return date;
      
}
</con:script><con:responseContent><![CDATA[<!--
Cette réponse renvoie un message non valide SIRI : Suppression de la valeur du monitoring ref
-->
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsdl="http://wsdl.siri.org.uk" xmlns:siri="http://www.siri.org.uk/siri" xmlns:acsb="http://www.ifopt.org.uk/acsb" xmlns:ifop="http://www.ifopt.org.uk/ifopt">
   <soapenv:Header/>
   <soapenv:Body>
      <wsdl:GetStopMonitoringResponse>
         <ServiceDeliveryInfo>
            <siri:ResponseTimestamp>${=javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())}</siri:ResponseTimestamp>
            <siri:ProducerRef>${producerRef}</siri:ProducerRef>
            <siri:ResponseMessageIdentifier>${= UUID.randomUUID().toString()}</siri:ResponseMessageIdentifier>
		  <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
         </ServiceDeliveryInfo>
         <Answer>
            <siri:StopMonitoringDelivery version="${version}">
            	<siri:SubscriptionFilterRef>?</siri:SubscriptionFilterRef>
               <siri:ResponseTimestamp>${recordedAtTime}</siri:ResponseTimestamp>
               <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
               <siri:Status>true</siri:Status>
              
               <siri:MonitoringRef>${monitoringRef}</siri:MonitoringRef>
               <!-- 1 er passage-->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier}</siri:ItemIdentifier>
                  <!-- Absence de la valeur du monitoringRef-->
                  <siri:MonitoringRef></siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef}</siri:JourneyPatternRef>
                     <siri:JourneyPatternName>${journeyPatternName}</siri:JourneyPatternName>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef1}</siri:RouteRef>
                     <siri:PublishedLineName>${publishedLineName}</siri:PublishedLineName>
                     <siri:DirectionName>${directionName}</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                     <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef1}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie1</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef1}</siri:OriginRef>
                     <siri:OriginName>${originName1}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef1}</siri:PlaceRef>
                        <siri:PlaceName>${placeName1}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef1}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName1}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName1}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime1}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime1}</siri:DestinationAimedArrivalTime>
                     <siri:FirstOrLastJourney>unspecified</siri:FirstOrLastJourney>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <siri:TrainNumbers>
                        <siri:TrainNumberRef>5918</siri:TrainNumberRef>
                     </siri:TrainNumbers>
                     <!-- JourneyParts:-->
                     <siri:JourneyParts>
                        <siri:JourneyPartInfo>
                           <siri:JourneyPartRef>5409</siri:JourneyPartRef>
                           <siri:TrainNumberRef>5928:1</siri:TrainNumberRef>
                           <siri:OperatorRef>${operatorRef1}</siri:OperatorRef>
                        </siri:JourneyPartInfo>
                     </siri:JourneyParts>
                     <!-- MonitoredCall 1er passage-->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef1}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName1}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName1}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime1}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime1}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime1}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalProximityText>à l'approche</siri:ArrivalProximityText>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:ArrivalStopAssignment>
                           <siri:AimedQuayName>voie 2</siri:AimedQuayName>
                        </siri:ArrivalStopAssignment>
                        <siri:AimedDepartureTime>${aimedDepartureTime1}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime1}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime1}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                        <siri:DistanceFromStop>2300</siri:DistanceFromStop>
                        <siri:NumberOfStopsAway>3</siri:NumberOfStopsAway>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
                <!-- 2ème passage -->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier2}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef2}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef2}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef2}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef2}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef2}</siri:JourneyPatternRef>
                     <siri:JourneyPatternName>mission2</siri:JourneyPatternName>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef2}</siri:RouteRef>
                     <siri:PublishedLineName>N</siri:PublishedLineName>
                     <siri:DirectionName>Rambouillet</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                      <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef2}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie2</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef2}</siri:OriginRef>
                     <siri:OriginName>${originName2}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef2}</siri:PlaceRef>
                        <siri:PlaceName>${placeName2}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef2}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName2}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName2}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course 2</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime2}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime2}</siri:DestinationAimedArrivalTime>
                     <siri:FirstOrLastJourney>unspecified</siri:FirstOrLastJourney>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <siri:TrainNumbers>
                        <siri:TrainNumberRef>5918</siri:TrainNumberRef>
                     </siri:TrainNumbers>
                     <!-- JourneyParts:-->
                     <siri:JourneyParts>
                        <siri:JourneyPartInfo>
                           <siri:JourneyPartRef>5409</siri:JourneyPartRef>
                           <siri:TrainNumberRef>5928:1</siri:TrainNumberRef>
                           <siri:OperatorRef>${operatorRef2}</siri:OperatorRef>
                        </siri:JourneyPartInfo>
                     </siri:JourneyParts>
                     <!--  MonitoredCall 2ème passage -->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef2}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName2}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName2}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime2}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime2}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime2}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalProximityText>à l'approche</siri:ArrivalProximityText>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:ArrivalStopAssignment>
                           <siri:AimedQuayName>voie 2</siri:AimedQuayName>
                        </siri:ArrivalStopAssignment>
                        <siri:AimedDepartureTime>${aimedDepartureTime2}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime2}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime2}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                        <siri:DistanceFromStop>2300</siri:DistanceFromStop>
                        <siri:NumberOfStopsAway>3</siri:NumberOfStopsAway>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
            </siri:StopMonitoringDelivery>
         </Answer>
         <AnswerExtension>
         </AnswerExtension>
      </wsdl:GetStopMonitoringResponse>
   </soapenv:Body>
</soapenv:Envelope>]]></con:responseContent><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetStopMonitoring"/></con:response><con:dispatchConfig/></con:mockOperation><con:properties/></con:mockService><con:mockService port="8080" path="/test10Producer_5" host="L276002" name="test10Producer_5" bindToHostOnly="false" docroot=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.mock.WsdlMockService@require-soap-action">false</con:setting></con:settings><con:mockOperation name="GetStopMonitoring" interface="SiriProducerRpcBinding" operation="GetStopMonitoring"><con:settings/><con:dispatchStyle>SCRIPT</con:dispatchStyle><con:defaultResponse>Response 1</con:defaultResponse><con:response name="Response 1" encoding="UTF-8"><con:settings/><con:script>// create XmlHolder for request content
def holder = new com.eviware.soapui.support.XmlHolder( mockRequest.requestContent )
def fournisseur = "SNCF-ACCES"
// define namespace
holder.namespaces["siri"] = "http://www.siri.org.uk/siri"
// récupération de l'id message de la request
requestContext.idMessage = holder["//siri:MessageIdentifier"][0]
requestContext.monitoringRef = holder["//siri:MonitoringRef"]
requestContext.version = holder["//Request/@version"].toString()

// identifiant utilisé (en coherence avec le dataset redis)
requestContext.producerRef="SNCF-ACCES"
requestContext.recordedAtTime = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())
// Passage 1 / course 1
requestContext.itemIdenfier=fournisseur+":Item::1:LOC"
requestContext.lineRef="STIF:Line::004004009"
requestContext.dataFrameRef="any"
requestContext.datedVehicleJourneyRef=fournisseur+":VehicleJourney::1:LOC"
requestContext.journeyPatternRef=fournisseur+":JourneyPattern::1:LOC"
requestContext.journeyPatternName="mission1"
requestContext.publishedLineName="N"
requestContext.routeRef1=fournisseur+":Route::1:LOC"
requestContext.directionName="Rambouillet"
requestContext.operatorRef1=fournisseur+":Operator::SNCF:"
requestContext.originRef1="STIF:StopPoint:Q:108935:"
requestContext.originName1="Arrêt 1"
requestContext.placeRef1="STIF:StopPoint:Q:108943:"
requestContext.placeName1="Arrêt 5"
requestContext.destinationRef1="STIF:StopPoint:Q:108949:"
requestContext.destinationName1="Arrêt 10"
requestContext.vehicleJourneyName1="Course 1"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse = getHeureSuivante(1)
requestContext.originAimedDepartureTime1=heureDepartCourse.toXMLFormat();
requestContext.destinationAimedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,20,0)
//MonitoredCall
requestContext.stopPointRef1=requestContext.monitoringRef
requestContext.stopPointName1="Arrêt 2"
requestContext.aimedArrivalTime1= getAvecMinuteSeconde(heureDepartCourse,2,0).toXMLFormat()
//requestContext.aimedArrivalTime1="2014-04-29T13:00:00.000Z"
requestContext.actualArrivalTime1= getAvecMinuteSeconde(heureDepartCourse,2,1).toXMLFormat()
//requestContext.actualArrivalTime1 = "2014-04-29T13:00:00.000+02:00"
requestContext.expectedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,2,2).toXMLFormat()

requestContext.aimedDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,41).toXMLFormat()
requestContext.actualDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,42).toXMLFormat()
requestContext.expectedDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,43).toXMLFormat()


// passage 2 / course 2
requestContext.monitoringRef2 = holder["//siri:MonitoringRef"]
requestContext.itemIdenfier2=fournisseur+":Item::2:LOC"
requestContext.lineRef2="STIF:Line::004004009"
requestContext.dataFrameRef2="any"
requestContext.datedVehicleJourneyRef2=fournisseur+":VehicleJourney::2:LOC"
requestContext.journeyPatternRef2=fournisseur+":JourneyPattern::2:LOC"
requestContext.routeRef2=fournisseur+":Route::1:LOC"
requestContext.operatorRef2=fournisseur+":Operator::SNCF:"
requestContext.originRef2="STIF:StopPoint:Q:108935:"
requestContext.originName2="Arrêt 1"
requestContext.placeRef2="STIF:StopPoint:Q:108943:"
requestContext.placeName2="Arrêt 5"
requestContext.destinationRef2="STIF:StopPoint:Q:108949:"
requestContext.destinationName2="Arrêt 10"
requestContext.vehicleJourneyName2="Course 2"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse2 = getHeureSuivante(2)
requestContext.originAimedDepartureTime2=heureDepartCourse2.toXMLFormat();
requestContext.destinationAimedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,20,0)
//MonitoredCall
requestContext.stopPointRef2=requestContext.monitoringRef
requestContext.stopPointName2="Arrêt 2"
requestContext.aimedArrivalTime2= getAvecMinuteSeconde(heureDepartCourse2,2,0).toXMLFormat()
requestContext.actualArrivalTime2= getAvecMinuteSeconde(heureDepartCourse2,2,1).toXMLFormat()
requestContext.expectedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,2,2).toXMLFormat()

requestContext.aimedDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,41).toXMLFormat()
requestContext.actualDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,42).toXMLFormat()
requestContext.expectedDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,43).toXMLFormat()



// Methodes utilitaires DATE
// Methode Date permettant d'avoir l'heure courante + heure
def getHeureSuivante(int heure){
	def calendar = Calendar.getInstance();
	calendar.add(Calendar.HOUR,heure);
	calendar.set(Calendar.MINUTE, 0);
	calendar.set(Calendar.SECOND, 0);
	calendar.set(Calendar.MILLISECOND, 0);
	def heureSuivante = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return heureSuivante;
}

// Methode permettant de setter les minites et secondes sur l'heure passée
def getAvecMinuteSeconde(javax.xml.datatype.XMLGregorianCalendar xmlCalendar, int minute, int seconde){ 
	Calendar calendar = xmlCalendar.toGregorianCalendar();	
	calendar.set(Calendar.MINUTE, minute);
	calendar.set(Calendar.SECOND, seconde);
	def date = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return date;
      
}
</con:script><con:responseContent><![CDATA[<!--
Ajout du champ facultatif ValidUntilTime 
-->
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsdl="http://wsdl.siri.org.uk" xmlns:siri="http://www.siri.org.uk/siri" xmlns:acsb="http://www.ifopt.org.uk/acsb" xmlns:ifop="http://www.ifopt.org.uk/ifopt">
   <soapenv:Header/>
   <soapenv:Body>
      <wsdl:GetStopMonitoringResponse>
         <ServiceDeliveryInfo>
            <siri:ResponseTimestamp>${=javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())}</siri:ResponseTimestamp>
            <siri:ProducerRef>${producerRef}</siri:ProducerRef>
            <siri:ResponseMessageIdentifier>${= UUID.randomUUID().toString()}</siri:ResponseMessageIdentifier>
		  <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
         </ServiceDeliveryInfo>
         <Answer>
            <siri:StopMonitoringDelivery version="${version}">
            	<siri:SubscriptionFilterRef>?</siri:SubscriptionFilterRef>
               <siri:ResponseTimestamp>${recordedAtTime}</siri:ResponseTimestamp>
               <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
               <siri:Status>true</siri:Status>
               <siri:MonitoringRef>${monitoringRef}</siri:MonitoringRef>
               <!-- 1 er passage-->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier}</siri:ItemIdentifier>
                  <!-- Ajout du champ facultatif ValidUntilTime -->
                  <siri:ValidUntilTime>${recordedAtTime}</siri:ValidUntilTime>
                  <siri:MonitoringRef>${monitoringRef}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef}</siri:JourneyPatternRef>
                     <siri:JourneyPatternName>${journeyPatternName}</siri:JourneyPatternName>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef1}</siri:RouteRef>
                     <siri:PublishedLineName>${publishedLineName}</siri:PublishedLineName>
                     <siri:DirectionName>${directionName}</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                     <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef1}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie1</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef1}</siri:OriginRef>
                     <siri:OriginName>${originName1}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef1}</siri:PlaceRef>
                        <siri:PlaceName>${placeName1}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef1}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName1}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName1}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime1}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime1}</siri:DestinationAimedArrivalTime>
                     <siri:FirstOrLastJourney>unspecified</siri:FirstOrLastJourney>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <siri:TrainNumbers>
                        <siri:TrainNumberRef>5918</siri:TrainNumberRef>
                     </siri:TrainNumbers>
                     <!-- JourneyParts:-->
                     <siri:JourneyParts>
                        <siri:JourneyPartInfo>
                           <siri:JourneyPartRef>5409</siri:JourneyPartRef>
                           <siri:TrainNumberRef>5928:1</siri:TrainNumberRef>
                           <siri:OperatorRef>${operatorRef1}</siri:OperatorRef>
                        </siri:JourneyPartInfo>
                     </siri:JourneyParts>
                     <!-- MonitoredCall 1er passage-->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef1}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName1}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName1}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime1}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime1}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime1}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalProximityText>à l'approche</siri:ArrivalProximityText>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:ArrivalStopAssignment>
                           <siri:AimedQuayName>voie 2</siri:AimedQuayName>
                        </siri:ArrivalStopAssignment>
                        <siri:AimedDepartureTime>${aimedDepartureTime1}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime1}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime1}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                        <siri:DistanceFromStop>2300</siri:DistanceFromStop>
                        <siri:NumberOfStopsAway>3</siri:NumberOfStopsAway>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
                <!-- 2ème passage -->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier2}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef2}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef2}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef2}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef2}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef2}</siri:JourneyPatternRef>
                     <siri:JourneyPatternName>mission2</siri:JourneyPatternName>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef2}</siri:RouteRef>
                     <siri:PublishedLineName>N</siri:PublishedLineName>
                     <siri:DirectionName>Rambouillet</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                      <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef2}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie2</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef2}</siri:OriginRef>
                     <siri:OriginName>${originName2}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef2}</siri:PlaceRef>
                        <siri:PlaceName>${placeName2}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef2}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName2}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName2}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course 2</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime2}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime2}</siri:DestinationAimedArrivalTime>
                     <siri:FirstOrLastJourney>unspecified</siri:FirstOrLastJourney>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <siri:TrainNumbers>
                        <siri:TrainNumberRef>5918</siri:TrainNumberRef>
                     </siri:TrainNumbers>
                     <!-- JourneyParts:-->
                     <siri:JourneyParts>
                        <siri:JourneyPartInfo>
                           <siri:JourneyPartRef>5409</siri:JourneyPartRef>
                           <siri:TrainNumberRef>5928:1</siri:TrainNumberRef>
                           <siri:OperatorRef>${operatorRef2}</siri:OperatorRef>
                        </siri:JourneyPartInfo>
                     </siri:JourneyParts>
                     <!--  MonitoredCall 2ème passage -->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef2}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName2}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName2}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime2}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime2}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime2}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalProximityText>à l'approche</siri:ArrivalProximityText>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:ArrivalStopAssignment>
                           <siri:AimedQuayName>voie 2</siri:AimedQuayName>
                        </siri:ArrivalStopAssignment>
                        <siri:AimedDepartureTime>${aimedDepartureTime2}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime2}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime2}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                        <siri:DistanceFromStop>2300</siri:DistanceFromStop>
                        <siri:NumberOfStopsAway>3</siri:NumberOfStopsAway>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
            </siri:StopMonitoringDelivery>
         </Answer>
         <AnswerExtension>
         </AnswerExtension>
      </wsdl:GetStopMonitoringResponse>
   </soapenv:Body>
</soapenv:Envelope>]]></con:responseContent><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetStopMonitoring"/></con:response><con:dispatchConfig/></con:mockOperation><con:properties/></con:mockService><con:mockService port="8080" path="/test10Producer_6" host="L276002" name="test10Producer_6" bindToHostOnly="false" docroot=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.mock.WsdlMockService@require-soap-action">false</con:setting></con:settings><con:mockOperation name="GetStopMonitoring" interface="SiriProducerRpcBinding" operation="GetStopMonitoring"><con:settings/><con:dispatchStyle>SCRIPT</con:dispatchStyle><con:defaultResponse>Response 1</con:defaultResponse><con:response name="Response 1" encoding="UTF-8"><con:settings/><con:script>// create XmlHolder for request content
def holder = new com.eviware.soapui.support.XmlHolder( mockRequest.requestContent )
def fournisseur = "SNCF-ACCES"
// define namespace
holder.namespaces["siri"] = "http://www.siri.org.uk/siri"
// récupération de l'id message de la request
requestContext.idMessage = holder["//siri:MessageIdentifier"][0]
requestContext.monitoringRef = holder["//siri:MonitoringRef"]
requestContext.version = holder["//Request/@version"].toString()

// identifiant utilisé (en coherence avec le dataset redis)
requestContext.producerRef="SNCF-ACCES"
requestContext.recordedAtTime = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())
// Passage 1 / course 1
requestContext.itemIdenfier=fournisseur+":Item::1:LOC"
requestContext.lineRef="STIF:Line::004004009"
requestContext.dataFrameRef="any"
requestContext.datedVehicleJourneyRef=fournisseur+":VehicleJourney::1:LOC"
requestContext.journeyPatternRef=fournisseur+":JourneyPattern::1:LOC"
requestContext.journeyPatternName="mission1"
requestContext.publishedLineName="N"
requestContext.routeRef1=fournisseur+":Route::1:LOC"
requestContext.directionName="Rambouillet"
requestContext.operatorRef1=fournisseur+":Operator::SNCF:"
requestContext.originRef1="STIF:StopPoint:Q:108935:"
requestContext.originName1="Arrêt 1"
requestContext.placeRef1="STIF:StopPoint:Q:108943:"
requestContext.placeName1="Arrêt 5"
requestContext.destinationRef1="STIF:StopPoint:Q:108949:"
requestContext.destinationName1="Arrêt 10"
requestContext.vehicleJourneyName1="Course 1"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse = getHeureSuivante(1)
requestContext.originAimedDepartureTime1=heureDepartCourse.toXMLFormat();
requestContext.destinationAimedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,20,0)
//MonitoredCall
requestContext.stopPointRef1=requestContext.monitoringRef
requestContext.stopPointName1="Arrêt 2"
requestContext.aimedArrivalTime1= getAvecMinuteSeconde(heureDepartCourse,2,0).toXMLFormat()
//requestContext.aimedArrivalTime1="2014-04-29T13:00:00.000Z"
requestContext.actualArrivalTime1= getAvecMinuteSeconde(heureDepartCourse,2,1).toXMLFormat()
//requestContext.actualArrivalTime1 = "2014-04-29T13:00:00.000+02:00"
requestContext.expectedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,2,2).toXMLFormat()

requestContext.aimedDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,41).toXMLFormat()
requestContext.actualDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,42).toXMLFormat()
requestContext.expectedDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,43).toXMLFormat()


// passage 2 / course 2
requestContext.monitoringRef2 = holder["//siri:MonitoringRef"]
requestContext.itemIdenfier2=fournisseur+":Item::2:LOC"
requestContext.lineRef2="STIF:Line::004004009"
requestContext.dataFrameRef2="any"
requestContext.datedVehicleJourneyRef2=fournisseur+":VehicleJourney::2:LOC"
requestContext.journeyPatternRef2=fournisseur+":JourneyPattern::2:LOC"
requestContext.routeRef2=fournisseur+":Route::1:LOC"
requestContext.operatorRef2=fournisseur+":Operator::SNCF:"
requestContext.originRef2="STIF:StopPoint:Q:108935:"
requestContext.originName2="Arrêt 1"
requestContext.placeRef2="STIF:StopPoint:Q:108943:"
requestContext.placeName2="Arrêt 5"
requestContext.destinationRef2="STIF:StopPoint:Q:108949:"
requestContext.destinationName2="Arrêt 10"
requestContext.vehicleJourneyName2="Course 2"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse2 = getHeureSuivante(2)
requestContext.originAimedDepartureTime2=heureDepartCourse2.toXMLFormat();
requestContext.destinationAimedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,20,0)
//MonitoredCall
requestContext.stopPointRef2=requestContext.monitoringRef
requestContext.stopPointName2="Arrêt 2"
requestContext.aimedArrivalTime2= getAvecMinuteSeconde(heureDepartCourse2,2,0).toXMLFormat()
requestContext.actualArrivalTime2= getAvecMinuteSeconde(heureDepartCourse2,2,1).toXMLFormat()
requestContext.expectedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,2,2).toXMLFormat()

requestContext.aimedDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,41).toXMLFormat()
requestContext.actualDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,42).toXMLFormat()
requestContext.expectedDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,43).toXMLFormat()



// Methodes utilitaires DATE
// Methode Date permettant d'avoir l'heure courante + heure
def getHeureSuivante(int heure){
	def calendar = Calendar.getInstance();
	calendar.add(Calendar.HOUR,heure);
	calendar.set(Calendar.MINUTE, 0);
	calendar.set(Calendar.SECOND, 0);
	calendar.set(Calendar.MILLISECOND, 0);
	def heureSuivante = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return heureSuivante;
}

// Methode permettant de setter les minites et secondes sur l'heure passée
def getAvecMinuteSeconde(javax.xml.datatype.XMLGregorianCalendar xmlCalendar, int minute, int seconde){ 
	Calendar calendar = xmlCalendar.toGregorianCalendar();	
	calendar.set(Calendar.MINUTE, minute);
	calendar.set(Calendar.SECOND, seconde);
	def date = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return date;
      
}
</con:script><con:responseContent><![CDATA[<!--
Ajout du champ facultatif ValidUntilTime 
-->
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsdl="http://wsdl.siri.org.uk" xmlns:siri="http://www.siri.org.uk/siri" xmlns:acsb="http://www.ifopt.org.uk/acsb" xmlns:ifop="http://www.ifopt.org.uk/ifopt">
   <soapenv:Header/>
   <soapenv:Body>
      <wsdl:GetStopMonitoringResponse>
         <ServiceDeliveryInfo>
            <siri:ResponseTimestamp>${=javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())}</siri:ResponseTimestamp>
            <siri:ProducerRef>${producerRef}</siri:ProducerRef>
            <siri:ResponseMessageIdentifier>${= UUID.randomUUID().toString()}</siri:ResponseMessageIdentifier>
		  <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
         </ServiceDeliveryInfo>
         <Answer>
            <siri:StopMonitoringDelivery version="${version}">
            	<siri:SubscriptionFilterRef>?</siri:SubscriptionFilterRef>
               <siri:ResponseTimestamp>${recordedAtTime}</siri:ResponseTimestamp>
               <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
               <siri:Status>true</siri:Status>
               <siri:MonitoringRef>${monitoringRef}</siri:MonitoringRef>
               <!-- 1 er passage-->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier}</siri:ItemIdentifier>
                  
                  <siri:MonitoringRef>${monitoringRef}</siri:MonitoringRef>
                  <!-- Ajout du champ facultatif StopVisitNote -->
                  <siri:StopVisitNote>Stop Visit Note</siri:StopVisitNote>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef}</siri:JourneyPatternRef>
                     <siri:JourneyPatternName>${journeyPatternName}</siri:JourneyPatternName>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef1}</siri:RouteRef>
                     <siri:PublishedLineName>${publishedLineName}</siri:PublishedLineName>
                     <siri:DirectionName>${directionName}</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                     <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef1}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie1</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef1}</siri:OriginRef>
                     <siri:OriginName>${originName1}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef1}</siri:PlaceRef>
                        <siri:PlaceName>${placeName1}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef1}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName1}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName1}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime1}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime1}</siri:DestinationAimedArrivalTime>
                     <siri:FirstOrLastJourney>unspecified</siri:FirstOrLastJourney>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <siri:TrainNumbers>
                        <siri:TrainNumberRef>5918</siri:TrainNumberRef>
                     </siri:TrainNumbers>
                     <!-- JourneyParts:-->
                     <siri:JourneyParts>
                        <siri:JourneyPartInfo>
                           <siri:JourneyPartRef>5409</siri:JourneyPartRef>
                           <siri:TrainNumberRef>5928:1</siri:TrainNumberRef>
                           <siri:OperatorRef>${operatorRef1}</siri:OperatorRef>
                        </siri:JourneyPartInfo>
                     </siri:JourneyParts>
                     <!-- MonitoredCall 1er passage-->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef1}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName1}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName1}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime1}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime1}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime1}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalProximityText>à l'approche</siri:ArrivalProximityText>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:ArrivalStopAssignment>
                           <siri:AimedQuayName>voie 2</siri:AimedQuayName>
                        </siri:ArrivalStopAssignment>
                        <siri:AimedDepartureTime>${aimedDepartureTime1}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime1}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime1}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                        <siri:DistanceFromStop>2300</siri:DistanceFromStop>
                        <siri:NumberOfStopsAway>3</siri:NumberOfStopsAway>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
                <!-- 2ème passage -->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier2}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef2}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef2}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef2}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef2}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef2}</siri:JourneyPatternRef>
                     <siri:JourneyPatternName>mission2</siri:JourneyPatternName>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef2}</siri:RouteRef>
                     <siri:PublishedLineName>N</siri:PublishedLineName>
                     <siri:DirectionName>Rambouillet</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                      <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef2}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie2</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef2}</siri:OriginRef>
                     <siri:OriginName>${originName2}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef2}</siri:PlaceRef>
                        <siri:PlaceName>${placeName2}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef2}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName2}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName2}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course 2</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime2}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime2}</siri:DestinationAimedArrivalTime>
                     <siri:FirstOrLastJourney>unspecified</siri:FirstOrLastJourney>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <siri:TrainNumbers>
                        <siri:TrainNumberRef>5918</siri:TrainNumberRef>
                     </siri:TrainNumbers>
                     <!-- JourneyParts:-->
                     <siri:JourneyParts>
                        <siri:JourneyPartInfo>
                           <siri:JourneyPartRef>5409</siri:JourneyPartRef>
                           <siri:TrainNumberRef>5928:1</siri:TrainNumberRef>
                           <siri:OperatorRef>${operatorRef2}</siri:OperatorRef>
                        </siri:JourneyPartInfo>
                     </siri:JourneyParts>
                     <!--  MonitoredCall 2ème passage -->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef2}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName2}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName2}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime2}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime2}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime2}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalProximityText>à l'approche</siri:ArrivalProximityText>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:ArrivalStopAssignment>
                           <siri:AimedQuayName>voie 2</siri:AimedQuayName>
                        </siri:ArrivalStopAssignment>
                        <siri:AimedDepartureTime>${aimedDepartureTime2}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime2}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime2}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                        <siri:DistanceFromStop>2300</siri:DistanceFromStop>
                        <siri:NumberOfStopsAway>3</siri:NumberOfStopsAway>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
            </siri:StopMonitoringDelivery>
         </Answer>
         <AnswerExtension>
         </AnswerExtension>
      </wsdl:GetStopMonitoringResponse>
   </soapenv:Body>
</soapenv:Envelope>]]></con:responseContent><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetStopMonitoring"/></con:response><con:dispatchConfig/></con:mockOperation><con:properties/></con:mockService><con:mockService port="8080" path="/test34Producer_1" host="L276002" name="test34Producer_1" bindToHostOnly="false" docroot=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.mock.WsdlMockService@require-soap-action">false</con:setting></con:settings><con:mockOperation name="GetStopMonitoring" interface="SiriProducerRpcBinding" operation="GetStopMonitoring"><con:settings/><con:dispatchStyle>SEQUENCE</con:dispatchStyle><con:defaultResponse>Response 1</con:defaultResponse><con:response name="Response 1" encoding="UTF-8"><con:settings/><con:script>// create XmlHolder for request content
def holder = new com.eviware.soapui.support.XmlHolder( mockRequest.requestContent )
// define namespace
holder.namespaces["siri"] = "http://www.siri.org.uk/siri"
// récupération de l'id message de la request
requestContext.idMessage = holder["//siri:MessageIdentifier"][0]
</con:script><con:responseContent><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:new="http://new.webservice.namespace" xmlns:siri="http://www.siri.org.uk/">
   <soapenv:Header/>
   <soapenv:Body>
      <new:GetStopMonitoringResponse>
         <ServiceDeliveryInfo>
             <siri:ResponseTimestamp>${=javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())}</siri:ResponseTimestamp>
            <siri:ProducerRef>SNCF-ACCES</siri:ProducerRef>
            <siri:ResponseMessageIdentifier>RATP:Message::1:LOC</siri:ResponseMessageIdentifier>
		  <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
         </ServiceDeliveryInfo>
         <Answer>
            <siri:StopMonitoringDelivery version="2.0[FR-IDF-2.1]">
               <siri:ResponseTimestamp>${=javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())}</siri:ResponseTimestamp>
               <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
               <siri:Status>true</siri:Status>
            </siri:StopMonitoringDelivery>
         </Answer>
         <AnswerExtension>
         </AnswerExtension>
      </new:GetStopMonitoringResponse>
   </soapenv:Body>
</soapenv:Envelope>
]]></con:responseContent><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetStopMonitoring"/></con:response><con:dispatchConfig/></con:mockOperation><con:properties/></con:mockService><con:mockService port="8080" path="/test1Producer_1" host="L276002" name="test1Producer_1" bindToHostOnly="false" docroot=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.mock.WsdlMockService@require-soap-action">false</con:setting></con:settings><con:mockOperation name="GetStopMonitoring" interface="SiriProducerRpcBinding" operation="GetStopMonitoring"><con:settings/><con:dispatchStyle>SCRIPT</con:dispatchStyle><con:defaultResponse>Response 1</con:defaultResponse><con:response name="Response 1" encoding="UTF-8"><con:settings/><con:script>// create XmlHolder for request content
def holder = new com.eviware.soapui.support.XmlHolder( mockRequest.requestContent )
def fournisseur = "SNCF-ACCES"
// define namespace
holder.namespaces["siri"] = "http://www.siri.org.uk/siri"
// récupération de l'id message de la request
requestContext.idMessage = holder["//siri:MessageIdentifier"][0]
requestContext.monitoringRef = holder["//siri:MonitoringRef"]
requestContext.version = holder["//Request/@version"].toString()

// identifiant utilisé (en coherence avec le dataset redis)
requestContext.producerRef="SNCF-ACCES"
requestContext.recordedAtTime = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())
// Passage 1 / course 1
requestContext.itemIdenfier=fournisseur+":Item::1:LOC"
requestContext.lineRef="STIF:Line::004004009"
requestContext.dataFrameRef="any"
requestContext.datedVehicleJourneyRef=fournisseur+":VehicleJourney::1:LOC"
requestContext.journeyPatternRef=fournisseur+":JourneyPattern::1:LOC"
requestContext.journeyPatternName="mission1"
requestContext.publishedLineName="N"
requestContext.routeRef1=fournisseur+":Route::1:LOC"
requestContext.directionName="Rambouillet"
requestContext.operatorRef1=fournisseur+":Operator::SNCF:"
requestContext.originRef1="STIF:StopPoint:Q:108935:"
requestContext.originName1="Arrêt 1"
requestContext.placeRef1="STIF:StopPoint:Q:108943:"
requestContext.placeName1="Arrêt 5"
requestContext.placeRef3="STIF:StopPoint:Q:108944:"
requestContext.placeName3="Arrêt 6"
requestContext.destinationRef1="STIF:StopPoint:Q:108949:"
requestContext.destinationName1="Arrêt 10"
requestContext.vehicleJourneyName1="Course 1"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse = getHeureSuivante(1)
requestContext.originAimedDepartureTime1=heureDepartCourse.toXMLFormat();
requestContext.destinationAimedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,20,0)
//MonitoredCall
requestContext.stopPointRef1=requestContext.monitoringRef
requestContext.stopPointName1="Arrêt 2"
requestContext.aimedArrivalTime1= getAvecMinuteSeconde(heureDepartCourse,2,0).toXMLFormat()
//requestContext.aimedArrivalTime1="2014-04-29T13:00:00.000Z"
requestContext.actualArrivalTime1= getAvecMinuteSeconde(heureDepartCourse,2,1).toXMLFormat()
//requestContext.actualArrivalTime1 = "2014-04-29T13:00:00.000+02:00"
requestContext.expectedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,2,2).toXMLFormat()

requestContext.aimedDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,41).toXMLFormat()
requestContext.actualDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,42).toXMLFormat()
requestContext.expectedDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,43).toXMLFormat()


// passage 2 / course 2
requestContext.monitoringRef2 = holder["//siri:MonitoringRef"]
requestContext.itemIdenfier2=fournisseur+":Item::2:LOC"
requestContext.lineRef2="STIF:Line::004004009"
requestContext.dataFrameRef2="any"
requestContext.datedVehicleJourneyRef2=fournisseur+":VehicleJourney::2:LOC"
requestContext.journeyPatternRef2=fournisseur+":JourneyPattern::2:LOC"
requestContext.routeRef2=fournisseur+":Route::1:LOC"
requestContext.operatorRef2=fournisseur+":Operator::SNCF:"
requestContext.originRef2="STIF:StopPoint:Q:108935:"
requestContext.originName2="Arrêt 1"
requestContext.placeRef2="STIF:StopPoint:Q:108943:"
requestContext.placeName2="Arrêt 5"
requestContext.destinationRef2="STIF:StopPoint:Q:108949:"
requestContext.destinationName2="Arrêt 10"
requestContext.vehicleJourneyName2="Course 2"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse2 = getHeureSuivante(2)
requestContext.originAimedDepartureTime2=heureDepartCourse2.toXMLFormat();
requestContext.destinationAimedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,20,0)
//MonitoredCall
requestContext.stopPointRef2=requestContext.monitoringRef
requestContext.stopPointName2="Arrêt 2"
requestContext.aimedArrivalTime2= getAvecMinuteSeconde(heureDepartCourse2,2,0).toXMLFormat()
requestContext.actualArrivalTime2= getAvecMinuteSeconde(heureDepartCourse2,2,1).toXMLFormat()
requestContext.expectedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,2,2).toXMLFormat()

requestContext.aimedDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,41).toXMLFormat()
requestContext.actualDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,42).toXMLFormat()
requestContext.expectedDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,43).toXMLFormat()



// Methodes utilitaires DATE
// Methode Date permettant d'avoir l'heure courante + heure
def getHeureSuivante(int heure){
	def calendar = Calendar.getInstance();
	calendar.add(Calendar.HOUR,heure);
	calendar.set(Calendar.MINUTE, 0);
	calendar.set(Calendar.SECOND, 0);
	calendar.set(Calendar.MILLISECOND, 0);
	def heureSuivante = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return heureSuivante;
}

// Methode permettant de setter les minites et secondes sur l'heure passée
def getAvecMinuteSeconde(javax.xml.datatype.XMLGregorianCalendar xmlCalendar, int minute, int seconde){ 
	Calendar calendar = xmlCalendar.toGregorianCalendar();	
	calendar.set(Calendar.MINUTE, minute);
	calendar.set(Calendar.SECOND, seconde);
	def date = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return date;
      
}
</con:script><con:responseContent><![CDATA[<!--
Cette réponse renvoie les 2 prochains passages de la ZDE STIF:StopPoint:Q:108940:
Passage 1 : heure courante + 1 + Ajout d'un deuxième "via"
Passage 2 : heure courante + 2
-->
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsdl="http://wsdl.siri.org.uk" xmlns:siri="http://www.siri.org.uk/siri" xmlns:acsb="http://www.ifopt.org.uk/acsb" xmlns:ifop="http://www.ifopt.org.uk/ifopt">
   <soapenv:Header/>
   <soapenv:Body>
      <wsdl:GetStopMonitoringResponse>
         <ServiceDeliveryInfo>
            <siri:ResponseTimestamp>${=javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())}</siri:ResponseTimestamp>
            <siri:ProducerRef>${producerRef}</siri:ProducerRef>
            <siri:ResponseMessageIdentifier>${= UUID.randomUUID().toString()}</siri:ResponseMessageIdentifier>
		  <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
         </ServiceDeliveryInfo>
         <Answer>
            <siri:StopMonitoringDelivery version="${version}">
            	<siri:SubscriptionFilterRef>?</siri:SubscriptionFilterRef>
               <siri:ResponseTimestamp>${recordedAtTime}</siri:ResponseTimestamp>
               <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
               <siri:Status>true</siri:Status>
               <siri:MonitoringRef>${monitoringRef}</siri:MonitoringRef>
               <!-- 1 er passage-->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef}</siri:JourneyPatternRef>
                     <siri:JourneyPatternName>${journeyPatternName}</siri:JourneyPatternName>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef1}</siri:RouteRef>
                     <siri:PublishedLineName>${publishedLineName}</siri:PublishedLineName>
                     <siri:DirectionName>${directionName}</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                     <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef1}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie1</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef1}</siri:OriginRef>
                     <siri:OriginName>${originName1}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef1}</siri:PlaceRef>
                        <siri:PlaceName>${placeName1}</siri:PlaceName>
                     </siri:Via>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef3}</siri:PlaceRef>
                        <siri:PlaceName>${placeName3}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef1}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName1}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName1}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime1}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime1}</siri:DestinationAimedArrivalTime>
                     <siri:FirstOrLastJourney>unspecified</siri:FirstOrLastJourney>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <siri:TrainNumbers>
                        <siri:TrainNumberRef>5918</siri:TrainNumberRef>
                     </siri:TrainNumbers>
                     <!-- JourneyParts:-->
                     <siri:JourneyParts>
                        <siri:JourneyPartInfo>
                           <siri:JourneyPartRef>5409</siri:JourneyPartRef>
                           <siri:TrainNumberRef>5928:1</siri:TrainNumberRef>
                           <siri:OperatorRef>${operatorRef1}</siri:OperatorRef>
                        </siri:JourneyPartInfo>
                     </siri:JourneyParts>
                     <!-- MonitoredCall 1er passage-->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef1}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName1}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName1}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime1}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime1}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime1}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalProximityText>à l'approche</siri:ArrivalProximityText>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:ArrivalStopAssignment>
                           <siri:AimedQuayName>voie 2</siri:AimedQuayName>
                        </siri:ArrivalStopAssignment>
                        <siri:AimedDepartureTime>${aimedDepartureTime1}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime1}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime1}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                        <siri:DistanceFromStop>2300</siri:DistanceFromStop>
                        <siri:NumberOfStopsAway>3</siri:NumberOfStopsAway>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
                <!-- 2ème passage -->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier2}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef2}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef2}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef2}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef2}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef2}</siri:JourneyPatternRef>
                     <siri:JourneyPatternName>mission2</siri:JourneyPatternName>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef2}</siri:RouteRef>
                     <siri:PublishedLineName>N</siri:PublishedLineName>
                     <siri:DirectionName>Rambouillet</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                      <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef2}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie2</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef2}</siri:OriginRef>
                     <siri:OriginName>${originName2}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef2}</siri:PlaceRef>
                        <siri:PlaceName>${placeName2}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef2}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName2}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName2}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course 2</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime2}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime2}</siri:DestinationAimedArrivalTime>
                     <siri:FirstOrLastJourney>unspecified</siri:FirstOrLastJourney>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <siri:TrainNumbers>
                        <siri:TrainNumberRef>5918</siri:TrainNumberRef>
                     </siri:TrainNumbers>
                     <!-- JourneyParts:-->
                     <siri:JourneyParts>
                        <siri:JourneyPartInfo>
                           <siri:JourneyPartRef>5409</siri:JourneyPartRef>
                           <siri:TrainNumberRef>5928:1</siri:TrainNumberRef>
                           <siri:OperatorRef>${operatorRef2}</siri:OperatorRef>
                        </siri:JourneyPartInfo>
                     </siri:JourneyParts>
                     <!--  MonitoredCall 2ème passage -->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef2}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName2}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName2}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime2}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime2}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime2}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalProximityText>à l'approche</siri:ArrivalProximityText>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:ArrivalStopAssignment>
                           <siri:AimedQuayName>voie 2</siri:AimedQuayName>
                        </siri:ArrivalStopAssignment>
                        <siri:AimedDepartureTime>${aimedDepartureTime2}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime2}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime2}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                        <siri:DistanceFromStop>2300</siri:DistanceFromStop>
                        <siri:NumberOfStopsAway>3</siri:NumberOfStopsAway>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
            </siri:StopMonitoringDelivery>
         </Answer>
         <AnswerExtension>
         </AnswerExtension>
      </wsdl:GetStopMonitoringResponse>
   </soapenv:Body>
</soapenv:Envelope>]]></con:responseContent><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetStopMonitoring"/></con:response><con:dispatchConfig/></con:mockOperation><con:properties/></con:mockService><con:mockService port="8080" path="/test10Producer_7" host="cloudwatt-pc-dev-00" name="test10Producer_7" bindToHostOnly="false" docroot=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.mock.WsdlMockService@require-soap-action">false</con:setting></con:settings><con:mockOperation name="GetStopMonitoring" interface="SiriProducerRpcBinding" operation="GetStopMonitoring"><con:settings/><con:dispatchStyle>SEQUENCE</con:dispatchStyle><con:defaultResponse>Response 1</con:defaultResponse><con:response name="Response 1" encoding="UTF-8"><con:settings/><con:script>// create XmlHolder for request content
def holder = new com.eviware.soapui.support.XmlHolder( mockRequest.requestContent )
def fournisseur = "SNCF-ACCES"
// define namespace
holder.namespaces["siri"] = "http://www.siri.org.uk/siri"
// récupération de l'id message de la request
requestContext.idMessage = holder["//siri:MessageIdentifier"][0]
requestContext.monitoringRef = holder["//siri:MonitoringRef"]
requestContext.version = holder["//Request/@version"].toString()

// identifiant utilisé (en coherence avec le dataset redis)
requestContext.producerRef="SNCF-ACCES"
requestContext.recordedAtTime = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())
// Passage 1 / course 1
requestContext.itemIdenfier=fournisseur+":Item::1:LOC"
requestContext.lineRef="STIF:Line::004004009"
requestContext.dataFrameRef="any"
requestContext.datedVehicleJourneyRef=fournisseur+":VehicleJourney::1:LOC"
requestContext.journeyPatternRef=fournisseur+":JourneyPattern::1:LOC"
requestContext.journeyPatternName="mission1"
requestContext.publishedLineName="N"
requestContext.routeRef1=fournisseur+":Route::1:LOC"
requestContext.directionName="Rambouillet"
requestContext.operatorRef1=fournisseur+":Operator::SNCF:"
requestContext.originRef1="STIF:StopPoint:Q:108935:"
requestContext.originName1="Arrêt 1"
requestContext.placeRef1="STIF:StopPoint:Q:108943:"
requestContext.placeName1="Arrêt 5"
requestContext.destinationRef1="STIF:StopPoint:Q:108949:"
requestContext.destinationName1="Arrêt 10"
requestContext.vehicleJourneyName1="Course 1"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse = getHeureSuivante(1)
requestContext.originAimedDepartureTime1=heureDepartCourse.toXMLFormat();
requestContext.destinationAimedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,20,0)
//MonitoredCall
requestContext.stopPointRef1=requestContext.monitoringRef
requestContext.stopPointName1="Arrêt 2"
requestContext.aimedArrivalTime1= getAvecMinuteSeconde(heureDepartCourse,2,0).toXMLFormat()
//requestContext.aimedArrivalTime1="2014-04-29T13:00:00.000Z"
requestContext.actualArrivalTime1= getAvecMinuteSeconde(heureDepartCourse,2,1).toXMLFormat()
//requestContext.actualArrivalTime1 = "2014-04-29T13:00:00.000+02:00"
requestContext.expectedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,2,2).toXMLFormat()

requestContext.aimedDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,41).toXMLFormat()
requestContext.actualDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,42).toXMLFormat()
requestContext.expectedDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,43).toXMLFormat()


// passage 2 / course 2
requestContext.monitoringRef2 = holder["//siri:MonitoringRef"]
requestContext.itemIdenfier2=fournisseur+":Item::2:LOC"
requestContext.lineRef2="STIF:Line::004004009"
requestContext.dataFrameRef2="any"
requestContext.datedVehicleJourneyRef2=fournisseur+":VehicleJourney::2:LOC"
requestContext.journeyPatternRef2=fournisseur+":JourneyPattern::2:LOC"
requestContext.routeRef2=fournisseur+":Route::1:LOC"
requestContext.operatorRef2=fournisseur+":Operator::SNCF:"
requestContext.originRef2="STIF:StopPoint:Q:108935:"
requestContext.originName2="Arrêt 1"
requestContext.placeRef2="STIF:StopPoint:Q:108943:"
requestContext.placeName2="Arrêt 5"
requestContext.destinationRef2="STIF:StopPoint:Q:108949:"
requestContext.destinationName2="Arrêt 10"
requestContext.vehicleJourneyName2="Course 2"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse2 = getHeureSuivante(2)
requestContext.originAimedDepartureTime2=heureDepartCourse2.toXMLFormat();
requestContext.destinationAimedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,20,0)
//MonitoredCall
requestContext.stopPointRef2=requestContext.monitoringRef
requestContext.stopPointName2="Arrêt 2"
requestContext.aimedArrivalTime2= getAvecMinuteSeconde(heureDepartCourse2,2,0).toXMLFormat()
requestContext.actualArrivalTime2= getAvecMinuteSeconde(heureDepartCourse2,2,1).toXMLFormat()
requestContext.expectedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,2,2).toXMLFormat()

requestContext.aimedDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,41).toXMLFormat()
requestContext.actualDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,42).toXMLFormat()
requestContext.expectedDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,43).toXMLFormat()



// Methodes utilitaires DATE
// Methode Date permettant d'avoir l'heure courante + heure
def getHeureSuivante(int heure){
	def calendar = Calendar.getInstance();
	calendar.add(Calendar.HOUR,heure);
	calendar.set(Calendar.MINUTE, 0);
	calendar.set(Calendar.SECOND, 0);
	calendar.set(Calendar.MILLISECOND, 0);
	def heureSuivante = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return heureSuivante;
}

// Methode permettant de setter les minites et secondes sur l'heure passée
def getAvecMinuteSeconde(javax.xml.datatype.XMLGregorianCalendar xmlCalendar, int minute, int seconde){ 
	Calendar calendar = xmlCalendar.toGregorianCalendar();	
	calendar.set(Calendar.MINUTE, minute);
	calendar.set(Calendar.SECOND, seconde);
	def date = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return date;
      
}
</con:script><con:responseContent><![CDATA[<!--
Cette réponse renvoie un message non valide SIRI : Suppression de la valeur du monitoring ref
-->
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsdl="http://wsdl.siri.org.uk" xmlns:siri="http://www.siri.org.uk/siri" xmlns:acsb="http://www.ifopt.org.uk/acsb" xmlns:ifop="http://www.ifopt.org.uk/ifopt">
   <soapenv:Header/>
   <soapenv:Body>
      <wsdl:GetStopMonitoringResponse>
         <ServiceDeliveryInfo>
            <siri:ResponseTimestamp>${=javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())}</siri:ResponseTimestamp>
            <siri:ProducerRef>${producerRef}</siri:ProducerRef>
            <siri:ResponseMessageIdentifier>${= UUID.randomUUID().toString()}</siri:ResponseMessageIdentifier>
		  <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
         </ServiceDeliveryInfo>
         <Answer>
            <siri:StopMonitoringDelivery version="${version}">
            	<siri:SubscriptionFilterRef>?</siri:SubscriptionFilterRef>
               <siri:ResponseTimestamp>${recordedAtTime}</siri:ResponseTimestamp>
               <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
               <siri:Status>true</siri:Status>

               <siri:MonitoringRef>${monitoringRef}</siri:MonitoringRef>
               
               <!-- 1 er passage-->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef}</siri:MonitoringRef>
                  <!-- Ajout de la valeur MonitoringName-->
                  <siri:MonitoringName>Monitoring Name</siri:MonitoringName>
                  
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef}</siri:JourneyPatternRef>
                     <siri:JourneyPatternName>${journeyPatternName}</siri:JourneyPatternName>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef1}</siri:RouteRef>
                     <siri:PublishedLineName>${publishedLineName}</siri:PublishedLineName>
                     <siri:DirectionName>${directionName}</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                     <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef1}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie1</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef1}</siri:OriginRef>
                     <siri:OriginName>${originName1}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef1}</siri:PlaceRef>
                        <siri:PlaceName>${placeName1}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef1}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName1}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName1}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime1}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime1}</siri:DestinationAimedArrivalTime>
                     <siri:FirstOrLastJourney>unspecified</siri:FirstOrLastJourney>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <siri:TrainNumbers>
                        <siri:TrainNumberRef>5918</siri:TrainNumberRef>
                     </siri:TrainNumbers>
                     <!-- JourneyParts:-->
                     <siri:JourneyParts>
                        <siri:JourneyPartInfo>
                           <siri:JourneyPartRef>5409</siri:JourneyPartRef>
                           <siri:TrainNumberRef>5928:1</siri:TrainNumberRef>
                           <siri:OperatorRef>${operatorRef1}</siri:OperatorRef>
                        </siri:JourneyPartInfo>
                     </siri:JourneyParts>
                     <!-- MonitoredCall 1er passage-->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef1}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName1}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName1}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime1}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime1}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime1}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalProximityText>à l'approche</siri:ArrivalProximityText>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:ArrivalStopAssignment>
                           <siri:AimedQuayName>voie 2</siri:AimedQuayName>
                        </siri:ArrivalStopAssignment>
                        <siri:AimedDepartureTime>${aimedDepartureTime1}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime1}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime1}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                        <siri:DistanceFromStop>2300</siri:DistanceFromStop>
                        <siri:NumberOfStopsAway>3</siri:NumberOfStopsAway>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
                <!-- 2ème passage -->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier2}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef2}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef2}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef2}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef2}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef2}</siri:JourneyPatternRef>
                     <siri:JourneyPatternName>mission2</siri:JourneyPatternName>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef2}</siri:RouteRef>
                     <siri:PublishedLineName>N</siri:PublishedLineName>
                     <siri:DirectionName>Rambouillet</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                      <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef2}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie2</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef2}</siri:OriginRef>
                     <siri:OriginName>${originName2}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef2}</siri:PlaceRef>
                        <siri:PlaceName>${placeName2}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef2}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName2}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName2}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course 2</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime2}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime2}</siri:DestinationAimedArrivalTime>
                     <siri:FirstOrLastJourney>unspecified</siri:FirstOrLastJourney>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <siri:TrainNumbers>
                        <siri:TrainNumberRef>5918</siri:TrainNumberRef>
                     </siri:TrainNumbers>
                     <!-- JourneyParts:-->
                     <siri:JourneyParts>
                        <siri:JourneyPartInfo>
                           <siri:JourneyPartRef>5409</siri:JourneyPartRef>
                           <siri:TrainNumberRef>5928:1</siri:TrainNumberRef>
                           <siri:OperatorRef>${operatorRef2}</siri:OperatorRef>
                        </siri:JourneyPartInfo>
                     </siri:JourneyParts>
                     <!--  MonitoredCall 2ème passage -->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef2}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName2}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName2}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime2}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime2}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime2}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalProximityText>à l'approche</siri:ArrivalProximityText>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:ArrivalStopAssignment>
                           <siri:AimedQuayName>voie 2</siri:AimedQuayName>
                        </siri:ArrivalStopAssignment>
                        <siri:AimedDepartureTime>${aimedDepartureTime2}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime2}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime2}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                        <siri:DistanceFromStop>2300</siri:DistanceFromStop>
                        <siri:NumberOfStopsAway>3</siri:NumberOfStopsAway>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
            </siri:StopMonitoringDelivery>
         </Answer>
         <AnswerExtension>
         </AnswerExtension>
      </wsdl:GetStopMonitoringResponse>
   </soapenv:Body>
</soapenv:Envelope>]]></con:responseContent><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetStopMonitoring"/></con:response><con:dispatchConfig/></con:mockOperation><con:properties/></con:mockService><con:mockService port="8080" path="/test103Producer" host="L276002" name="test103Producer" bindToHostOnly="false" docroot=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.mock.WsdlMockService@require-soap-action">false</con:setting></con:settings><con:mockOperation name="GetStopMonitoring" interface="SiriProducerRpcBinding" operation="GetStopMonitoring"><con:settings/><con:dispatchStyle>SCRIPT</con:dispatchStyle><con:defaultResponse>Response 1</con:defaultResponse><con:response name="Response 1" encoding="UTF-8"><con:settings/><con:script>// create XmlHolder for request content
def holder = new com.eviware.soapui.support.XmlHolder( mockRequest.requestContent )
def fournisseur = "SNCF-ACCES"
// define namespace
holder.namespaces["siri"] = "http://www.siri.org.uk/siri"
// récupération de l'id message de la request
requestContext.idMessage = holder["//siri:MessageIdentifier"][0]
requestContext.monitoringRef = holder["//siri:MonitoringRef"]
requestContext.version = holder["//Request/@version"].toString()

// identifiant utilisé (en coherence avec le dataset redis)
requestContext.producerRef="SNCF-ACCES"
requestContext.recordedAtTime = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())
// Passage 1 / course 1
requestContext.itemIdenfier=fournisseur+":Item::1:LOC"
requestContext.lineRef="STIF:Line::004004009"
requestContext.dataFrameRef="any"
requestContext.datedVehicleJourneyRef=fournisseur+":VehicleJourney::1:LOC"
requestContext.journeyPatternRef=fournisseur+":JourneyPattern::1:LOC"
requestContext.journeyPatternName="mission1"
requestContext.publishedLineName="N"
requestContext.routeRef1=fournisseur+":Route::1:LOC"
requestContext.directionName="Rambouillet"
requestContext.operatorRef1=fournisseur+":Operator::SNCF:"
requestContext.originRef1="STIF:StopPoint:Q:108935:"
requestContext.originName1="Arrêt 1"
requestContext.placeRef1="STIF:StopPoint:Q:108943:"
requestContext.placeName1="Arrêt 5"
requestContext.destinationRef1="STIF:StopPoint:Q:108949:"
requestContext.destinationName1="Arrêt 10"
requestContext.vehicleJourneyName1="Course 1"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse = getHeureSuivante(1)
requestContext.originAimedDepartureTime1=heureDepartCourse.toXMLFormat();
requestContext.destinationAimedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,20,0)
//MonitoredCall
requestContext.stopPointRef1=requestContext.monitoringRef
requestContext.stopPointName1="Arrêt 2"
requestContext.aimedArrivalTime1= getAvecMinuteSeconde(heureDepartCourse,2,0).toXMLFormat()
//requestContext.aimedArrivalTime1="2014-04-29T13:00:00.000Z"
requestContext.actualArrivalTime1= getAvecMinuteSeconde(heureDepartCourse,2,1).toXMLFormat()
//requestContext.actualArrivalTime1 = "2014-04-29T13:00:00.000+02:00"
requestContext.expectedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,2,2).toXMLFormat()

requestContext.aimedDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,41).toXMLFormat()
requestContext.actualDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,42).toXMLFormat()
requestContext.expectedDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,43).toXMLFormat()


// passage 2 / course 2
requestContext.monitoringRef2 = holder["//siri:MonitoringRef"]
requestContext.itemIdenfier2=fournisseur+":Item::2:LOC"
requestContext.lineRef2="STIF:Line::004004009"
requestContext.dataFrameRef2="any"
requestContext.datedVehicleJourneyRef2=fournisseur+":VehicleJourney::2:LOC"
requestContext.journeyPatternRef2=fournisseur+":JourneyPattern::2:LOC"
requestContext.routeRef2=fournisseur+":Route::1:LOC"
requestContext.operatorRef2=fournisseur+":Operator::SNCF:"
requestContext.originRef2="STIF:StopPoint:Q:108935:"
requestContext.originName2="Arrêt 1"
requestContext.placeRef2="STIF:StopPoint:Q:108943:"
requestContext.placeName2="Arrêt 5"
requestContext.destinationRef2="STIF:StopPoint:Q:108949:"
requestContext.destinationName2="Arrêt 10"
requestContext.vehicleJourneyName2="Course 2"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse2 = getHeureSuivante(2)
requestContext.originAimedDepartureTime2=heureDepartCourse2.toXMLFormat();
requestContext.destinationAimedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,20,0)
//MonitoredCall
requestContext.stopPointRef2=requestContext.monitoringRef
requestContext.stopPointName2="Arrêt 2"
requestContext.aimedArrivalTime2= getAvecMinuteSeconde(heureDepartCourse2,2,0).toXMLFormat()
requestContext.actualArrivalTime2= getAvecMinuteSeconde(heureDepartCourse2,2,1).toXMLFormat()
requestContext.expectedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,2,2).toXMLFormat()

requestContext.aimedDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,41).toXMLFormat()
requestContext.actualDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,42).toXMLFormat()
requestContext.expectedDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,43).toXMLFormat()



// Methodes utilitaires DATE
// Methode Date permettant d'avoir l'heure courante + heure
def getHeureSuivante(int heure){
	def calendar = Calendar.getInstance();
	calendar.add(Calendar.HOUR,heure);
	calendar.set(Calendar.MINUTE, 0);
	calendar.set(Calendar.SECOND, 0);
	calendar.set(Calendar.MILLISECOND, 0);
	def heureSuivante = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return heureSuivante;
}

// Methode permettant de setter les minites et secondes sur l'heure passée
def getAvecMinuteSeconde(javax.xml.datatype.XMLGregorianCalendar xmlCalendar, int minute, int seconde){ 
	Calendar calendar = xmlCalendar.toGregorianCalendar();	
	calendar.set(Calendar.MINUTE, minute);
	calendar.set(Calendar.SECOND, seconde);
	def date = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return date;
      
}
</con:script><con:responseContent><![CDATA[<!--
Cette réponse renvoie les 2 prochains passages de la ZDE STIF:StopPoint:Q:108940: contenant deux fois le champ lineRef
Passage 1 : heure courante + 1
Passage 2 : heure courante + 2
-->
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsdl="http://wsdl.siri.org.uk" xmlns:siri="http://www.siri.org.uk/siri" xmlns:acsb="http://www.ifopt.org.uk/acsb" xmlns:ifop="http://www.ifopt.org.uk/ifopt">
   <soapenv:Header/>
   <soapenv:Body>
      <wsdl:GetStopMonitoringResponse>
         <ServiceDeliveryInfo>
            <siri:ResponseTimestamp>${=javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())}</siri:ResponseTimestamp>
            <siri:ProducerRef>${producerRef}</siri:ProducerRef>
            <siri:ResponseMessageIdentifier>${= UUID.randomUUID().toString()}</siri:ResponseMessageIdentifier>
		  <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
         </ServiceDeliveryInfo>
         <Answer>
            <siri:StopMonitoringDelivery version="${version}">
            	<siri:SubscriptionFilterRef>?</siri:SubscriptionFilterRef>
               <siri:ResponseTimestamp>${recordedAtTime}</siri:ResponseTimestamp>
               <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
               <siri:Status>true</siri:Status>
               <siri:MonitoringRef>${monitoringRef}</siri:MonitoringRef>
               <!-- 1 er passage-->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>

                  
                  <!-- Duplication du champ lineRef-->
                     <siri:LineRef>${lineRef}</siri:LineRef>
                     <siri:LineRef>${lineRef}</siri:LineRef>

                     
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef}</siri:JourneyPatternRef>
                     <siri:JourneyPatternName>${journeyPatternName}</siri:JourneyPatternName>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef1}</siri:RouteRef>
                     <siri:PublishedLineName>${publishedLineName}</siri:PublishedLineName>
                     <siri:DirectionName>${directionName}</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                     <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef1}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie1</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef1}</siri:OriginRef>
                     <siri:OriginName>${originName1}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef1}</siri:PlaceRef>
                        <siri:PlaceName>${placeName1}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef1}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName1}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName1}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime1}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime1}</siri:DestinationAimedArrivalTime>
                     <siri:FirstOrLastJourney>unspecified</siri:FirstOrLastJourney>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <siri:TrainNumbers>
                        <siri:TrainNumberRef>5918</siri:TrainNumberRef>
                     </siri:TrainNumbers>
                     <!-- JourneyParts:-->
                     <siri:JourneyParts>
                        <siri:JourneyPartInfo>
                           <siri:JourneyPartRef>5409</siri:JourneyPartRef>
                           <siri:TrainNumberRef>5928:1</siri:TrainNumberRef>
                           <siri:OperatorRef>${operatorRef1}</siri:OperatorRef>
                        </siri:JourneyPartInfo>
                     </siri:JourneyParts>
                     <!-- MonitoredCall 1er passage-->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef1}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName1}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName1}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime1}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime1}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime1}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalProximityText>à l'approche</siri:ArrivalProximityText>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:ArrivalStopAssignment>
                           <siri:AimedQuayName>voie 2</siri:AimedQuayName>
                        </siri:ArrivalStopAssignment>
                        <siri:AimedDepartureTime>${aimedDepartureTime1}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime1}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime1}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                        <siri:DistanceFromStop>2300</siri:DistanceFromStop>
                        <siri:NumberOfStopsAway>3</siri:NumberOfStopsAway>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
                <!-- 2ème passage -->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier2}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef2}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef2}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef2}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef2}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef2}</siri:JourneyPatternRef>
                     <siri:JourneyPatternName>mission2</siri:JourneyPatternName>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef2}</siri:RouteRef>
                     <siri:PublishedLineName>N</siri:PublishedLineName>
                     <siri:DirectionName>Rambouillet</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                      <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef2}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie2</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef2}</siri:OriginRef>
                     <siri:OriginName>${originName2}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef2}</siri:PlaceRef>
                        <siri:PlaceName>${placeName2}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef2}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName2}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName2}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course 2</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime2}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime2}</siri:DestinationAimedArrivalTime>
                     <siri:FirstOrLastJourney>unspecified</siri:FirstOrLastJourney>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <siri:TrainNumbers>
                        <siri:TrainNumberRef>5918</siri:TrainNumberRef>
                     </siri:TrainNumbers>
                     <!-- JourneyParts:-->
                     <siri:JourneyParts>
                        <siri:JourneyPartInfo>
                           <siri:JourneyPartRef>5409</siri:JourneyPartRef>
                           <siri:TrainNumberRef>5928:1</siri:TrainNumberRef>
                           <siri:OperatorRef>${operatorRef2}</siri:OperatorRef>
                        </siri:JourneyPartInfo>
                     </siri:JourneyParts>
                     <!--  MonitoredCall 2ème passage -->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef2}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName2}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName2}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime2}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime2}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime2}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalProximityText>à l'approche</siri:ArrivalProximityText>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:ArrivalStopAssignment>
                           <siri:AimedQuayName>voie 2</siri:AimedQuayName>
                        </siri:ArrivalStopAssignment>
                        <siri:AimedDepartureTime>${aimedDepartureTime2}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime2}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime2}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                        <siri:DistanceFromStop>2300</siri:DistanceFromStop>
                        <siri:NumberOfStopsAway>3</siri:NumberOfStopsAway>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
            </siri:StopMonitoringDelivery>
         </Answer>
         <AnswerExtension>
         </AnswerExtension>
      </wsdl:GetStopMonitoringResponse>
   </soapenv:Body>
</soapenv:Envelope>]]></con:responseContent><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetStopMonitoring"/></con:response><con:dispatchConfig/></con:mockOperation><con:properties/></con:mockService><con:mockService port="8080" path="/test270Producer" host="stif-pc-dev-08" name="test270Producer" bindToHostOnly="false" docroot=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.mock.WsdlMockService@require-soap-action">false</con:setting></con:settings><con:mockOperation name="GetStopMonitoring" interface="SiriSOAPBinding" operation="GetStopMonitoring"><con:settings/><con:dispatchStyle>SEQUENCE</con:dispatchStyle><con:defaultResponse>Response 1</con:defaultResponse><con:response name="Response 1" encoding="UTF-8"><con:settings/><con:script>// create XmlHolder for request content
def holder = new com.eviware.soapui.support.XmlHolder( mockRequest.requestContent )
def fournisseur = "SNCF-ACCES"
// define namespace
holder.namespaces["siri"] = "http://www.siri.org.uk/"
// récupération de l'id message de la request
requestContext.idMessage = holder["//siri:MessageIdentifier"][0]
requestContext.monitoringRef = holder["//siri:MonitoringRef"]
requestContext.version = holder["//Request/@version"].toString()

// identifiant utilisé (en coherence avec le dataset redis)
requestContext.producerRef="SNCF-ACCES"
requestContext.recordedAtTime = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())
// Passage 1 / course 1
requestContext.itemIdenfier=fournisseur+":Item::1:LOC"
requestContext.lineRef="STIF:Line::004004009:"
requestContext.dataFrameRef="any"
requestContext.datedVehicleJourneyRef=fournisseur+":VehicleJourney::1:LOC"
requestContext.journeyPatternRef=fournisseur+":JourneyPattern::1:LOC"
requestContext.journeyPatternName="mission1"
requestContext.publishedLineName="115"
requestContext.routeRef1=fournisseur+":Route::1:LOC"
requestContext.directionName="Rambouillet"
requestContext.operatorRef1=fournisseur+":Operator::SNCF:"
requestContext.originRef1="STIF:StopPoint:Q:108935:"
requestContext.originName1="Arrêt 1"
requestContext.placeRef1="STIF:StopPoint:Q:108943:"
requestContext.placeName1="Arrêt 5"
requestContext.destinationRef1="STIF:StopPoint:Q:108949:"
requestContext.destinationName1="Arrêt 10"
requestContext.vehicleJourneyName1="Course 1"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse = getHeureSuivante(1)
requestContext.originAimedDepartureTime1=heureDepartCourse.toXMLFormat();
requestContext.destinationAimedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,20,0)
//MonitoredCall
requestContext.stopPointRef1=requestContext.monitoringRef
requestContext.stopPointName1="Arrêt 2"
requestContext.aimedArrivalTime1= getAvecMinuteSeconde(heureDepartCourse,2,0).toXMLFormat()
//requestContext.aimedArrivalTime1="2014-04-29T13:00:00.000Z"
requestContext.actualArrivalTime1= getAvecMinuteSeconde(heureDepartCourse,2,1).toXMLFormat()
//requestContext.actualArrivalTime1 = "2014-04-29T13:00:00.000+02:00"
requestContext.expectedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,2,2).toXMLFormat()

requestContext.aimedDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,41).toXMLFormat()
requestContext.actualDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,42).toXMLFormat()
requestContext.expectedDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,43).toXMLFormat()


// passage 2 / course 2
requestContext.monitoringRef2 = holder["//siri:MonitoringRef"]
requestContext.itemIdenfier2=fournisseur+":Item::2:LOC"
requestContext.lineRef2="STIF:Line::004004009:"
requestContext.dataFrameRef2="any"
requestContext.datedVehicleJourneyRef2=fournisseur+":VehicleJourney::2:LOC"
requestContext.journeyPatternRef2=fournisseur+":JourneyPattern::2:LOC"
requestContext.routeRef2=fournisseur+":Route::1:LOC"
requestContext.operatorRef2=fournisseur+":Operator::SNCF:"
requestContext.originRef2="STIF:StopPoint:Q:108935:"
requestContext.originName2="Arrêt 1"
requestContext.placeRef2="STIF:StopPoint:Q:108943:"
requestContext.placeName2="Arrêt 5"
requestContext.destinationRef2="STIF:StopPoint:Q:108949:"
requestContext.destinationName2="Arrêt 10"
requestContext.vehicleJourneyName2="Course 2"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse2 = getHeureSuivante(2)
requestContext.originAimedDepartureTime2=heureDepartCourse2.toXMLFormat();
requestContext.destinationAimedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,20,0)
//MonitoredCall
requestContext.stopPointRef2=requestContext.monitoringRef
requestContext.stopPointName2="Arrêt 2"
requestContext.aimedArrivalTime2= getAvecMinuteSeconde(heureDepartCourse2,2,0).toXMLFormat()
requestContext.actualArrivalTime2= getAvecMinuteSeconde(heureDepartCourse2,2,1).toXMLFormat()
requestContext.expectedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,2,2).toXMLFormat()

requestContext.aimedDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,41).toXMLFormat()
requestContext.actualDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,42).toXMLFormat()
requestContext.expectedDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,43).toXMLFormat()



// Methodes utilitaires DATE
// Methode Date permettant d'avoir l'heure courante + heure
def getHeureSuivante(int heure){
	def calendar = Calendar.getInstance();
	calendar.add(Calendar.HOUR,heure);
	calendar.set(Calendar.MINUTE, 0);
	calendar.set(Calendar.SECOND, 0);
	calendar.set(Calendar.MILLISECOND, 0);
	def heureSuivante = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return heureSuivante;
}

// Methode permettant de setter les minites et secondes sur l'heure passée
def getAvecMinuteSeconde(javax.xml.datatype.XMLGregorianCalendar xmlCalendar, int minute, int seconde){ 
	Calendar calendar = xmlCalendar.toGregorianCalendar();	
	calendar.set(Calendar.MINUTE, minute);
	calendar.set(Calendar.SECOND, seconde);
	def date = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return date;
      
}
</con:script><con:responseContent><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:new="http://new.webservice.namespace" xmlns:siri="http://www.siri.org.uk/">
   <soapenv:Header/>
   <soapenv:Body>
      <new:GetStopMonitoringResponse>
         <ServiceDeliveryInfo>
            <siri:ResponseTimestamp>${=javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())}</siri:ResponseTimestamp>
            <siri:ProducerRef>${producerRef}</siri:ProducerRef>
            <siri:ResponseMessageIdentifier>SNCF-ACCES:ResponseMessage::${=String.valueOf((int)Math.random()*1000000000)}:LOC</siri:ResponseMessageIdentifier>
		  <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
         </ServiceDeliveryInfo>
         <Answer>
            <siri:StopMonitoringDelivery version="${version}">
               <siri:ResponseTimestamp>${recordedAtTime}</siri:ResponseTimestamp>
               <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
               <siri:Status>true</siri:Status>
               <!-- 1 er passage-->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef}</siri:JourneyPatternRef>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef1}</siri:RouteRef>
                     <siri:PublishedLineName>${publishedLineName}</siri:PublishedLineName>
                     <siri:DirectionName>${directionName}</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                     <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef1}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie1</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef1}</siri:OriginRef>
                     <siri:OriginName>${originName1}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef1}</siri:PlaceRef>
                        <siri:PlaceName>${placeName1}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef1}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName1}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName1}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime1}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime1}</siri:DestinationAimedArrivalTime>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <!-- MonitoredCall 1er passage-->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef1}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName1}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName1}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime1}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime1}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime1}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:AimedDepartureTime>${aimedDepartureTime1}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime1}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime1}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
                <!-- 2ème passage -->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier2}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef2}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef2}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef2}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef2}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef2}</siri:JourneyPatternRef>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef2}</siri:RouteRef>
                     <siri:PublishedLineName>N</siri:PublishedLineName>
                     <siri:DirectionName>Rambouillet</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                      <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef2}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie2</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef2}</siri:OriginRef>
                     <siri:OriginName>${originName2}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef2}</siri:PlaceRef>
                        <siri:PlaceName>${placeName2}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef2}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName2}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName2}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course 2</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime2}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime2}</siri:DestinationAimedArrivalTime>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <!--  MonitoredCall 2ème passage -->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef2}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName2}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName2}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime2}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime2}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime2}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:AimedDepartureTime>${aimedDepartureTime2}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime2}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime2}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
            </siri:StopMonitoringDelivery>
         </Answer>
         <AnswerExtension>
            <!--You may enter ANY elements at this point-->
         </AnswerExtension>
      </new:GetStopMonitoringResponse>
   </soapenv:Body>
</soapenv:Envelope>]]></con:responseContent><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetStopMonitoring"/></con:response><con:dispatchConfig/></con:mockOperation><con:properties/></con:mockService><con:mockService port="8080" path="/test271Producer" host="stif-pc-dev-08" name="test271Producer" bindToHostOnly="false" docroot=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.mock.WsdlMockService@require-soap-action">false</con:setting></con:settings><con:mockOperation name="GetStopMonitoring" interface="SiriSOAPBinding" operation="GetStopMonitoring"><con:settings/><con:dispatchStyle>SEQUENCE</con:dispatchStyle><con:defaultResponse>Response 1</con:defaultResponse><con:response name="Response 1" encoding="UTF-8"><con:settings/><con:script>// create XmlHolder for request content
def holder = new com.eviware.soapui.support.XmlHolder( mockRequest.requestContent )
def fournisseur = "SNCF-ACCES"
// define namespace
holder.namespaces["siri"] = "http://www.siri.org.uk/"
// récupération de l'id message de la request
requestContext.idMessage = holder["//siri:MessageIdentifier"][0]
requestContext.monitoringRef = holder["//siri:MonitoringRef"]
requestContext.version = holder["//Request/@version"].toString()

// identifiant utilisé (en coherence avec le dataset redis)
requestContext.producerRef="SNCF-ACCES"
requestContext.recordedAtTime = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())
// Passage 1 / course 1
requestContext.itemIdenfier=fournisseur+":Item::1:LOC"
requestContext.lineRef="STIF:Line::004004009:"
requestContext.dataFrameRef="any"
requestContext.datedVehicleJourneyRef=fournisseur+":VehicleJourney::1:LOC"
requestContext.journeyPatternRef=fournisseur+":JourneyPattern::1:LOC"
requestContext.journeyPatternName="mission1"
requestContext.publishedLineName="115"
requestContext.routeRef1=fournisseur+":Route::1:LOC"
requestContext.directionName="Rambouillet"
requestContext.operatorRef1=fournisseur+":Operator::SNCF:"
requestContext.originRef1="STIF:StopPoint:Q:108935:"
requestContext.originName1="Arrêt 1"
requestContext.placeRef1="STIF:StopPoint:Q:108943:"
requestContext.placeName1="Arrêt 5"
requestContext.destinationRef1="STIF:StopPoint:Q:108949:"
requestContext.destinationName1="Arrêt 10"
requestContext.vehicleJourneyName1="Course 1"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse = getHeureSuivante(1)
requestContext.originAimedDepartureTime1=heureDepartCourse.toXMLFormat();
requestContext.destinationAimedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,20,0)
//MonitoredCall
requestContext.stopPointRef1=requestContext.monitoringRef
requestContext.stopPointName1="Arrêt 2"
requestContext.aimedArrivalTime1= getAvecMinuteSeconde(heureDepartCourse,2,0).toXMLFormat()
//requestContext.aimedArrivalTime1="2014-04-29T13:00:00.000Z"
requestContext.actualArrivalTime1= getAvecMinuteSeconde(heureDepartCourse,2,1).toXMLFormat()
//requestContext.actualArrivalTime1 = "2014-04-29T13:00:00.000+02:00"
requestContext.expectedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,2,2).toXMLFormat()

requestContext.aimedDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,41).toXMLFormat()
requestContext.actualDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,42).toXMLFormat()
requestContext.expectedDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,43).toXMLFormat()


// passage 2 / course 2
requestContext.monitoringRef2 = holder["//siri:MonitoringRef"]
requestContext.itemIdenfier2=fournisseur+":Item::2:LOC"
requestContext.lineRef2="STIF:Line::004004009:"
requestContext.dataFrameRef2="any"
requestContext.datedVehicleJourneyRef2=fournisseur+":VehicleJourney::2:LOC"
requestContext.journeyPatternRef2=fournisseur+":JourneyPattern::2:LOC"
requestContext.routeRef2=fournisseur+":Route::1:LOC"
requestContext.operatorRef2=fournisseur+":Operator::SNCF:"
requestContext.originRef2="STIF:StopPoint:Q:108935:"
requestContext.originName2="Arrêt 1"
requestContext.placeRef2="STIF:StopPoint:Q:108943:"
requestContext.placeName2="Arrêt 5"
requestContext.destinationRef2="STIF:StopPoint:Q:108949:"
requestContext.destinationName2="Arrêt 10"
requestContext.vehicleJourneyName2="Course 2"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse2 = getHeureSuivante(2)
requestContext.originAimedDepartureTime2=heureDepartCourse2.toXMLFormat();
requestContext.destinationAimedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,20,0)
//MonitoredCall
requestContext.stopPointRef2=requestContext.monitoringRef
requestContext.stopPointName2="Arrêt 2"
requestContext.aimedArrivalTime2= getAvecMinuteSeconde(heureDepartCourse2,2,0).toXMLFormat()
requestContext.actualArrivalTime2= getAvecMinuteSeconde(heureDepartCourse2,2,1).toXMLFormat()
requestContext.expectedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,2,2).toXMLFormat()

requestContext.aimedDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,41).toXMLFormat()
requestContext.actualDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,42).toXMLFormat()
requestContext.expectedDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,43).toXMLFormat()



// Methodes utilitaires DATE
// Methode Date permettant d'avoir l'heure courante + heure
def getHeureSuivante(int heure){
	def calendar = Calendar.getInstance();
	calendar.add(Calendar.HOUR,heure);
	calendar.set(Calendar.MINUTE, 0);
	calendar.set(Calendar.SECOND, 0);
	calendar.set(Calendar.MILLISECOND, 0);
	def heureSuivante = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return heureSuivante;
}

// Methode permettant de setter les minites et secondes sur l'heure passée
def getAvecMinuteSeconde(javax.xml.datatype.XMLGregorianCalendar xmlCalendar, int minute, int seconde){ 
	Calendar calendar = xmlCalendar.toGregorianCalendar();	
	calendar.set(Calendar.MINUTE, minute);
	calendar.set(Calendar.SECOND, seconde);
	def date = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return date;
      
}
</con:script><con:responseContent><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:new="http://new.webservice.namespace" xmlns:siri="http://www.siri.org.uk/">
   <soapenv:Header/>
   <soapenv:Body>
      <new:GetStopMonitoringResponse>
         <ServiceDeliveryInfo>
            <siri:ResponseTimestamp>${=javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())}</siri:ResponseTimestamp>
            <siri:ProducerRef>${producerRef}</siri:ProducerRef>
            <siri:ResponseMessageIdentifier>${= UUID.randomUUID().toString()}</siri:ResponseMessageIdentifier>
		  <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
         </ServiceDeliveryInfo>
         <Answer>
            <siri:StopMonitoringDelivery version="${version}">
               <siri:ResponseTimestamp>${recordedAtTime}</siri:ResponseTimestamp>
               <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
               <siri:Status>true</siri:Status>
               <!-- 1 er passage-->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef}</siri:JourneyPatternRef>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef1}</siri:RouteRef>
                     <siri:PublishedLineName>${publishedLineName}</siri:PublishedLineName>
                     <siri:DirectionName>${directionName}</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                     <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef1}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie1</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef1}</siri:OriginRef>
                     <siri:OriginName>${originName1}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef1}</siri:PlaceRef>
                        <siri:PlaceName>${placeName1}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef1}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName1}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName1}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime1}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime1}</siri:DestinationAimedArrivalTime>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <!-- MonitoredCall 1er passage-->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef1}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName1}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName1}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime1}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime1}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime1}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:AimedDepartureTime>${aimedDepartureTime1}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime1}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime1}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
                <!-- 2ème passage -->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier2}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef2}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef2}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef2}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef2}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef2}</siri:JourneyPatternRef>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef2}</siri:RouteRef>
                     <siri:PublishedLineName>N</siri:PublishedLineName>
                     <siri:DirectionName>Rambouillet</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                      <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef2}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie2</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef2}</siri:OriginRef>
                     <siri:OriginName>${originName2}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef2}</siri:PlaceRef>
                        <siri:PlaceName>${placeName2}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef2}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName2}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName2}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course 2</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime2}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime2}</siri:DestinationAimedArrivalTime>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <!--  MonitoredCall 2ème passage -->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef2}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName2}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName2}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime2}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime2}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime2}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:AimedDepartureTime>${aimedDepartureTime2}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime2}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime2}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
            </siri:StopMonitoringDelivery>
         </Answer>
         <AnswerExtension>
            <!--You may enter ANY elements at this point-->
         </AnswerExtension>
      </new:GetStopMonitoringResponse>
   </soapenv:Body>
</soapenv:Envelope>]]></con:responseContent><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetStopMonitoring"/></con:response><con:dispatchConfig/></con:mockOperation><con:properties/></con:mockService><con:mockService port="8080" path="/test1Producer" host="localhost" name="test1Producer-Périmé" bindToHostOnly="false" docroot=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.mock.WsdlMockService@require-soap-action">false</con:setting></con:settings><con:mockOperation name="GetStopMonitoring" interface="SiriProducerRpcBinding" operation="GetStopMonitoring"><con:settings/><con:dispatchStyle>SCRIPT</con:dispatchStyle><con:defaultResponse>Response 1</con:defaultResponse><con:response name="Response 1" encoding="UTF-8"><con:settings/><con:script>// create XmlHolder for request content
def holder = new com.eviware.soapui.support.XmlHolder( mockRequest.requestContent )
def fournisseur = "SNCF-ACCES"
// define namespace
holder.namespaces["siri"] = "http://www.siri.org.uk/siri"
// récupération de l'id message de la request
requestContext.idMessage = holder["//siri:MessageIdentifier"][0]
requestContext.monitoringRef = holder["//siri:MonitoringRef"]
requestContext.version = holder["//Request/@version"].toString()

// identifiant utilisé (en coherence avec le dataset redis)
requestContext.producerRef="SNCF-ACCES"
requestContext.recordedAtTime = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())
// Passage 1 / course 1
requestContext.itemIdenfier=fournisseur+":Item::1:LOC"
requestContext.lineRef="STIF:Line::004004009:"
requestContext.dataFrameRef="any"
requestContext.datedVehicleJourneyRef=fournisseur+":VehicleJourney::1:LOC"
requestContext.journeyPatternRef=fournisseur+":JourneyPattern::1:LOC"
requestContext.journeyPatternName="mission1"
requestContext.publishedLineName="N"
requestContext.routeRef1=fournisseur+":Route::1:LOC"
requestContext.directionName="Rambouillet"
requestContext.operatorRef1=fournisseur+":Operator::SNCF:"
requestContext.originRef1="STIF:StopPoint:Q:108935:"
requestContext.originName1="Arrêt 1"
requestContext.placeRef1="STIF:StopPoint:Q:108943:"
requestContext.placeName1="Arrêt 5"
requestContext.destinationRef1="STIF:StopPoint:Q:108949:"
requestContext.destinationName1="Arrêt 10"
requestContext.vehicleJourneyName1="Course 1"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse = getHeureSuivante(1)
requestContext.originAimedDepartureTime1=heureDepartCourse.toXMLFormat();
requestContext.destinationAimedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,20,0)
//MonitoredCall
requestContext.stopPointRef1=requestContext.monitoringRef
requestContext.stopPointName1="Arrêt 2"
requestContext.aimedArrivalTime1= getAvecMinuteSeconde(heureDepartCourse,2,0).toXMLFormat()
//requestContext.aimedArrivalTime1="2014-04-29T13:00:00.000Z"
requestContext.actualArrivalTime1= getAvecMinuteSeconde(heureDepartCourse,2,1).toXMLFormat()
//requestContext.actualArrivalTime1 = "2014-04-29T13:00:00.000+02:00"
//requestContext.expectedArrivalTime1="2014-04-29T13:00:00.000+02:00"
requestContext.expectedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,2,2).toXMLFormat()

requestContext.aimedDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,41).toXMLFormat()
//requestContext.aimedDepartureTime1="2014-04-29T13:00:00.000+02:00"

requestContext.actualDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,42).toXMLFormat()
//requestContext.actualDepartureTime1="2014-04-29T13:00:00.000+02:00"

requestContext.expectedDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,43).toXMLFormat()
//requestContext.expectedDepartureTime1="2014-04-29T13:00:00.000+02:00"

// passage 2 / course 2
requestContext.monitoringRef2 = holder["//siri:MonitoringRef"]
requestContext.itemIdenfier2=fournisseur+":Item::2:LOC"
requestContext.lineRef2="STIF:Line::004004009:"
requestContext.dataFrameRef2="any"
requestContext.datedVehicleJourneyRef2=fournisseur+":VehicleJourney::2:LOC"
requestContext.journeyPatternRef2=fournisseur+":JourneyPattern::2:LOC"
requestContext.routeRef2=fournisseur+":Route::1:LOC"
requestContext.operatorRef2=fournisseur+":Operator::SNCF:"
requestContext.originRef2="STIF:StopPoint:Q:108935:"
requestContext.originName2="Arrêt 1"
requestContext.placeRef2="STIF:StopPoint:Q:108943:"
requestContext.placeName2="Arrêt 5"
requestContext.destinationRef2="STIF:StopPoint:Q:108949:"
requestContext.destinationName2="Arrêt 10"
requestContext.vehicleJourneyName2="Course 2"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse2 = getHeureSuivante(2)
requestContext.originAimedDepartureTime2=heureDepartCourse2.toXMLFormat();
requestContext.destinationAimedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,20,0)
//MonitoredCall
requestContext.stopPointRef2=requestContext.monitoringRef
requestContext.stopPointName2="Arrêt 2"
requestContext.aimedArrivalTime2= getAvecMinuteSeconde(heureDepartCourse2,2,0).toXMLFormat()
requestContext.actualArrivalTime2= getAvecMinuteSeconde(heureDepartCourse2,2,1).toXMLFormat()
requestContext.expectedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,2,2).toXMLFormat()

requestContext.aimedDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,41).toXMLFormat()
requestContext.actualDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,42).toXMLFormat()
requestContext.expectedDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,43).toXMLFormat()



// Methodes utilitaires DATE
// Methode Date permettant d'avoir l'heure courante + heure
def getHeureSuivante(int heure){
	def calendar = Calendar.getInstance();
	calendar.add(Calendar.HOUR,heure);
	calendar.set(Calendar.MINUTE, 0);
	calendar.set(Calendar.SECOND, 0);
	calendar.set(Calendar.MILLISECOND, 0);
	def heureSuivante = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return heureSuivante;
}

// Methode permettant de setter les minites et secondes sur l'heure passée
def getAvecMinuteSeconde(javax.xml.datatype.XMLGregorianCalendar xmlCalendar, int minute, int seconde){ 
	Calendar calendar = xmlCalendar.toGregorianCalendar();	
	calendar.set(Calendar.MINUTE, minute);
	calendar.set(Calendar.SECOND, seconde);
	def date = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return date;
      
}
</con:script><con:responseContent><![CDATA[<!--
Cette réponse renvoie les 2 prochains passages de la ZDE STIF:StopPoint:Q:2
Passage 1 : heure courante + 1
Passage 2 : heure courante + 2
-->
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsdl="http://wsdl.siri.org.uk" xmlns:siri="http://www.siri.org.uk/siri" xmlns:acsb="http://www.ifopt.org.uk/acsb" xmlns:ifop="http://www.ifopt.org.uk/ifopt">
   <soapenv:Header/>
   <soapenv:Body>
      <wsdl:GetStopMonitoringResponse>
         <ServiceDeliveryInfo>
            <siri:ResponseTimestamp>${=javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())}</siri:ResponseTimestamp>
            <siri:ProducerRef>${producerRef}</siri:ProducerRef>
            <siri:ResponseMessageIdentifier>${= UUID.randomUUID().toString()}</siri:ResponseMessageIdentifier>
		  <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
         </ServiceDeliveryInfo>
         <Answer>
            <siri:StopMonitoringDelivery version="${version}">
            	<siri:SubscriptionFilterRef>?</siri:SubscriptionFilterRef>
               <siri:ResponseTimestamp>${recordedAtTime}</siri:ResponseTimestamp>
               <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
               <siri:Status>true</siri:Status>
               <siri:MonitoringRef>${monitoringRef}</siri:MonitoringRef>
               <!-- 1 er passage-->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef}</siri:JourneyPatternRef>
                     <siri:JourneyPatternName>${journeyPatternName}</siri:JourneyPatternName>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef1}</siri:RouteRef>
                     <siri:PublishedLineName>${publishedLineName}</siri:PublishedLineName>
                     <siri:DirectionName>${directionName}</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                     <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef1}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie1</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef1}</siri:OriginRef>
                     <siri:OriginName>${originName1}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef1}</siri:PlaceRef>
                        <siri:PlaceName>${placeName1}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef1}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName1}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName1}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime1}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime1}</siri:DestinationAimedArrivalTime>
                     <siri:FirstOrLastJourney>unspecified</siri:FirstOrLastJourney>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <siri:TrainNumbers>
                        <siri:TrainNumberRef>5918</siri:TrainNumberRef>
                     </siri:TrainNumbers>
                     <!-- JourneyParts:-->
                     <siri:JourneyParts>
                        <siri:JourneyPartInfo>
                           <siri:JourneyPartRef>5409</siri:JourneyPartRef>
                           <siri:TrainNumberRef>5928:1</siri:TrainNumberRef>
                           <siri:OperatorRef>${operatorRef1}</siri:OperatorRef>
                        </siri:JourneyPartInfo>
                     </siri:JourneyParts>
                     <!-- MonitoredCall 1er passage-->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef1}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName1}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName1}</siri:DestinationDisplay>
                        <!--<siri:AimedArrivalTime>${aimedArrivalTime1}</siri:AimedArrivalTime>-->
                        <!-- <siri:ActualArrivalTime>${actualArrivalTime1}</siri:ActualArrivalTime>-->
                        <!--<siri:ExpectedArrivalTime>${expectedArrivalTime1}</siri:ExpectedArrivalTime>-->
                        <siri:AimedArrivalTime>2013-09-23T17:02:00.000+02:00</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>2013-09-23T17:02:00.000+02:00</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>2013-09-23T17:02:00.000+02:00</siri:ExpectedArrivalTime>
                        
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalProximityText>à l'approche</siri:ArrivalProximityText>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:ArrivalStopAssignment>
                           <siri:AimedQuayName>voie 2</siri:AimedQuayName>
                        </siri:ArrivalStopAssignment>
                        <!-- <siri:AimedDepartureTime>${aimedDepartureTime1}</siri:AimedDepartureTime>-->
                        <!--<siri:ActualDepartureTime>${actualDepartureTime1}</siri:ActualDepartureTime>-->
                        <!--<siri:ExpectedDepartureTime>${expectedDepartureTime1}</siri:ExpectedDepartureTime>-->
                        <siri:AimedDepartureTime>2013-09-23T17:02:00.000+02:00</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>2013-09-23T17:02:00.000+02:00</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>2013-09-23T17:02:00.000+02:00</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                        <siri:DistanceFromStop>2300</siri:DistanceFromStop>
                        <siri:NumberOfStopsAway>3</siri:NumberOfStopsAway>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
                <!-- 2ème passage -->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier2}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef2}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef2}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef2}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef2}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef2}</siri:JourneyPatternRef>
                     <siri:JourneyPatternName>mission2</siri:JourneyPatternName>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef2}</siri:RouteRef>
                     <siri:PublishedLineName>N</siri:PublishedLineName>
                     <siri:DirectionName>Rambouillet</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                      <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef2}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie2</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef2}</siri:OriginRef>
                     <siri:OriginName>${originName2}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef2}</siri:PlaceRef>
                        <siri:PlaceName>${placeName2}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef2}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName2}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName2}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course 2</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime2}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime2}</siri:DestinationAimedArrivalTime>
                     <siri:FirstOrLastJourney>unspecified</siri:FirstOrLastJourney>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <siri:TrainNumbers>
                        <siri:TrainNumberRef>5918</siri:TrainNumberRef>
                     </siri:TrainNumbers>
                     <!-- JourneyParts:-->
                     <siri:JourneyParts>
                        <siri:JourneyPartInfo>
                           <siri:JourneyPartRef>5409</siri:JourneyPartRef>
                           <siri:TrainNumberRef>5928:1</siri:TrainNumberRef>
                           <siri:OperatorRef>${operatorRef2}</siri:OperatorRef>
                        </siri:JourneyPartInfo>
                     </siri:JourneyParts>
                     <!--  MonitoredCall 2ème passage -->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef2}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName2}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName2}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime2}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime2}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime2}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalProximityText>à l'approche</siri:ArrivalProximityText>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:ArrivalStopAssignment>
                           <siri:AimedQuayName>voie 2</siri:AimedQuayName>
                        </siri:ArrivalStopAssignment>
                        <siri:AimedDepartureTime>${aimedDepartureTime2}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime2}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime2}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                        <siri:DistanceFromStop>2300</siri:DistanceFromStop>
                        <siri:NumberOfStopsAway>3</siri:NumberOfStopsAway>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
            </siri:StopMonitoringDelivery>
         </Answer>
         <AnswerExtension>
         </AnswerExtension>
      </wsdl:GetStopMonitoringResponse>
   </soapenv:Body>
</soapenv:Envelope>]]></con:responseContent><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetStopMonitoring"/></con:response><con:dispatchConfig/></con:mockOperation><con:properties/></con:mockService><con:mockService port="8080" path="/test272Producer" host="stif-pc-dev-08" name="test272Producer" bindToHostOnly="false" docroot=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.mock.WsdlMockService@require-soap-action">false</con:setting></con:settings><con:mockOperation name="GetStopMonitoring" interface="SiriSOAPBinding" operation="GetStopMonitoring"><con:settings/><con:dispatchStyle>SEQUENCE</con:dispatchStyle><con:defaultResponse>Response 1</con:defaultResponse><con:response name="Response 1" encoding="UTF-8"><con:settings/><con:script>// create XmlHolder for request content
def holder = new com.eviware.soapui.support.XmlHolder( mockRequest.requestContent )
def fournisseur = "SNCF-ACCES"
// define namespace
holder.namespaces["siri"] = "http://www.siri.org.uk/"
// récupération de l'id message de la request
requestContext.idMessage = holder["//siri:MessageIdentifier"][0]
requestContext.monitoringRef = holder["//siri:MonitoringRef"]
requestContext.version = holder["//Request/@version"].toString()

// identifiant utilisé (en coherence avec le dataset redis)
requestContext.producerRef="SNCF-ACCES"
requestContext.recordedAtTime = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())
// Passage 1 / course 1
requestContext.itemIdenfier=fournisseur+":Item::272_1:LOC"
requestContext.lineRef="STIF:Line::004004009:"
requestContext.dataFrameRef="any"
requestContext.datedVehicleJourneyRef=fournisseur+":VehicleJourney::1:LOC"
requestContext.journeyPatternRef=fournisseur+":JourneyPattern::1:LOC"
requestContext.journeyPatternName="mission1"
requestContext.publishedLineName="115"
requestContext.routeRef1=fournisseur+":Route::1:LOC"
requestContext.directionName="Rambouillet"
requestContext.operatorRef1=fournisseur+":Operator::SNCF:"
requestContext.originRef1="STIF:StopPoint:Q:108935:"
requestContext.originName1="Arrêt 1"
requestContext.placeRef1="STIF:StopPoint:Q:108943:"
requestContext.placeName1="Arrêt 5"
requestContext.placeRef3="STIF:StopPoint:Q:108944:"
requestContext.placeName3="Arrêt 6"
requestContext.destinationRef1="STIF:StopPoint:Q:108949:"
requestContext.destinationName1="Arrêt 10"
requestContext.vehicleJourneyName1="Course 1"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse = getHeureSuivante(1)
requestContext.originAimedDepartureTime1=heureDepartCourse.toXMLFormat();
requestContext.destinationAimedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,20,0)
//MonitoredCall
requestContext.stopPointRef1=requestContext.monitoringRef
requestContext.stopPointName1="Arrêt 2"
requestContext.aimedArrivalTime1= getAvecMinuteSeconde(heureDepartCourse,2,0).toXMLFormat()
//requestContext.aimedArrivalTime1="2014-04-29T13:00:00.000Z"
requestContext.actualArrivalTime1= getAvecMinuteSeconde(heureDepartCourse,2,1).toXMLFormat()
//requestContext.actualArrivalTime1 = "2014-04-29T13:00:00.000+02:00"
requestContext.expectedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,2,2).toXMLFormat()

requestContext.aimedDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,41).toXMLFormat()
requestContext.actualDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,42).toXMLFormat()
requestContext.expectedDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,43).toXMLFormat()


// passage 2 / course 2
requestContext.monitoringRef2 = holder["//siri:MonitoringRef"]
requestContext.itemIdenfier2=fournisseur+":Item::272_2:LOC"
requestContext.lineRef2="STIF:Line::004004009:"
requestContext.dataFrameRef2="any"
requestContext.datedVehicleJourneyRef2=fournisseur+":VehicleJourney::2:LOC"
requestContext.journeyPatternRef2=fournisseur+":JourneyPattern::2:LOC"
requestContext.routeRef2=fournisseur+":Route::1:LOC"
requestContext.operatorRef2=fournisseur+":Operator::SNCF:"
requestContext.originRef2="STIF:StopPoint:Q:108935:"
requestContext.originName2="Arrêt 1"
requestContext.placeRef2="STIF:StopPoint:Q:108943:"
requestContext.placeName2="Arrêt 5"
requestContext.destinationRef2="STIF:StopPoint:Q:108949:"
requestContext.destinationName2="Arrêt 10"
requestContext.vehicleJourneyName2="Course 2"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse2 = getHeureSuivante(2)
requestContext.originAimedDepartureTime2=heureDepartCourse2.toXMLFormat();
requestContext.destinationAimedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,20,0)
//MonitoredCall
requestContext.stopPointRef2=requestContext.monitoringRef
requestContext.stopPointName2="Arrêt 2"
requestContext.aimedArrivalTime2= getAvecMinuteSeconde(heureDepartCourse2,2,0).toXMLFormat()
requestContext.actualArrivalTime2= getAvecMinuteSeconde(heureDepartCourse2,2,1).toXMLFormat()
requestContext.expectedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,2,2).toXMLFormat()

requestContext.aimedDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,41).toXMLFormat()
requestContext.actualDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,42).toXMLFormat()
requestContext.expectedDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,43).toXMLFormat()



// Methodes utilitaires DATE
// Methode Date permettant d'avoir l'heure courante + heure
def getHeureSuivante(int heure){
	def calendar = Calendar.getInstance();
	calendar.add(Calendar.HOUR,heure);
	calendar.set(Calendar.MINUTE, 0);
	calendar.set(Calendar.SECOND, 0);
	calendar.set(Calendar.MILLISECOND, 0);
	def heureSuivante = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return heureSuivante;
}

// Methode permettant de setter les minites et secondes sur l'heure passée
def getAvecMinuteSeconde(javax.xml.datatype.XMLGregorianCalendar xmlCalendar, int minute, int seconde){ 
	Calendar calendar = xmlCalendar.toGregorianCalendar();	
	calendar.set(Calendar.MINUTE, minute);
	calendar.set(Calendar.SECOND, seconde);
	def date = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return date;
      
}
</con:script><con:responseContent><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:new="http://new.webservice.namespace" xmlns:siri="http://www.siri.org.uk/">
   <soapenv:Header/>
   <soapenv:Body>
      <new:GetStopMonitoringResponse>
         <ServiceDeliveryInfo>
            <siri:ResponseTimestamp>${=javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())}</siri:ResponseTimestamp>
            <siri:ProducerRef>${producerRef}</siri:ProducerRef>
            <siri:ResponseMessageIdentifier>SNCF-ACCES:ResponseMessage::${=String.valueOf((int)Math.random()*1000000000)}:LOC</siri:ResponseMessageIdentifier>
		  <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
         </ServiceDeliveryInfo>
         <Answer>
            <siri:StopMonitoringDelivery version="${version}">
               <siri:ResponseTimestamp>${recordedAtTime}</siri:ResponseTimestamp>
               <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
               <siri:Status>true</siri:Status>
               <!-- 1 er passage-->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef}</siri:JourneyPatternRef>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef1}</siri:RouteRef>
                     <siri:PublishedLineName>${publishedLineName}</siri:PublishedLineName>
                     <siri:DirectionName>${directionName}</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                     <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef1}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie1</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef1}</siri:OriginRef>
                     <siri:OriginName>${originName1}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef1}</siri:PlaceRef>
                        <siri:PlaceName>${placeName1}</siri:PlaceName>
                     </siri:Via>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef3}</siri:PlaceRef>
                        <siri:PlaceName>${placeName3}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef1}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName1}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName1}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime1}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime1}</siri:DestinationAimedArrivalTime>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <!-- MonitoredCall 1er passage-->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef1}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName1}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName1}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime1}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime1}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime1}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:AimedDepartureTime>${aimedDepartureTime1}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime1}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime1}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
                <!-- 2ème passage -->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier2}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef2}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef2}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef2}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef2}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef2}</siri:JourneyPatternRef>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef2}</siri:RouteRef>
                     <siri:PublishedLineName>N</siri:PublishedLineName>
                     <siri:DirectionName>Rambouillet</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                      <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef2}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie2</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef2}</siri:OriginRef>
                     <siri:OriginName>${originName2}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef2}</siri:PlaceRef>
                        <siri:PlaceName>${placeName2}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef2}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName2}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName2}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course 2</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime2}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime2}</siri:DestinationAimedArrivalTime>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <!--  MonitoredCall 2ème passage -->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef2}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName2}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName2}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime2}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime2}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime2}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:AimedDepartureTime>${aimedDepartureTime2}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime2}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime2}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
            </siri:StopMonitoringDelivery>
         </Answer>
         <AnswerExtension>
            <!--You may enter ANY elements at this point-->
         </AnswerExtension>
      </new:GetStopMonitoringResponse>
   </soapenv:Body>
</soapenv:Envelope>]]></con:responseContent><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetStopMonitoring"/></con:response><con:dispatchConfig/></con:mockOperation><con:properties/></con:mockService><con:mockService port="8080" path="/test274Producer_1" host="stif-pc-dev-08" name="test274Producer_1" bindToHostOnly="false" docroot=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.mock.WsdlMockService@require-soap-action">false</con:setting></con:settings><con:mockOperation name="GetStopMonitoring" interface="SiriSOAPBinding" operation="GetStopMonitoring"><con:settings/><con:dispatchStyle>SEQUENCE</con:dispatchStyle><con:defaultResponse>Response 1</con:defaultResponse><con:response name="Response 1" encoding="UTF-8"><con:settings/><con:script>// create XmlHolder for request content
def holder = new com.eviware.soapui.support.XmlHolder( mockRequest.requestContent )
def fournisseur = "SNCF-ACCES"
// define namespace
holder.namespaces["siri"] = "http://www.siri.org.uk/"
// récupération de l'id message de la request
requestContext.idMessage = holder["//siri:MessageIdentifier"][0]
requestContext.monitoringRef = holder["//siri:MonitoringRef"]
requestContext.version = holder["//Request/@version"].toString()

// identifiant utilisé (en coherence avec le dataset redis)
requestContext.producerRef="SNCF-ACCES"
requestContext.recordedAtTime = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())
// Passage 1 / course 1
requestContext.itemIdenfier=fournisseur+":Item::1:LOC"
requestContext.lineRef="STIF:Line::004004009:"
requestContext.dataFrameRef="any"
requestContext.datedVehicleJourneyRef=fournisseur+":VehicleJourney::1:LOC"
requestContext.journeyPatternRef=fournisseur+":JourneyPattern::1:LOC"
requestContext.journeyPatternName="mission1"
requestContext.publishedLineName="115"
requestContext.routeRef1=fournisseur+":Route::1:LOC"
requestContext.directionName="Rambouillet"
requestContext.operatorRef1=fournisseur+":Operator::SNCF:"
requestContext.originRef1="STIF:StopPoint:Q:108935:"
requestContext.originName1="Arrêt 1"
requestContext.placeRef1="STIF:StopPoint:Q:108943:"
requestContext.placeName1="Arrêt 5"
requestContext.destinationRef1="STIF:StopPoint:Q:108949:"
requestContext.destinationName1="Arrêt 10"
requestContext.vehicleJourneyName1="Course 1"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse = getHeureSuivante(1)
requestContext.originAimedDepartureTime1=heureDepartCourse.toXMLFormat();
requestContext.destinationAimedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,20,0)
//MonitoredCall
requestContext.stopPointRef1=requestContext.monitoringRef
requestContext.stopPointName1="Arrêt 2"
requestContext.aimedArrivalTime1= "2015-04-18T12:00:00.000Z"
requestContext.actualArrivalTime1= "2015-04-18T12:20:00.000Z"
requestContext.expectedArrivalTime1="2015-04-18T12:40:00.000Z"

requestContext.aimedDepartureTime1="2015-04-18T12:00:00.000Z"
requestContext.actualDepartureTime1="2015-04-18T12:20:00.000Z"
requestContext.expectedDepartureTime1="2015-04-18T12:40:00.000Z"


// passage 2 / course 2
requestContext.monitoringRef2 = holder["//siri:MonitoringRef"]
requestContext.itemIdenfier2=fournisseur+":Item::2:LOC"
requestContext.lineRef2="STIF:Line::004004009:"
requestContext.dataFrameRef2="any"
requestContext.datedVehicleJourneyRef2=fournisseur+":VehicleJourney::2:LOC"
requestContext.journeyPatternRef2=fournisseur+":JourneyPattern::2:LOC"
requestContext.routeRef2=fournisseur+":Route::1:LOC"
requestContext.operatorRef2=fournisseur+":Operator::SNCF:"
requestContext.originRef2="STIF:StopPoint:Q:108935:"
requestContext.originName2="Arrêt 1"
requestContext.placeRef2="STIF:StopPoint:Q:108943:"
requestContext.placeName2="Arrêt 5"
requestContext.destinationRef2="STIF:StopPoint:Q:108949:"
requestContext.destinationName2="Arrêt 10"
requestContext.vehicleJourneyName2="Course 2"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse2 = getHeureSuivante(2)
requestContext.originAimedDepartureTime2=heureDepartCourse2.toXMLFormat();
requestContext.destinationAimedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,20,0)
//MonitoredCall
requestContext.stopPointRef2=requestContext.monitoringRef
requestContext.stopPointName2="Arrêt 2"
requestContext.aimedArrivalTime2= "2015-04-18T14:00:00.000Z"
requestContext.actualArrivalTime2= "2015-04-18T14:20:00.000Z"
requestContext.expectedArrivalTime2="2015-04-18T14:40:00.000Z"

requestContext.aimedDepartureTime2="2015-04-18T14:00:00.000Z"
requestContext.actualDepartureTime2="2015-04-18T14:20:00.000Z"
requestContext.expectedDepartureTime2="2015-04-18T14:40:00.000Z"



// Methodes utilitaires DATE
// Methode Date permettant d'avoir l'heure courante + heure
def getHeureSuivante(int heure){
	def calendar = Calendar.getInstance();
	calendar.add(Calendar.HOUR,heure);
	calendar.set(Calendar.MINUTE, 0);
	calendar.set(Calendar.SECOND, 0);
	calendar.set(Calendar.MILLISECOND, 0);
	def heureSuivante = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return heureSuivante;
}

// Methode permettant de setter les minites et secondes sur l'heure passée
def getAvecMinuteSeconde(javax.xml.datatype.XMLGregorianCalendar xmlCalendar, int minute, int seconde){ 
	Calendar calendar = xmlCalendar.toGregorianCalendar();	
	calendar.set(Calendar.MINUTE, minute);
	calendar.set(Calendar.SECOND, seconde);
	def date = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return date;
      
}
</con:script><con:responseContent><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:new="http://new.webservice.namespace" xmlns:siri="http://www.siri.org.uk/">
   <soapenv:Header/>
   <soapenv:Body>
      <new:GetStopMonitoringResponse>
         <ServiceDeliveryInfo>
            <siri:ResponseTimestamp>${=javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())}</siri:ResponseTimestamp>
            <siri:ProducerRef>${producerRef}</siri:ProducerRef>
            <siri:ResponseMessageIdentifier>SNCF-ACCES:ResponseMessage::${=String.valueOf((int)Math.random()*1000000000)}:LOC</siri:ResponseMessageIdentifier>
		  <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
         </ServiceDeliveryInfo>
         <Answer>
            <siri:StopMonitoringDelivery version="${version}">
               <siri:ResponseTimestamp>${recordedAtTime}</siri:ResponseTimestamp>
               <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
               <siri:Status>true</siri:Status>
               <!-- 1 er passage-->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef}</siri:JourneyPatternRef>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef1}</siri:RouteRef>
                     <siri:PublishedLineName>${publishedLineName}</siri:PublishedLineName>
                     <siri:DirectionName>${directionName}</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                     <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef1}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie1</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef1}</siri:OriginRef>
                     <siri:OriginName>${originName1}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef1}</siri:PlaceRef>
                        <siri:PlaceName>${placeName1}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef1}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName1}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName1}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime1}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime1}</siri:DestinationAimedArrivalTime>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <!-- MonitoredCall 1er passage-->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef1}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName1}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName1}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime1}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime1}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime1}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:AimedDepartureTime>${aimedDepartureTime1}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime1}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime1}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
                <!-- 2ème passage -->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier2}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef2}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef2}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef2}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef2}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef2}</siri:JourneyPatternRef>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef2}</siri:RouteRef>
                     <siri:PublishedLineName>N</siri:PublishedLineName>
                     <siri:DirectionName>Rambouillet</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                      <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef2}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie2</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef2}</siri:OriginRef>
                     <siri:OriginName>${originName2}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef2}</siri:PlaceRef>
                        <siri:PlaceName>${placeName2}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef2}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName2}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName2}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course 2</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime2}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime2}</siri:DestinationAimedArrivalTime>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <!--  MonitoredCall 2ème passage -->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef2}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName2}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName2}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime2}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime2}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime2}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:AimedDepartureTime>${aimedDepartureTime2}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime2}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime2}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
            </siri:StopMonitoringDelivery>
         </Answer>
         <AnswerExtension>
            <!--You may enter ANY elements at this point-->
         </AnswerExtension>
      </new:GetStopMonitoringResponse>
   </soapenv:Body>
</soapenv:Envelope>]]></con:responseContent><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetStopMonitoring"/></con:response><con:dispatchConfig/></con:mockOperation><con:properties/></con:mockService><con:mockService port="8080" path="/test274Producer_2" host="stif-pc-dev-08" name="test274Producer_2" bindToHostOnly="false" docroot=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.mock.WsdlMockService@require-soap-action">false</con:setting></con:settings><con:mockOperation name="GetStopMonitoring" interface="SiriSOAPBinding" operation="GetStopMonitoring"><con:settings/><con:dispatchStyle>SEQUENCE</con:dispatchStyle><con:defaultResponse>Response 1</con:defaultResponse><con:response name="Response 1" encoding="UTF-8"><con:settings/><con:script>// create XmlHolder for request content
def holder = new com.eviware.soapui.support.XmlHolder( mockRequest.requestContent )
def fournisseur = "SNCF-ACCES"
// define namespace
holder.namespaces["siri"] = "http://www.siri.org.uk/"
// récupération de l'id message de la request
requestContext.idMessage = holder["//siri:MessageIdentifier"][0]
requestContext.monitoringRef = holder["//siri:MonitoringRef"]
requestContext.version = holder["//Request/@version"].toString()

// identifiant utilisé (en coherence avec le dataset redis)
requestContext.producerRef="SNCF-ACCES"
requestContext.recordedAtTime = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())
// Passage 1 / course 1
requestContext.itemIdenfier=fournisseur+":Item::1:LOC"
requestContext.lineRef="STIF:Line::004004009:"
requestContext.dataFrameRef="any"
requestContext.datedVehicleJourneyRef=fournisseur+":VehicleJourney::1:LOC"
requestContext.journeyPatternRef=fournisseur+":JourneyPattern::1:LOC"
requestContext.journeyPatternName="mission1"
requestContext.publishedLineName="115"
requestContext.routeRef1=fournisseur+":Route::1:LOC"
requestContext.directionName="Rambouillet"
requestContext.operatorRef1=fournisseur+":Operator::SNCF:"
requestContext.originRef1="STIF:StopPoint:Q:108935:"
requestContext.originName1="Arrêt 1"
requestContext.placeRef1="STIF:StopPoint:Q:108943:"
requestContext.placeName1="Arrêt 5"
requestContext.destinationRef1="STIF:StopPoint:Q:108949:"
requestContext.destinationName1="Arrêt 10"
requestContext.vehicleJourneyName1="Course 1"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse = getHeureSuivante(1)
requestContext.originAimedDepartureTime1=heureDepartCourse.toXMLFormat();
requestContext.destinationAimedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,20,0)
//MonitoredCall
requestContext.stopPointRef1=requestContext.monitoringRef
requestContext.stopPointName1="Arrêt 2"
requestContext.aimedArrivalTime1= "2015-04-19T12:00:00.000Z"
requestContext.actualArrivalTime1= "2015-04-19T12:20:00.000Z"
requestContext.expectedArrivalTime1="2015-04-19T12:40:00.000Z"

requestContext.aimedDepartureTime1="2015-04-19T12:00:00.000Z"
requestContext.actualDepartureTime1="2015-04-19T12:20:00.000Z"
requestContext.expectedDepartureTime1="2015-04-19T12:40:00.000Z"


// passage 2 / course 2
requestContext.monitoringRef2 = holder["//siri:MonitoringRef"]
requestContext.itemIdenfier2=fournisseur+":Item::2:LOC"
requestContext.lineRef2="STIF:Line::004004009:"
requestContext.dataFrameRef2="any"
requestContext.datedVehicleJourneyRef2=fournisseur+":VehicleJourney::2:LOC"
requestContext.journeyPatternRef2=fournisseur+":JourneyPattern::2:LOC"
requestContext.routeRef2=fournisseur+":Route::1:LOC"
requestContext.operatorRef2=fournisseur+":Operator::SNCF:"
requestContext.originRef2="STIF:StopPoint:Q:108935:"
requestContext.originName2="Arrêt 1"
requestContext.placeRef2="STIF:StopPoint:Q:108943:"
requestContext.placeName2="Arrêt 5"
requestContext.destinationRef2="STIF:StopPoint:Q:108949:"
requestContext.destinationName2="Arrêt 10"
requestContext.vehicleJourneyName2="Course 2"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse2 = getHeureSuivante(2)
requestContext.originAimedDepartureTime2=heureDepartCourse2.toXMLFormat();
requestContext.destinationAimedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,20,0)
//MonitoredCall
requestContext.stopPointRef2=requestContext.monitoringRef
requestContext.stopPointName2="Arrêt 2"
requestContext.aimedArrivalTime2= "2015-04-19T14:00:00.000Z"
requestContext.actualArrivalTime2= "2015-04-19T14:20:00.000Z"
requestContext.expectedArrivalTime2="2015-04-19T14:40:00.000Z"

requestContext.aimedDepartureTime2="2015-04-19T14:00:00.000Z"
requestContext.actualDepartureTime2="2015-04-19T14:20:00.000Z"
requestContext.expectedDepartureTime2="2015-04-19T14:40:00.000Z"



// Methodes utilitaires DATE
// Methode Date permettant d'avoir l'heure courante + heure
def getHeureSuivante(int heure){
	def calendar = Calendar.getInstance();
	calendar.add(Calendar.HOUR,heure);
	calendar.set(Calendar.MINUTE, 0);
	calendar.set(Calendar.SECOND, 0);
	calendar.set(Calendar.MILLISECOND, 0);
	def heureSuivante = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return heureSuivante;
}

// Methode permettant de setter les minites et secondes sur l'heure passée
def getAvecMinuteSeconde(javax.xml.datatype.XMLGregorianCalendar xmlCalendar, int minute, int seconde){ 
	Calendar calendar = xmlCalendar.toGregorianCalendar();	
	calendar.set(Calendar.MINUTE, minute);
	calendar.set(Calendar.SECOND, seconde);
	def date = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return date;
      
}
</con:script><con:responseContent><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:new="http://new.webservice.namespace" xmlns:siri="http://www.siri.org.uk/">
   <soapenv:Header/>
   <soapenv:Body>
      <new:GetStopMonitoringResponse>
         <ServiceDeliveryInfo>
            <siri:ResponseTimestamp>${=javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())}</siri:ResponseTimestamp>
            <siri:ProducerRef>${producerRef}</siri:ProducerRef>
            <siri:ResponseMessageIdentifier>SNCF-ACCES:ResponseMessage::${=String.valueOf((int)Math.random()*1000000000)}:LOC</siri:ResponseMessageIdentifier>
		  <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
         </ServiceDeliveryInfo>
         <Answer>
            <siri:StopMonitoringDelivery version="${version}">
               <siri:ResponseTimestamp>${recordedAtTime}</siri:ResponseTimestamp>
               <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
               <siri:Status>true</siri:Status>
               <!-- 1 er passage-->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef}</siri:JourneyPatternRef>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef1}</siri:RouteRef>
                     <siri:PublishedLineName>${publishedLineName}</siri:PublishedLineName>
                     <siri:DirectionName>${directionName}</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                     <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef1}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie1</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef1}</siri:OriginRef>
                     <siri:OriginName>${originName1}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef1}</siri:PlaceRef>
                        <siri:PlaceName>${placeName1}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef1}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName1}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName1}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime1}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime1}</siri:DestinationAimedArrivalTime>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <!-- MonitoredCall 1er passage-->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef1}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName1}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName1}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime1}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime1}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime1}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:AimedDepartureTime>${aimedDepartureTime1}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime1}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime1}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
                <!-- 2ème passage -->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier2}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef2}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef2}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef2}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef2}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef2}</siri:JourneyPatternRef>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef2}</siri:RouteRef>
                     <siri:PublishedLineName>N</siri:PublishedLineName>
                     <siri:DirectionName>Rambouillet</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                      <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef2}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie2</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef2}</siri:OriginRef>
                     <siri:OriginName>${originName2}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef2}</siri:PlaceRef>
                        <siri:PlaceName>${placeName2}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef2}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName2}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName2}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course 2</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime2}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime2}</siri:DestinationAimedArrivalTime>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <!--  MonitoredCall 2ème passage -->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef2}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName2}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName2}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime2}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime2}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime2}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:AimedDepartureTime>${aimedDepartureTime2}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime2}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime2}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
            </siri:StopMonitoringDelivery>
         </Answer>
         <AnswerExtension>
            <!--You may enter ANY elements at this point-->
         </AnswerExtension>
      </new:GetStopMonitoringResponse>
   </soapenv:Body>
</soapenv:Envelope>]]></con:responseContent><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetStopMonitoring"/></con:response><con:dispatchConfig/></con:mockOperation><con:properties/></con:mockService><con:mockService port="8080" path="/test275Producer_1" host="stif-pc-dev-08" name="test275Producer_1" bindToHostOnly="false" docroot=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.mock.WsdlMockService@require-soap-action">false</con:setting></con:settings><con:mockOperation name="GetStopMonitoring" interface="SiriSOAPBinding" operation="GetStopMonitoring"><con:settings/><con:dispatchStyle>SEQUENCE</con:dispatchStyle><con:defaultResponse>Response 1</con:defaultResponse><con:response name="Response 1" encoding="UTF-8"><con:settings/><con:script>// create XmlHolder for request content
def holder = new com.eviware.soapui.support.XmlHolder( mockRequest.requestContent )
def fournisseur = "SNCF-ACCES"
// define namespace
holder.namespaces["siri"] = "http://www.siri.org.uk/"
// récupération de l'id message de la request
requestContext.idMessage = holder["//siri:MessageIdentifier"][0]
requestContext.monitoringRef = holder["//siri:MonitoringRef"]
requestContext.version = holder["//Request/@version"].toString()

// identifiant utilisé (en coherence avec le dataset redis)
requestContext.producerRef="SNCF-ACCES"
requestContext.recordedAtTime = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())
// Passage 1 / course 1
requestContext.itemIdenfier=fournisseur+":Item::1:LOC"
requestContext.lineRef="STIF:Line::004004009:"
requestContext.dataFrameRef="any"
requestContext.datedVehicleJourneyRef=fournisseur+":VehicleJourney::1:LOC"
requestContext.journeyPatternRef=fournisseur+":JourneyPattern::1:LOC"
requestContext.journeyPatternName="mission1"
requestContext.publishedLineName="115"
requestContext.routeRef1=fournisseur+":Route::1:LOC"
requestContext.directionName="Rambouillet"
requestContext.operatorRef1=fournisseur+":Operator::SNCF:"
requestContext.originRef1="STIF:StopPoint:Q:108935:"
requestContext.originName1="Arrêt 1"
requestContext.placeRef1="STIF:StopPoint:Q:108943:"
requestContext.placeName1="Arrêt 5"
requestContext.destinationRef1="STIF:StopPoint:Q:108949:"
requestContext.destinationName1="Arrêt 10"
requestContext.vehicleJourneyName1="Course 1"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse = getHeureSuivante(1)
requestContext.originAimedDepartureTime1=heureDepartCourse.toXMLFormat();
requestContext.destinationAimedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,20,0)
//MonitoredCall
requestContext.stopPointRef1=requestContext.monitoringRef
requestContext.stopPointName1="Arrêt 2"
requestContext.aimedArrivalTime1= "2015-04-18T12:00:00.000Z"
requestContext.actualArrivalTime1= "2015-04-18T12:20:00.000Z"
requestContext.expectedArrivalTime1="2015-04-18T12:40:00.000Z"

requestContext.aimedDepartureTime1="2015-04-18T12:00:00.000Z"
requestContext.actualDepartureTime1="2015-04-18T12:20:00.000Z"
requestContext.expectedDepartureTime1="2015-04-18T12:40:00.000Z"


// passage 2 / course 2
requestContext.monitoringRef2 = holder["//siri:MonitoringRef"]
requestContext.itemIdenfier2=fournisseur+":Item::2:LOC"
requestContext.lineRef2="STIF:Line::004004009:"
requestContext.dataFrameRef2="any"
requestContext.datedVehicleJourneyRef2=fournisseur+":VehicleJourney::2:LOC"
requestContext.journeyPatternRef2=fournisseur+":JourneyPattern::2:LOC"
requestContext.routeRef2=fournisseur+":Route::1:LOC"
requestContext.operatorRef2=fournisseur+":Operator::SNCF:"
requestContext.originRef2="STIF:StopPoint:Q:108935:"
requestContext.originName2="Arrêt 1"
requestContext.placeRef2="STIF:StopPoint:Q:108943:"
requestContext.placeName2="Arrêt 5"
requestContext.destinationRef2="STIF:StopPoint:Q:108949:"
requestContext.destinationName2="Arrêt 10"
requestContext.vehicleJourneyName2="Course 2"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse2 = getHeureSuivante(2)
requestContext.originAimedDepartureTime2=heureDepartCourse2.toXMLFormat();
requestContext.destinationAimedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,20,0)
//MonitoredCall
requestContext.stopPointRef2=requestContext.monitoringRef
requestContext.stopPointName2="Arrêt 2"
requestContext.aimedArrivalTime2= "2015-04-18T14:00:00.000Z"
requestContext.actualArrivalTime2= "2015-04-18T14:20:00.000Z"
requestContext.expectedArrivalTime2="2015-04-18T14:40:00.000Z"

requestContext.aimedDepartureTime2="2015-04-18T14:00:00.000Z"
requestContext.actualDepartureTime2="2015-04-18T14:20:00.000Z"
requestContext.expectedDepartureTime2="2015-04-18T14:40:00.000Z"



// Methodes utilitaires DATE
// Methode Date permettant d'avoir l'heure courante + heure
def getHeureSuivante(int heure){
	def calendar = Calendar.getInstance();
	calendar.add(Calendar.HOUR,heure);
	calendar.set(Calendar.MINUTE, 0);
	calendar.set(Calendar.SECOND, 0);
	calendar.set(Calendar.MILLISECOND, 0);
	def heureSuivante = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return heureSuivante;
}

// Methode permettant de setter les minites et secondes sur l'heure passée
def getAvecMinuteSeconde(javax.xml.datatype.XMLGregorianCalendar xmlCalendar, int minute, int seconde){ 
	Calendar calendar = xmlCalendar.toGregorianCalendar();	
	calendar.set(Calendar.MINUTE, minute);
	calendar.set(Calendar.SECOND, seconde);
	def date = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return date;
      
}
</con:script><con:responseContent><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:new="http://new.webservice.namespace" xmlns:siri="http://www.siri.org.uk/">
   <soapenv:Header/>
   <soapenv:Body>
      <new:GetStopMonitoringResponse>
         <ServiceDeliveryInfo>
            <siri:ResponseTimestamp>${=javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())}</siri:ResponseTimestamp>
            <siri:ProducerRef>${producerRef}</siri:ProducerRef>
            <siri:ResponseMessageIdentifier>SNCF-ACCES:ResponseMessage::${=String.valueOf((int)Math.random()*1000000000)}:LOC</siri:ResponseMessageIdentifier>
		  <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
         </ServiceDeliveryInfo>
         <Answer>
            <siri:StopMonitoringDelivery version="${version}">
               <siri:ResponseTimestamp>${recordedAtTime}</siri:ResponseTimestamp>
               <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
               <siri:Status>true</siri:Status>
               <!-- 1 er passage-->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef}</siri:JourneyPatternRef>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef1}</siri:RouteRef>
                     <siri:PublishedLineName>${publishedLineName}</siri:PublishedLineName>
                     <siri:DirectionName>${directionName}</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                     <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef1}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie1</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef1}</siri:OriginRef>
                     <siri:OriginName>${originName1}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef1}</siri:PlaceRef>
                        <siri:PlaceName>${placeName1}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef1}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName1}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName1}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime1}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime1}</siri:DestinationAimedArrivalTime>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <!-- MonitoredCall 1er passage-->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef1}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName1}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName1}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime1}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime1}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime1}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:AimedDepartureTime>${aimedDepartureTime1}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime1}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime1}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
                <!-- 2ème passage -->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier2}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef2}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef2}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef2}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef2}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef2}</siri:JourneyPatternRef>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef2}</siri:RouteRef>
                     <siri:PublishedLineName>N</siri:PublishedLineName>
                     <siri:DirectionName>Rambouillet</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                      <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef2}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie2</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef2}</siri:OriginRef>
                     <siri:OriginName>${originName2}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef2}</siri:PlaceRef>
                        <siri:PlaceName>${placeName2}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef2}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName2}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName2}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course 2</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime2}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime2}</siri:DestinationAimedArrivalTime>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <!--  MonitoredCall 2ème passage -->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef2}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName2}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName2}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime2}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime2}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime2}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:AimedDepartureTime>${aimedDepartureTime2}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime2}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime2}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
            </siri:StopMonitoringDelivery>
         </Answer>
         <AnswerExtension>
            <!--You may enter ANY elements at this point-->
         </AnswerExtension>
      </new:GetStopMonitoringResponse>
   </soapenv:Body>
</soapenv:Envelope>]]></con:responseContent><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetStopMonitoring"/></con:response><con:dispatchConfig/></con:mockOperation><con:properties/></con:mockService><con:mockService port="8080" path="/test275Producer_2" host="stif-pc-dev-08" name="test275Producer_2" bindToHostOnly="false" docroot=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.mock.WsdlMockService@require-soap-action">false</con:setting></con:settings><con:mockOperation name="GetStopMonitoring" interface="SiriSOAPBinding" operation="GetStopMonitoring"><con:settings/><con:dispatchStyle>SEQUENCE</con:dispatchStyle><con:defaultResponse>Response 1</con:defaultResponse><con:response name="Response 1" encoding="UTF-8"><con:settings/><con:script>// create XmlHolder for request content
def holder = new com.eviware.soapui.support.XmlHolder( mockRequest.requestContent )
def fournisseur = "SNCF-ACCES"
// define namespace
holder.namespaces["siri"] = "http://www.siri.org.uk/"
// récupération de l'id message de la request
requestContext.idMessage = holder["//siri:MessageIdentifier"][0]
requestContext.monitoringRef = holder["//siri:MonitoringRef"]
requestContext.version = holder["//Request/@version"].toString()

// identifiant utilisé (en coherence avec le dataset redis)
requestContext.producerRef="SNCF-ACCES"
requestContext.recordedAtTime = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())
// Passage 1 / course 1
requestContext.itemIdenfier=fournisseur+":Item::5:LOC"
requestContext.lineRef="STIF:Line::004004009:"
requestContext.dataFrameRef="any"
requestContext.datedVehicleJourneyRef=fournisseur+":VehicleJourney::1:LOC"
requestContext.journeyPatternRef=fournisseur+":JourneyPattern::1:LOC"
requestContext.journeyPatternName="mission1"
requestContext.publishedLineName="115"
requestContext.routeRef1=fournisseur+":Route::1:LOC"
requestContext.directionName="Rambouillet"
requestContext.operatorRef1=fournisseur+":Operator::SNCF:"
requestContext.originRef1="STIF:StopPoint:Q:108935:"
requestContext.originName1="Arrêt 1"
requestContext.placeRef1="STIF:StopPoint:Q:108943:"
requestContext.placeName1="Arrêt 5"
requestContext.destinationRef1="STIF:StopPoint:Q:108949:"
requestContext.destinationName1="Arrêt 10"
requestContext.vehicleJourneyName1="Course 1"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse = getHeureSuivante(1)
requestContext.originAimedDepartureTime1=heureDepartCourse.toXMLFormat();
requestContext.destinationAimedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,20,0)
//MonitoredCall
requestContext.stopPointRef1=requestContext.monitoringRef
requestContext.stopPointName1="Arrêt 2"
requestContext.aimedArrivalTime1= "2015-04-18T12:00:00.000Z"
requestContext.actualArrivalTime1= "2015-04-18T12:20:00.000Z"
requestContext.expectedArrivalTime1="2015-04-18T12:40:00.000Z"

requestContext.aimedDepartureTime1="2015-04-18T12:00:00.000Z"
requestContext.actualDepartureTime1="2015-04-18T12:20:00.000Z"
requestContext.expectedDepartureTime1="2015-04-18T12:40:00.000Z"


// passage 2 / course 2
requestContext.monitoringRef2 = holder["//siri:MonitoringRef"]
requestContext.itemIdenfier2=fournisseur+":Item::2:LOC"
requestContext.lineRef2="STIF:Line::004004009:"
requestContext.dataFrameRef2="any"
requestContext.datedVehicleJourneyRef2=fournisseur+":VehicleJourney::2:LOC"
requestContext.journeyPatternRef2=fournisseur+":JourneyPattern::2:LOC"
requestContext.routeRef2=fournisseur+":Route::1:LOC"
requestContext.operatorRef2=fournisseur+":Operator::SNCF:"
requestContext.originRef2="STIF:StopPoint:Q:108935:"
requestContext.originName2="Arrêt 1"
requestContext.placeRef2="STIF:StopPoint:Q:108943:"
requestContext.placeName2="Arrêt 5"
requestContext.destinationRef2="STIF:StopPoint:Q:108949:"
requestContext.destinationName2="Arrêt 10"
requestContext.vehicleJourneyName2="Course 2"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse2 = getHeureSuivante(2)
requestContext.originAimedDepartureTime2=heureDepartCourse2.toXMLFormat();
requestContext.destinationAimedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,20,0)
//MonitoredCall
requestContext.stopPointRef2=requestContext.monitoringRef
requestContext.stopPointName2="Arrêt 2"
requestContext.aimedArrivalTime2= "2015-04-18T14:00:00.000Z"
requestContext.actualArrivalTime2= "2015-04-18T14:20:00.000Z"
requestContext.expectedArrivalTime2="2015-04-18T14:40:00.000Z"

requestContext.aimedDepartureTime2="2015-04-18T14:00:00.000Z"
requestContext.actualDepartureTime2="2015-04-18T14:20:00.000Z"
requestContext.expectedDepartureTime2="2015-04-18T14:40:00.000Z"



// Methodes utilitaires DATE
// Methode Date permettant d'avoir l'heure courante + heure
def getHeureSuivante(int heure){
	def calendar = Calendar.getInstance();
	calendar.add(Calendar.HOUR,heure);
	calendar.set(Calendar.MINUTE, 0);
	calendar.set(Calendar.SECOND, 0);
	calendar.set(Calendar.MILLISECOND, 0);
	def heureSuivante = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return heureSuivante;
}

// Methode permettant de setter les minites et secondes sur l'heure passée
def getAvecMinuteSeconde(javax.xml.datatype.XMLGregorianCalendar xmlCalendar, int minute, int seconde){ 
	Calendar calendar = xmlCalendar.toGregorianCalendar();	
	calendar.set(Calendar.MINUTE, minute);
	calendar.set(Calendar.SECOND, seconde);
	def date = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return date;
      
}
</con:script><con:responseContent><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:new="http://new.webservice.namespace" xmlns:siri="http://www.siri.org.uk/">
   <soapenv:Header/>
   <soapenv:Body>
      <new:GetStopMonitoringResponse>
         <ServiceDeliveryInfo>
            <siri:ResponseTimestamp>${=javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())}</siri:ResponseTimestamp>
            <siri:ProducerRef>${producerRef}</siri:ProducerRef>
            <siri:ResponseMessageIdentifier>SNCF-ACCES:ResponseMessage::${=String.valueOf((int)Math.random()*1000000000)}:LOC</siri:ResponseMessageIdentifier>
		  <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
         </ServiceDeliveryInfo>
         <Answer>
            <siri:StopMonitoringDelivery version="${version}">
               <siri:ResponseTimestamp>${recordedAtTime}</siri:ResponseTimestamp>
               <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
               <siri:Status>true</siri:Status>
               <!-- 1 er passage-->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef}</siri:JourneyPatternRef>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef1}</siri:RouteRef>
                     <siri:PublishedLineName>${publishedLineName}</siri:PublishedLineName>
                     <siri:DirectionName>${directionName}</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                     <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef1}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie1</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef1}</siri:OriginRef>
                     <siri:OriginName>${originName1}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef1}</siri:PlaceRef>
                        <siri:PlaceName>${placeName1}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef1}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName1}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName1}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime1}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime1}</siri:DestinationAimedArrivalTime>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <!-- MonitoredCall 1er passage-->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef1}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName1}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName1}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime1}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime1}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime1}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:AimedDepartureTime>${aimedDepartureTime1}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime1}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime1}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
                <!-- 2ème passage -->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier2}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef2}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef2}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef2}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef2}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef2}</siri:JourneyPatternRef>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef2}</siri:RouteRef>
                     <siri:PublishedLineName>N</siri:PublishedLineName>
                     <siri:DirectionName>Rambouillet</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                      <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef2}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie2</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef2}</siri:OriginRef>
                     <siri:OriginName>${originName2}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef2}</siri:PlaceRef>
                        <siri:PlaceName>${placeName2}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef2}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName2}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName2}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course 2</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime2}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime2}</siri:DestinationAimedArrivalTime>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <!--  MonitoredCall 2ème passage -->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef2}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName2}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName2}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime2}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime2}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime2}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:AimedDepartureTime>${aimedDepartureTime2}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime2}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime2}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
            </siri:StopMonitoringDelivery>
         </Answer>
         <AnswerExtension>
            <!--You may enter ANY elements at this point-->
         </AnswerExtension>
      </new:GetStopMonitoringResponse>
   </soapenv:Body>
</soapenv:Envelope>]]></con:responseContent><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetStopMonitoring"/></con:response><con:dispatchConfig/></con:mockOperation><con:properties/></con:mockService><con:mockService port="8080" path="/test276Producer" host="stif-pc-dev-08" name="test276Producer" bindToHostOnly="false" docroot=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.mock.WsdlMockService@require-soap-action">false</con:setting></con:settings><con:mockOperation name="GetStopMonitoring" interface="SiriSOAPBinding" operation="GetStopMonitoring"><con:settings/><con:dispatchStyle>SEQUENCE</con:dispatchStyle><con:defaultResponse>Response 1</con:defaultResponse><con:response name="Response 1" encoding="UTF-8"><con:settings/><con:script>// create XmlHolder for request content
def holder = new com.eviware.soapui.support.XmlHolder( mockRequest.requestContent )
def fournisseur = "SNCF-ACCES"
// define namespace
holder.namespaces["siri"] = "http://www.siri.org.uk/"
// récupération de l'id message de la request
requestContext.idMessage = holder["//siri:MessageIdentifier"][0]
requestContext.monitoringRef = holder["//siri:MonitoringRef"]
requestContext.version = holder["//Request/@version"].toString()

// identifiant utilisé (en coherence avec le dataset redis)
requestContext.producerRef="SNCF-ACCES"
requestContext.recordedAtTime = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())
// Passage 1 / course 1
requestContext.itemIdenfier=fournisseur+":Item::1:LOC"
requestContext.lineRef="STIF:Line::004004009:"
requestContext.dataFrameRef="any"
requestContext.datedVehicleJourneyRef=fournisseur+":VehicleJourney::1:LOC"
requestContext.journeyPatternRef=fournisseur+":JourneyPattern::1:LOC"
requestContext.journeyPatternName="mission1"
requestContext.publishedLineName="N"
requestContext.routeRef1=fournisseur+":Route::1:LOC"
requestContext.directionName="Rambouillet"
requestContext.operatorRef1=fournisseur+":Operator::SNCF:"
requestContext.originRef1="STIF:StopPoint:Q:108935:"
requestContext.originName1="Arrêt 1"
requestContext.placeRef1="STIF:StopPoint:Q:108943:"
requestContext.placeName1="Arrêt 5"
requestContext.destinationRef1="STIF:StopPoint:Q:108949:"
requestContext.destinationName1="Arrêt 10"
requestContext.vehicleJourneyName1="Course 1"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse = getHeureSuivante(1)
requestContext.originAimedDepartureTime1=heureDepartCourse.toXMLFormat();
requestContext.destinationAimedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,20,0)
//MonitoredCall
requestContext.stopPointRef1=requestContext.monitoringRef
requestContext.stopPointName1="Arrêt 2"
requestContext.aimedArrivalTime1= getAvecMinuteSeconde(heureDepartCourse,2,0).toXMLFormat()
//requestContext.aimedArrivalTime1="2014-04-29T13:00:00.000Z"
requestContext.actualArrivalTime1= getAvecMinuteSeconde(heureDepartCourse,2,1).toXMLFormat()
//requestContext.actualArrivalTime1 = "2014-04-29T13:00:00.000+02:00"
requestContext.expectedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,2,2).toXMLFormat()

requestContext.aimedDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,41).toXMLFormat()
requestContext.actualDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,42).toXMLFormat()
requestContext.expectedDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,43).toXMLFormat()


// passage 2 / course 2
requestContext.monitoringRef2 = holder["//siri:MonitoringRef"]
requestContext.itemIdenfier2=fournisseur+":Item::2:LOC"
requestContext.lineRef2="STIF:Line::004004009:"
requestContext.dataFrameRef2="any"
requestContext.datedVehicleJourneyRef2=fournisseur+":VehicleJourney::2:LOC"
requestContext.journeyPatternRef2=fournisseur+":JourneyPattern::2:LOC"
requestContext.routeRef2=fournisseur+":Route::1:LOC"
requestContext.operatorRef2=fournisseur+":Operator::SNCF:"
requestContext.originRef2="STIF:StopPoint:Q:108935:"
requestContext.originName2="Arrêt 1"
requestContext.placeRef2="STIF:StopPoint:Q:108943:"
requestContext.placeName2="Arrêt 5"
requestContext.destinationRef2="STIF:StopPoint:Q:108949:"
requestContext.destinationName2="Arrêt 10"
requestContext.vehicleJourneyName2="Course 2"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse2 = getHeureSuivante(2)
requestContext.originAimedDepartureTime2=heureDepartCourse2.toXMLFormat();
requestContext.destinationAimedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,20,0)
//MonitoredCall
requestContext.stopPointRef2=requestContext.monitoringRef
requestContext.stopPointName2="Arrêt 2"
requestContext.aimedArrivalTime2= getAvecMinuteSeconde(heureDepartCourse2,2,0).toXMLFormat()
requestContext.actualArrivalTime2= getAvecMinuteSeconde(heureDepartCourse2,2,1).toXMLFormat()
requestContext.expectedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,2,2).toXMLFormat()

requestContext.aimedDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,41).toXMLFormat()
requestContext.actualDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,42).toXMLFormat()
requestContext.expectedDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,43).toXMLFormat()



// Methodes utilitaires DATE
// Methode Date permettant d'avoir l'heure courante + heure
def getHeureSuivante(int heure){
	def calendar = Calendar.getInstance();
	calendar.add(Calendar.HOUR,heure);
	calendar.set(Calendar.MINUTE, 0);
	calendar.set(Calendar.SECOND, 0);
	calendar.set(Calendar.MILLISECOND, 0);
	def heureSuivante = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return heureSuivante;
}

// Methode permettant de setter les minites et secondes sur l'heure passée
def getAvecMinuteSeconde(javax.xml.datatype.XMLGregorianCalendar xmlCalendar, int minute, int seconde){ 
	Calendar calendar = xmlCalendar.toGregorianCalendar();	
	calendar.set(Calendar.MINUTE, minute);
	calendar.set(Calendar.SECOND, seconde);
	def date = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return date;
      
}
</con:script><con:responseContent><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:new="http://new.webservice.namespace" xmlns:siri="http://www.siri.org.uk/">
   <soapenv:Header/>
   <soapenv:Body>
      <new:GetStopMonitoringResponse>
         <ServiceDeliveryInfo>
            <siri:ResponseTimestamp>${=javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())}</siri:ResponseTimestamp>
            <siri:ProducerRef>${producerRef}</siri:ProducerRef>
            <siri:ResponseMessageIdentifier>SNCF-ACCES:ResponseMessage::1:LOC</siri:ResponseMessageIdentifier>
		  <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
         </ServiceDeliveryInfo>
         <Answer>
            <siri:StopMonitoringDelivery version="${version}">
               <siri:ResponseTimestamp>${=javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())}</siri:ResponseTimestamp>
               <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
               <siri:Status>false</siri:Status>
               
               <siri:ErrorCondition>
                  <siri:NoInfoForTopicError>
                     <siri:ErrorText>La requête est valide, mais aucune donnée correspondante n'est disponible sur le serveur</siri:ErrorText>
                  </siri:NoInfoForTopicError>
                  <siri:Description>La requête est valide, mais aucune donnée correspondante n'est disponible sur le serveur</siri:Description>
               </siri:ErrorCondition>
               
            </siri:StopMonitoringDelivery>
         </Answer>
         <AnswerExtension>
            <!--You may enter ANY elements at this point-->
         </AnswerExtension>
      </new:GetStopMonitoringResponse>
   </soapenv:Body>
</soapenv:Envelope>]]></con:responseContent><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetStopMonitoring"/></con:response><con:dispatchConfig/></con:mockOperation><con:properties/></con:mockService><con:mockService port="8080" path="/test277Producer" host="stif-pc-dev-08" name="test277Producer" bindToHostOnly="false" docroot=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.mock.WsdlMockService@require-soap-action">false</con:setting></con:settings><con:mockOperation name="GetStopMonitoring" interface="SiriSOAPBinding" operation="GetStopMonitoring"><con:settings/><con:dispatchStyle>SEQUENCE</con:dispatchStyle><con:defaultResponse>Response 1</con:defaultResponse><con:response name="Response 1" encoding="UTF-8"><con:settings/><con:script>// create XmlHolder for request content
def holder = new com.eviware.soapui.support.XmlHolder( mockRequest.requestContent )
def fournisseur = "SNCF-ACCES"
// define namespace
holder.namespaces["siri"] = "http://www.siri.org.uk/"
// récupération de l'id message de la request
requestContext.idMessage = holder["//siri:MessageIdentifier"][0]
requestContext.monitoringRef = holder["//siri:MonitoringRef"]
requestContext.version = holder["//Request/@version"].toString()

// identifiant utilisé (en coherence avec le dataset redis)
requestContext.producerRef="SNCF-ACCES"
requestContext.recordedAtTime = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())
// Passage 1 / course 1
requestContext.itemIdenfier=fournisseur+":Item::1:LOC"
requestContext.lineRef="STIF:Line::00:"
requestContext.dataFrameRef="any"
requestContext.datedVehicleJourneyRef=fournisseur+":VehicleJourney::1:LOC"
requestContext.journeyPatternRef=fournisseur+":JourneyPattern::1:LOC"
requestContext.journeyPatternName="mission1"
requestContext.publishedLineName="N"
requestContext.routeRef1=fournisseur+":Route::1:LOC"
requestContext.directionName="Rambouillet"
requestContext.operatorRef1=fournisseur+":Operator::SNCF:"
requestContext.originRef1="STIF:StopPoint:Q:108935:"
requestContext.originName1="Arrêt 1"
requestContext.placeRef1="STIF:StopPoint:Q:108943:"
requestContext.placeName1="Arrêt 5"
requestContext.destinationRef1="STIF:StopPoint:Q:108949:"
requestContext.destinationName1="Arrêt 10"
requestContext.vehicleJourneyName1="Course 1"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse = getHeureSuivante(1)
requestContext.originAimedDepartureTime1=heureDepartCourse.toXMLFormat();
requestContext.destinationAimedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,20,0)
//MonitoredCall
requestContext.stopPointRef1=requestContext.monitoringRef
requestContext.stopPointName1="Arrêt 2"
requestContext.aimedArrivalTime1= getAvecMinuteSeconde(heureDepartCourse,2,0).toXMLFormat()
//requestContext.aimedArrivalTime1="2014-04-29T13:00:00.000Z"
requestContext.actualArrivalTime1= getAvecMinuteSeconde(heureDepartCourse,2,1).toXMLFormat()
//requestContext.actualArrivalTime1 = "2014-04-29T13:00:00.000+02:00"
requestContext.expectedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,2,2).toXMLFormat()

requestContext.aimedDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,41).toXMLFormat()
requestContext.actualDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,42).toXMLFormat()
requestContext.expectedDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,43).toXMLFormat()


// passage 2 / course 2
requestContext.monitoringRef2 = holder["//siri:MonitoringRef"]
requestContext.itemIdenfier2=fournisseur+":Item::2:LOC"
requestContext.lineRef2="STIF:Line::004004009:"
requestContext.dataFrameRef2="any"
requestContext.datedVehicleJourneyRef2=fournisseur+":VehicleJourney::2:LOC"
requestContext.journeyPatternRef2=fournisseur+":JourneyPattern::2:LOC"
requestContext.routeRef2=fournisseur+":Route::1:LOC"
requestContext.operatorRef2=fournisseur+":Operator::SNCF:"
requestContext.originRef2="STIF:StopPoint:Q:108935:"
requestContext.originName2="Arrêt 1"
requestContext.placeRef2="STIF:StopPoint:Q:108943:"
requestContext.placeName2="Arrêt 5"
requestContext.destinationRef2="STIF:StopPoint:Q:108949:"
requestContext.destinationName2="Arrêt 10"
requestContext.vehicleJourneyName2="Course 2"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse2 = getHeureSuivante(2)
requestContext.originAimedDepartureTime2=heureDepartCourse2.toXMLFormat();
requestContext.destinationAimedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,20,0)
//MonitoredCall
requestContext.stopPointRef2=requestContext.monitoringRef
requestContext.stopPointName2="Arrêt 2"
requestContext.aimedArrivalTime2= getAvecMinuteSeconde(heureDepartCourse2,2,0).toXMLFormat()
requestContext.actualArrivalTime2= getAvecMinuteSeconde(heureDepartCourse2,2,1).toXMLFormat()
requestContext.expectedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,2,2).toXMLFormat()

requestContext.aimedDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,41).toXMLFormat()
requestContext.actualDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,42).toXMLFormat()
requestContext.expectedDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,43).toXMLFormat()



// Methodes utilitaires DATE
// Methode Date permettant d'avoir l'heure courante + heure
def getHeureSuivante(int heure){
	def calendar = Calendar.getInstance();
	calendar.add(Calendar.HOUR,heure);
	calendar.set(Calendar.MINUTE, 0);
	calendar.set(Calendar.SECOND, 0);
	calendar.set(Calendar.MILLISECOND, 0);
	def heureSuivante = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return heureSuivante;
}

// Methode permettant de setter les minites et secondes sur l'heure passée
def getAvecMinuteSeconde(javax.xml.datatype.XMLGregorianCalendar xmlCalendar, int minute, int seconde){ 
	Calendar calendar = xmlCalendar.toGregorianCalendar();	
	calendar.set(Calendar.MINUTE, minute);
	calendar.set(Calendar.SECOND, seconde);
	def date = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return date;
      
}
</con:script><con:responseContent><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:new="http://new.webservice.namespace" xmlns:siri="http://www.siri.org.uk/">
   <soapenv:Header/>
   <soapenv:Body>
      <new:GetStopMonitoringResponse>
         <ServiceDeliveryInfo>
            <siri:ResponseTimestamp>${=javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())}</siri:ResponseTimestamp>
            <siri:ProducerRef>${producerRef}</siri:ProducerRef>
            <siri:ResponseMessageIdentifier>SNCF-ACCES:ResponseMessage::1:LOC</siri:ResponseMessageIdentifier>
		  <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
         </ServiceDeliveryInfo>
         <Answer>
            <siri:StopMonitoringDelivery version="${version}">
               <siri:ResponseTimestamp>${recordedAtTime}</siri:ResponseTimestamp>
               <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
               <siri:Status>true</siri:Status>
               <!-- 1 er passage-->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef}</siri:JourneyPatternRef>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef1}</siri:RouteRef>
                     <siri:PublishedLineName>${publishedLineName}</siri:PublishedLineName>
                     <siri:DirectionName>${directionName}</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                     <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef1}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie1</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef1}</siri:OriginRef>
                     <siri:OriginName>${originName1}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef1}</siri:PlaceRef>
                        <siri:PlaceName>${placeName1}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef1}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName1}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName1}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime1}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime1}</siri:DestinationAimedArrivalTime>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <!-- MonitoredCall 1er passage-->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef1}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName1}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName1}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime1}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime1}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime1}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:AimedDepartureTime>${aimedDepartureTime1}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime1}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime1}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
                <!-- 2ème passage -->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier2}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef2}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef2}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef2}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef2}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef2}</siri:JourneyPatternRef>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef2}</siri:RouteRef>
                     <siri:PublishedLineName>N</siri:PublishedLineName>
                     <siri:DirectionName>Rambouillet</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                      <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef2}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie2</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef2}</siri:OriginRef>
                     <siri:OriginName>${originName2}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef2}</siri:PlaceRef>
                        <siri:PlaceName>${placeName2}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef2}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName2}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName2}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course 2</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime2}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime2}</siri:DestinationAimedArrivalTime>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <!--  MonitoredCall 2ème passage -->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef2}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName2}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName2}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime2}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime2}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime2}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:AimedDepartureTime>${aimedDepartureTime2}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime2}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime2}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
            </siri:StopMonitoringDelivery>
         </Answer>
         <AnswerExtension>
            <!--You may enter ANY elements at this point-->
         </AnswerExtension>
      </new:GetStopMonitoringResponse>
   </soapenv:Body>
</soapenv:Envelope>]]></con:responseContent><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetStopMonitoring"/></con:response><con:dispatchConfig/></con:mockOperation><con:properties/></con:mockService><con:mockService port="8080" path="/test278Producer" host="stif-pc-dev-08" name="test278Producer" bindToHostOnly="false" docroot=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.mock.WsdlMockService@require-soap-action">false</con:setting></con:settings><con:mockOperation name="GetStopMonitoring" interface="SiriSOAPBinding" operation="GetStopMonitoring"><con:settings/><con:dispatchStyle>SEQUENCE</con:dispatchStyle><con:defaultResponse>Response 1</con:defaultResponse><con:response name="Response 1" encoding="UTF-8"><con:settings/><con:script>// create XmlHolder for request content
def holder = new com.eviware.soapui.support.XmlHolder( mockRequest.requestContent )
def fournisseur = "SNCF-ACCES"
// define namespace
holder.namespaces["siri"] = "http://www.siri.org.uk/"
// récupération de l'id message de la request
requestContext.idMessage = holder["//siri:MessageIdentifier"][0]
requestContext.monitoringRef = holder["//siri:MonitoringRef"]
requestContext.version = holder["//Request/@version"].toString()

// identifiant utilisé (en coherence avec le dataset redis)
requestContext.producerRef="SNCF-ACCES"
requestContext.recordedAtTime = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())
// Passage 1 / course 1
requestContext.itemIdenfier=fournisseur+":Item::1:LOC"
requestContext.lineRef="STIF:Line::004004009:"
requestContext.dataFrameRef="any"
requestContext.datedVehicleJourneyRef=fournisseur+":VehicleJourney::1:LOC"
requestContext.journeyPatternRef=fournisseur+":JourneyPattern::1:LOC"
requestContext.journeyPatternName="mission1"
requestContext.publishedLineName="115"
requestContext.routeRef1=fournisseur+":Route::1:LOC"
requestContext.directionName="Rambouillet"
requestContext.operatorRef1=fournisseur+":Operator::SNCF:"
requestContext.originRef1="STIF:StopPoint:Q:1:"
requestContext.originName1="Arrêt 1"
requestContext.placeRef1="STIF:StopPoint:Q:108943:"
requestContext.placeName1="Arrêt 5"
requestContext.destinationRef1="STIF:StopPoint:Q:108949:"
requestContext.destinationName1="Arrêt 10"
requestContext.vehicleJourneyName1="Course 1"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse = getHeureSuivante(1)
requestContext.originAimedDepartureTime1=heureDepartCourse.toXMLFormat();
requestContext.destinationAimedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,20,0)
//MonitoredCall
requestContext.stopPointRef1=requestContext.monitoringRef
requestContext.stopPointName1="Arrêt 2"
requestContext.aimedArrivalTime1= getAvecMinuteSeconde(heureDepartCourse,2,0).toXMLFormat()
//requestContext.aimedArrivalTime1="2014-04-29T13:00:00.000Z"
requestContext.actualArrivalTime1= getAvecMinuteSeconde(heureDepartCourse,2,1).toXMLFormat()
//requestContext.actualArrivalTime1 = "2014-04-29T13:00:00.000+02:00"
requestContext.expectedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,2,2).toXMLFormat()

requestContext.aimedDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,41).toXMLFormat()
requestContext.actualDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,42).toXMLFormat()
requestContext.expectedDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,43).toXMLFormat()


// passage 2 / course 2
requestContext.monitoringRef2 = holder["//siri:MonitoringRef"]
requestContext.itemIdenfier2=fournisseur+":Item::2:LOC"
requestContext.lineRef2="STIF:Line::004004009:"
requestContext.dataFrameRef2="any"
requestContext.datedVehicleJourneyRef2=fournisseur+":VehicleJourney::2:LOC"
requestContext.journeyPatternRef2=fournisseur+":JourneyPattern::2:LOC"
requestContext.routeRef2=fournisseur+":Route::1:LOC"
requestContext.operatorRef2=fournisseur+":Operator::SNCF:"
requestContext.originRef2="STIF:StopPoint:Q:108935:"
requestContext.originName2="Arrêt 1"
requestContext.placeRef2="STIF:StopPoint:Q:108943:"
requestContext.placeName2="Arrêt 5"
requestContext.destinationRef2="STIF:StopPoint:Q:108949:"
requestContext.destinationName2="Arrêt 10"
requestContext.vehicleJourneyName2="Course 2"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse2 = getHeureSuivante(2)
requestContext.originAimedDepartureTime2=heureDepartCourse2.toXMLFormat();
requestContext.destinationAimedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,20,0)
//MonitoredCall
requestContext.stopPointRef2=requestContext.monitoringRef
requestContext.stopPointName2="Arrêt 2"
requestContext.aimedArrivalTime2= getAvecMinuteSeconde(heureDepartCourse2,2,0).toXMLFormat()
requestContext.actualArrivalTime2= getAvecMinuteSeconde(heureDepartCourse2,2,1).toXMLFormat()
requestContext.expectedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,2,2).toXMLFormat()

requestContext.aimedDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,41).toXMLFormat()
requestContext.actualDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,42).toXMLFormat()
requestContext.expectedDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,43).toXMLFormat()



// Methodes utilitaires DATE
// Methode Date permettant d'avoir l'heure courante + heure
def getHeureSuivante(int heure){
	def calendar = Calendar.getInstance();
	calendar.add(Calendar.HOUR,heure);
	calendar.set(Calendar.MINUTE, 0);
	calendar.set(Calendar.SECOND, 0);
	calendar.set(Calendar.MILLISECOND, 0);
	def heureSuivante = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return heureSuivante;
}

// Methode permettant de setter les minites et secondes sur l'heure passée
def getAvecMinuteSeconde(javax.xml.datatype.XMLGregorianCalendar xmlCalendar, int minute, int seconde){ 
	Calendar calendar = xmlCalendar.toGregorianCalendar();	
	calendar.set(Calendar.MINUTE, minute);
	calendar.set(Calendar.SECOND, seconde);
	def date = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return date;
      
}
</con:script><con:responseContent><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:new="http://new.webservice.namespace" xmlns:siri="http://www.siri.org.uk/">
   <soapenv:Header/>
   <soapenv:Body>
      <new:GetStopMonitoringResponse>
         <ServiceDeliveryInfo>
            <siri:ResponseTimestamp>${=javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())}</siri:ResponseTimestamp>
            <siri:ProducerRef>${producerRef}</siri:ProducerRef>
            <siri:ResponseMessageIdentifier>SNCF-ACCES:ResponseMessage::1:LOC</siri:ResponseMessageIdentifier>
		  <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
         </ServiceDeliveryInfo>
         <Answer>
            <siri:StopMonitoringDelivery version="${version}">
               <siri:ResponseTimestamp>${recordedAtTime}</siri:ResponseTimestamp>
               <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
               <siri:Status>true</siri:Status>
               <!-- 1 er passage-->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef}</siri:JourneyPatternRef>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef1}</siri:RouteRef>
                     <siri:PublishedLineName>${publishedLineName}</siri:PublishedLineName>
                     <siri:DirectionName>${directionName}</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                     <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef1}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie1</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef1}</siri:OriginRef>
                     <siri:OriginName>${originName1}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef1}</siri:PlaceRef>
                        <siri:PlaceName>${placeName1}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef1}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName1}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName1}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime1}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime1}</siri:DestinationAimedArrivalTime>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <!-- MonitoredCall 1er passage-->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef1}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName1}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName1}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime1}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime1}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime1}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:AimedDepartureTime>${aimedDepartureTime1}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime1}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime1}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
                <!-- 2ème passage -->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier2}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef2}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef2}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef2}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef2}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef2}</siri:JourneyPatternRef>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef2}</siri:RouteRef>
                     <siri:PublishedLineName>N</siri:PublishedLineName>
                     <siri:DirectionName>Rambouillet</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                      <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef2}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie2</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef2}</siri:OriginRef>
                     <siri:OriginName>${originName2}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef2}</siri:PlaceRef>
                        <siri:PlaceName>${placeName2}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef2}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName2}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName2}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course 2</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime2}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime2}</siri:DestinationAimedArrivalTime>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <!--  MonitoredCall 2ème passage -->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef2}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName2}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName2}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime2}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime2}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime2}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:AimedDepartureTime>${aimedDepartureTime2}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime2}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime2}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
            </siri:StopMonitoringDelivery>
         </Answer>
         <AnswerExtension>
            <!--You may enter ANY elements at this point-->
         </AnswerExtension>
      </new:GetStopMonitoringResponse>
   </soapenv:Body>
</soapenv:Envelope>]]></con:responseContent><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetStopMonitoring"/></con:response><con:dispatchConfig/></con:mockOperation><con:properties/></con:mockService><con:mockService port="8080" path="/test280Producer" host="stif-pc-dev-08" name="test280Producer" bindToHostOnly="false" docroot=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.mock.WsdlMockService@require-soap-action">false</con:setting></con:settings><con:mockOperation name="GetStopMonitoring" interface="SiriSOAPBinding" operation="GetStopMonitoring"><con:settings/><con:dispatchStyle>SEQUENCE</con:dispatchStyle><con:defaultResponse>Response 1</con:defaultResponse><con:response name="Response 1" encoding="UTF-8"><con:settings/><con:script>// create XmlHolder for request content
def holder = new com.eviware.soapui.support.XmlHolder( mockRequest.requestContent )
def fournisseur = "SNCF-ACCES"
// define namespace
holder.namespaces["siri"] = "http://www.siri.org.uk/"
// récupération de l'id message de la request
requestContext.idMessage = holder["//siri:MessageIdentifier"][0]
requestContext.monitoringRef = holder["//siri:MonitoringRef"]
requestContext.version = holder["//Request/@version"].toString()

// identifiant utilisé (en coherence avec le dataset redis)
requestContext.producerRef="SNCF-ACCES"
requestContext.recordedAtTime = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())
// Passage 1 / course 1
requestContext.itemIdenfier=fournisseur+":Item::1:LOC"
requestContext.lineRef="STIF:Line::004004009:"
requestContext.dataFrameRef="any"
requestContext.datedVehicleJourneyRef=fournisseur+":VehicleJourney::1:LOC"
requestContext.journeyPatternRef=fournisseur+":JourneyPattern::1:LOC"
requestContext.journeyPatternName="mission1"
requestContext.publishedLineName="115"
requestContext.routeRef1=fournisseur+":Route::1:LOC"
requestContext.directionName="Rambouillet"
requestContext.operatorRef1=fournisseur+":Operator::SNCF:"
requestContext.originRef1="STIF:StopPoint:Q:108935:"
requestContext.originName1="Arrêt 1"
requestContext.placeRef1="STIF:StopPoint:Q:108943:"
requestContext.placeName1="Arrêt 5"
requestContext.destinationRef1="STIF:StopPoint:Q:108949:"
requestContext.destinationName1="Arrêt 10"
requestContext.vehicleJourneyName1="Course 1"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse = getHeureSuivante(1)
requestContext.originAimedDepartureTime1=heureDepartCourse.toXMLFormat();
requestContext.destinationAimedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,20,0)
//MonitoredCall
requestContext.stopPointRef1=requestContext.monitoringRef
requestContext.stopPointName1="Arrêt 2"
requestContext.aimedArrivalTime1= getAvecMinuteSeconde(heureDepartCourse,2,0).toXMLFormat()
//requestContext.aimedArrivalTime1="2014-04-29T13:00:00.000Z"
requestContext.actualArrivalTime1= getAvecMinuteSeconde(heureDepartCourse,2,1).toXMLFormat()
//requestContext.actualArrivalTime1 = "2014-04-29T13:00:00.000+02:00"
requestContext.expectedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,2,2).toXMLFormat()

requestContext.aimedDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,41).toXMLFormat()
requestContext.actualDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,42).toXMLFormat()
requestContext.expectedDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,43).toXMLFormat()


// passage 2 / course 2
requestContext.monitoringRef2 = holder["//siri:MonitoringRef"]
requestContext.itemIdenfier2=fournisseur+":Item::2:LOC"
requestContext.lineRef2="STIF:Line::004004009:"
requestContext.dataFrameRef2="any"
requestContext.datedVehicleJourneyRef2=fournisseur+":VehicleJourney::2:LOC"
requestContext.journeyPatternRef2=fournisseur+":JourneyPattern::2:LOC"
requestContext.routeRef2=fournisseur+":Route::1:LOC"
requestContext.operatorRef2=fournisseur+":Operator::SNCF:"
requestContext.originRef2="STIF:StopPoint:Q:108935:"
requestContext.originName2="Arrêt 1"
requestContext.placeRef2="STIF:StopPoint:Q:108943:"
requestContext.placeName2="Arrêt 5"
requestContext.destinationRef2="STIF:StopPoint:Q:108949:"
requestContext.destinationName2="Arrêt 10"
requestContext.vehicleJourneyName2="Course 2"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse2 = getHeureSuivante(2)
requestContext.originAimedDepartureTime2=heureDepartCourse2.toXMLFormat();
requestContext.destinationAimedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,20,0)
//MonitoredCall
requestContext.stopPointRef2=requestContext.monitoringRef
requestContext.stopPointName2="Arrêt 2"
requestContext.aimedArrivalTime2= getAvecMinuteSeconde(heureDepartCourse2,2,0).toXMLFormat()
requestContext.actualArrivalTime2= getAvecMinuteSeconde(heureDepartCourse2,2,1).toXMLFormat()
requestContext.expectedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,2,2).toXMLFormat()

requestContext.aimedDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,41).toXMLFormat()
requestContext.actualDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,42).toXMLFormat()
requestContext.expectedDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,43).toXMLFormat()



// Methodes utilitaires DATE
// Methode Date permettant d'avoir l'heure courante + heure
def getHeureSuivante(int heure){
	def calendar = Calendar.getInstance();
	calendar.add(Calendar.HOUR,heure);
	calendar.set(Calendar.MINUTE, 0);
	calendar.set(Calendar.SECOND, 0);
	calendar.set(Calendar.MILLISECOND, 0);
	def heureSuivante = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return heureSuivante;
}

// Methode permettant de setter les minites et secondes sur l'heure passée
def getAvecMinuteSeconde(javax.xml.datatype.XMLGregorianCalendar xmlCalendar, int minute, int seconde){ 
	Calendar calendar = xmlCalendar.toGregorianCalendar();	
	calendar.set(Calendar.MINUTE, minute);
	calendar.set(Calendar.SECOND, seconde);
	def date = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return date;
      
}
</con:script><con:responseContent><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:new="http://new.webservice.namespace" xmlns:siri="http://www.siri.org.uk/">
   <soapenv:Header/>
   <soapenv:Body>
      <new:GetStopMonitoringResponse>
         <ServiceDeliveryInfo>
            <siri:ResponseTimestamp>${=javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())}</siri:ResponseTimestamp>
            <siri:ProducerRef>${producerRef}</siri:ProducerRef>
            <siri:ResponseMessageIdentifier>SNCF-ACCES:ResponseMessage::1:LOC</siri:ResponseMessageIdentifier>
		  <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
         </ServiceDeliveryInfo>
         <Answer>
            <siri:StopMonitoringDelivery version="${version}">
               <siri:ResponseTimestamp>${recordedAtTime}</siri:ResponseTimestamp>
               <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
               <siri:Status>true</siri:Status>
               <!-- 1 er passage-->

<!-------------------------------------
Erreur SIRI : Modification du nom du champ suivant
-------------------------------------->
               <siri:MonitoredSVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef}</siri:JourneyPatternRef>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef1}</siri:RouteRef>
                     <siri:PublishedLineName>${publishedLineName}</siri:PublishedLineName>
                     <siri:DirectionName>${directionName}</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                     <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef1}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie1</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef1}</siri:OriginRef>
                     <siri:OriginName>${originName1}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef1}</siri:PlaceRef>
                        <siri:PlaceName>${placeName1}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef1}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName1}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName1}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime1}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime1}</siri:DestinationAimedArrivalTime>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <!-- MonitoredCall 1er passage-->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef1}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName1}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName1}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime1}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime1}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime1}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:AimedDepartureTime>${aimedDepartureTime1}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime1}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime1}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
                <!-- 2ème passage -->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier2}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef2}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef2}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef2}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef2}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef2}</siri:JourneyPatternRef>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef2}</siri:RouteRef>
                     <siri:PublishedLineName>N</siri:PublishedLineName>
                     <siri:DirectionName>Rambouillet</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                      <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef2}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie2</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef2}</siri:OriginRef>
                     <siri:OriginName>${originName2}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef2}</siri:PlaceRef>
                        <siri:PlaceName>${placeName2}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef2}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName2}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName2}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course 2</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime2}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime2}</siri:DestinationAimedArrivalTime>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <!--  MonitoredCall 2ème passage -->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef2}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName2}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName2}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime2}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime2}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime2}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:AimedDepartureTime>${aimedDepartureTime2}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime2}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime2}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
            </siri:StopMonitoringDelivery>
         </Answer>
         <AnswerExtension>
            <!--You may enter ANY elements at this point-->
         </AnswerExtension>
      </new:GetStopMonitoringResponse>
   </soapenv:Body>
</soapenv:Envelope>]]></con:responseContent><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetStopMonitoring"/></con:response><con:dispatchConfig/></con:mockOperation><con:properties/></con:mockService><con:mockService port="8080" path="/test285Producer" host="stif-pc-dev-08" name="test285Producer" bindToHostOnly="false" docroot=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.mock.WsdlMockService@require-soap-action">false</con:setting></con:settings><con:mockOperation name="GetStopMonitoring" interface="SiriSOAPBinding" operation="GetStopMonitoring"><con:settings/><con:dispatchStyle>SEQUENCE</con:dispatchStyle><con:defaultResponse>Response 1</con:defaultResponse><con:response name="Response 1" encoding="UTF-8"><con:settings/><con:script>// create XmlHolder for request content
def holder = new com.eviware.soapui.support.XmlHolder( mockRequest.requestContent )
def fournisseur = "SNCF-ACCES"
// define namespace
holder.namespaces["siri"] = "http://www.siri.org.uk/"
// récupération de l'id message de la request
requestContext.idMessage = holder["//siri:MessageIdentifier"][0]
requestContext.monitoringRef = holder["//siri:MonitoringRef"]
requestContext.version = holder["//Request/@version"].toString()

// identifiant utilisé (en coherence avec le dataset redis)
requestContext.producerRef="SNCF-ACCES"
requestContext.recordedAtTime = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())
// Passage 1 / course 1
requestContext.itemIdenfier=fournisseur+":Item::1:LOC"
requestContext.lineRef="STIF:Line::004004009:"
requestContext.dataFrameRef="any"
requestContext.datedVehicleJourneyRef=fournisseur+":VehicleJourney::1:LOC"
requestContext.journeyPatternRef=fournisseur+":JourneyPattern::1:LOC"
requestContext.journeyPatternName="mission1"
requestContext.publishedLineName="115"
requestContext.routeRef1=fournisseur+":Route::1:LOC"
requestContext.directionName="Rambouillet"
requestContext.operatorRef1=fournisseur+":Operator::SNCF:"
requestContext.originRef1="STIF:StopPoint:Q:108935:"
requestContext.originName1="Arrêt 1"
requestContext.placeRef1="STIF:StopPoint:Q:108943:"
requestContext.placeName1="Arrêt 5"
requestContext.destinationRef1="STIF:StopPoint:Q:108949:"
requestContext.destinationName1="Arrêt 10"
requestContext.vehicleJourneyName1="Course 1"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse = getHeureSuivante(1)
requestContext.originAimedDepartureTime1=heureDepartCourse.toXMLFormat();
requestContext.destinationAimedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,20,0)
//MonitoredCall
requestContext.stopPointRef1=requestContext.monitoringRef
requestContext.stopPointName1="Arrêt 2"
requestContext.aimedArrivalTime1= getAvecMinuteSeconde(heureDepartCourse,2,0).toXMLFormat()
//requestContext.aimedArrivalTime1="2014-04-29T13:00:00.000Z"
requestContext.actualArrivalTime1= getAvecMinuteSeconde(heureDepartCourse,2,1).toXMLFormat()
//requestContext.actualArrivalTime1 = "2014-04-29T13:00:00.000+02:00"
requestContext.expectedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,2,2).toXMLFormat()

requestContext.aimedDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,41).toXMLFormat()
requestContext.actualDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,42).toXMLFormat()
requestContext.expectedDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,43).toXMLFormat()


// passage 2 / course 2
requestContext.monitoringRef2 = holder["//siri:MonitoringRef"]
requestContext.itemIdenfier2=fournisseur+":Item::2:LOC"
requestContext.lineRef2="STIF:Line::004004009:"
requestContext.dataFrameRef2="any"
requestContext.datedVehicleJourneyRef2=fournisseur+":VehicleJourney::2:LOC"
requestContext.journeyPatternRef2=fournisseur+":JourneyPattern::2:LOC"
requestContext.routeRef2=fournisseur+":Route::1:LOC"
requestContext.operatorRef2=fournisseur+":Operator::SNCF:"
requestContext.originRef2="STIF:StopPoint:Q:108935:"
requestContext.originName2="Arrêt 1"
requestContext.placeRef2="STIF:StopPoint:Q:108943:"
requestContext.placeName2="Arrêt 5"
requestContext.destinationRef2="STIF:StopPoint:Q:108949:"
requestContext.destinationName2="Arrêt 10"
requestContext.vehicleJourneyName2="Course 2"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse2 = getHeureSuivante(2)
requestContext.originAimedDepartureTime2=heureDepartCourse2.toXMLFormat();
requestContext.destinationAimedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,20,0)
//MonitoredCall
requestContext.stopPointRef2=requestContext.monitoringRef
requestContext.stopPointName2="Arrêt 2"
requestContext.aimedArrivalTime2= getAvecMinuteSeconde(heureDepartCourse2,2,0).toXMLFormat()
requestContext.actualArrivalTime2= getAvecMinuteSeconde(heureDepartCourse2,2,1).toXMLFormat()
requestContext.expectedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,2,2).toXMLFormat()

requestContext.aimedDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,41).toXMLFormat()
requestContext.actualDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,42).toXMLFormat()
requestContext.expectedDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,43).toXMLFormat()



// Methodes utilitaires DATE
// Methode Date permettant d'avoir l'heure courante + heure
def getHeureSuivante(int heure){
	def calendar = Calendar.getInstance();
	calendar.add(Calendar.HOUR,heure);
	calendar.set(Calendar.MINUTE, 0);
	calendar.set(Calendar.SECOND, 0);
	calendar.set(Calendar.MILLISECOND, 0);
	def heureSuivante = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return heureSuivante;
}

// Methode permettant de setter les minites et secondes sur l'heure passée
def getAvecMinuteSeconde(javax.xml.datatype.XMLGregorianCalendar xmlCalendar, int minute, int seconde){ 
	Calendar calendar = xmlCalendar.toGregorianCalendar();	
	calendar.set(Calendar.MINUTE, minute);
	calendar.set(Calendar.SECOND, seconde);
	def date = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return date;
      
}
</con:script><con:responseContent><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:new="http://new.webservice.namespace" xmlns:siri="http://www.siri.org.uk/">
   <soapenv:Header/>
   <soapenv:Body>
      <new:GetStopMonitoringResponse>
         <ServiceDeliveryInfo>
            <siri:ResponseTimestamp>${=javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())}</siri:ResponseTimestamp>
            <siri:ProducerRef>${producerRef}</siri:ProducerRef>
            <siri:ResponseMessageIdentifier>SNCF-ACCES:ResponseMessage::1:LOC</siri:ResponseMessageIdentifier>
		  <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
         </ServiceDeliveryInfo>
         <Answer>
            <siri:StopMonitoringDelivery version="2.0[FR-IDF-2.4]">
               <siri:ResponseTimestamp>${recordedAtTime}</siri:ResponseTimestamp>
               <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
               <siri:Status>true</siri:Status>
               <!-- 1 er passage-->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef}</siri:JourneyPatternRef>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef1}</siri:RouteRef>
                     <siri:PublishedLineName>${publishedLineName}</siri:PublishedLineName>
                     <siri:DirectionName>${directionName}</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                     <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef1}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie1</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef1}</siri:OriginRef>
                     <siri:OriginName>${originName1}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef1}</siri:PlaceRef>
                        <siri:PlaceName>${placeName1}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef1}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName1}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName1}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime1}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime1}</siri:DestinationAimedArrivalTime>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <!-- MonitoredCall 1er passage-->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef1}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName1}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName1}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime1}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime1}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime1}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:AimedDepartureTime>${aimedDepartureTime1}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime1}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime1}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
                <!-- 2ème passage -->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier2}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef2}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef2}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef2}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef2}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef2}</siri:JourneyPatternRef>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef2}</siri:RouteRef>
                     <siri:PublishedLineName>N</siri:PublishedLineName>
                     <siri:DirectionName>Rambouillet</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                      <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef2}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie2</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef2}</siri:OriginRef>
                     <siri:OriginName>${originName2}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef2}</siri:PlaceRef>
                        <siri:PlaceName>${placeName2}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef2}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName2}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName2}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course 2</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime2}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime2}</siri:DestinationAimedArrivalTime>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <!--  MonitoredCall 2ème passage -->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef2}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName2}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName2}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime2}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime2}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime2}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:AimedDepartureTime>${aimedDepartureTime2}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime2}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime2}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
            </siri:StopMonitoringDelivery>
         </Answer>
         <AnswerExtension>
            <!--You may enter ANY elements at this point-->
         </AnswerExtension>
      </new:GetStopMonitoringResponse>
   </soapenv:Body>
</soapenv:Envelope>]]></con:responseContent><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetStopMonitoring"/></con:response><con:dispatchConfig/></con:mockOperation><con:properties/></con:mockService><con:mockService port="8080" path="/test331Producer" host="localhost" name="test331Producer" bindToHostOnly="false" docroot=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.mock.WsdlMockService@require-soap-action">false</con:setting></con:settings><con:mockOperation name="GetStopMonitoring" interface="SiriSOAPBinding" operation="GetStopMonitoring"><con:settings/><con:dispatchStyle>SEQUENCE</con:dispatchStyle><con:defaultResponse>Response 1</con:defaultResponse><con:response name="Response 1" encoding="UTF-8"><con:settings/><con:script>// create XmlHolder for request content
def holder = new com.eviware.soapui.support.XmlHolder( mockRequest.requestContent )
def fournisseur = "SNCF-ACCES"
// define namespace
holder.namespaces["siri"] = "http://www.siri.org.uk/"
// récupération de l'id message de la request
requestContext.idMessage = holder["//siri:MessageIdentifier"][0]
requestContext.monitoringRef = holder["//siri:MonitoringRef"]
requestContext.version = holder["//Request/@version"].toString()

// identifiant utilisé (en coherence avec le dataset redis)
requestContext.producerRef="SNCF-ACCES"
requestContext.recordedAtTime = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())
// Passage 1 / course 1
requestContext.itemIdenfier=fournisseur+":Item::1:LOC"
requestContext.lineRef="STIF:Line::004004009:"
requestContext.dataFrameRef="any"
requestContext.datedVehicleJourneyRef=fournisseur+":VehicleJourney::1:LOC"
requestContext.journeyPatternRef=fournisseur+":JourneyPattern::1:LOC"
requestContext.journeyPatternName="mission1"
requestContext.publishedLineName="115"
requestContext.routeRef1=fournisseur+":Route::1:LOC"
requestContext.directionName="Rambouillet"
requestContext.operatorRef1=fournisseur+":Operator::SNCF:"
requestContext.originRef1="STIF:StopPoint:Q:108935:"
requestContext.originName1="Arrêt 1"
requestContext.placeRef1="STIF:StopPoint:Q:108943:"
requestContext.placeName1="Arrêt 5"
requestContext.destinationRef1="STIF:StopPoint:Q:108949:"
requestContext.destinationName1="Arrêt 10"
requestContext.vehicleJourneyName1="Course 1"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse = getHeureSuivante(1)
requestContext.originAimedDepartureTime1=heureDepartCourse.toXMLFormat();
requestContext.destinationAimedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,20,0)
//MonitoredCall
requestContext.stopPointRef1=requestContext.monitoringRef
requestContext.stopPointName1="Arrêt 2"
requestContext.aimedArrivalTime1= getAvecMinuteSeconde(heureDepartCourse,2,0).toXMLFormat()
//requestContext.aimedArrivalTime1="2014-04-29T13:00:00.000Z"
requestContext.actualArrivalTime1= getAvecMinuteSeconde(heureDepartCourse,2,1).toXMLFormat()
//requestContext.actualArrivalTime1 = "2014-04-29T13:00:00.000+02:00"
requestContext.expectedArrivalTime1=getAvecMinuteSeconde(heureDepartCourse,2,2).toXMLFormat()

requestContext.aimedDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,41).toXMLFormat()
requestContext.actualDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,42).toXMLFormat()
requestContext.expectedDepartureTime1=getAvecMinuteSeconde(heureDepartCourse,2,43).toXMLFormat()


// passage 2 / course 2
requestContext.monitoringRef2 = holder["//siri:MonitoringRef"]
requestContext.itemIdenfier2=fournisseur+":Item::2:LOC"
requestContext.lineRef2="STIF:Line::004004009:"
requestContext.dataFrameRef2="any"
requestContext.datedVehicleJourneyRef2=fournisseur+":VehicleJourney::2:LOC"
requestContext.journeyPatternRef2=fournisseur+":JourneyPattern::2:LOC"
requestContext.routeRef2=fournisseur+":Route::1:LOC"
requestContext.operatorRef2=fournisseur+":Operator::SNCF:"
requestContext.originRef2="STIF:StopPoint:Q:108935:"
requestContext.originName2="Arrêt 1"
requestContext.placeRef2="STIF:StopPoint:Q:108943:"
requestContext.placeName2="Arrêt 5"
requestContext.destinationRef2="STIF:StopPoint:Q:108949:"
requestContext.destinationName2="Arrêt 10"
requestContext.vehicleJourneyName2="Course 2"
// heure de départ au 1er arrêt et dernier arrêt de la course
def heureDepartCourse2 = getHeureSuivante(2)
requestContext.originAimedDepartureTime2=heureDepartCourse2.toXMLFormat();
requestContext.destinationAimedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,20,0)
//MonitoredCall
requestContext.stopPointRef2=requestContext.monitoringRef
requestContext.stopPointName2="Arrêt 2"
requestContext.aimedArrivalTime2= getAvecMinuteSeconde(heureDepartCourse2,2,0).toXMLFormat()
requestContext.actualArrivalTime2= getAvecMinuteSeconde(heureDepartCourse2,2,1).toXMLFormat()
requestContext.expectedArrivalTime2=getAvecMinuteSeconde(heureDepartCourse2,2,2).toXMLFormat()

requestContext.aimedDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,41).toXMLFormat()
requestContext.actualDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,42).toXMLFormat()
requestContext.expectedDepartureTime2=getAvecMinuteSeconde(heureDepartCourse2,2,43).toXMLFormat()



// Methodes utilitaires DATE
// Methode Date permettant d'avoir l'heure courante + heure
def getHeureSuivante(int heure){
	def calendar = Calendar.getInstance();
	calendar.add(Calendar.HOUR,heure);
	calendar.set(Calendar.MINUTE, 0);
	calendar.set(Calendar.SECOND, 0);
	calendar.set(Calendar.MILLISECOND, 0);
	def heureSuivante = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return heureSuivante;
}

// Methode permettant de setter les minites et secondes sur l'heure passée
def getAvecMinuteSeconde(javax.xml.datatype.XMLGregorianCalendar xmlCalendar, int minute, int seconde){ 
	Calendar calendar = xmlCalendar.toGregorianCalendar();	
	calendar.set(Calendar.MINUTE, minute);
	calendar.set(Calendar.SECOND, seconde);
	def date = javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(calendar);
	return date;
      
}
</con:script><con:responseContent><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:new="http://new.webservice.namespace" xmlns:siri="http://www.siri.org.uk/">
   <soapenv:Header/>
   <soapenv:Body>
      <new:GetStopMonitoringResponse>
         <ServiceDeliveryInfo>
            <siri:ResponseTimestamp>${=javax.xml.datatype.DatatypeFactory.newInstance().newXMLGregorianCalendar(GregorianCalendar.getInstance())}</siri:ResponseTimestamp>
            <siri:ProducerRef>${producerRef}</siri:ProducerRef>
            <siri:ResponseMessageIdentifier>SNCF-ACCES:ResponseMessage::${=String.valueOf((int)Math.random()*1000000000)}:LOC</siri:ResponseMessageIdentifier>
		  <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
         </ServiceDeliveryInfo>
         <Answer>
            <siri:StopMonitoringDelivery version="${version}">
               <siri:ResponseTimestamp>${recordedAtTime}</siri:ResponseTimestamp>
               <siri:RequestMessageRef>${idMessage}</siri:RequestMessageRef>
               <siri:Status>true</siri:Status>
               <!-- 1 er passage-->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef}</siri:JourneyPatternRef>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef1}</siri:RouteRef>
                     <siri:PublishedLineName>${publishedLineName}</siri:PublishedLineName>
                     <siri:DirectionName>${directionName}</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                     <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef1}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie1</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef1}</siri:OriginRef>
                     <siri:OriginName>${originName1}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef1}</siri:PlaceRef>
                        <siri:PlaceName>${placeName1}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef1}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName1}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName1}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime1}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime1}</siri:DestinationAimedArrivalTime>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <!-- MonitoredCall 1er passage-->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef1}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName1}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName1}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime1}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime1}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime1}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:AimedDepartureTime>${aimedDepartureTime1}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime1}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime1}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
                <!-- 2ème passage -->
               <siri:MonitoredStopVisit>
                  <siri:RecordedAtTime>${recordedAtTime}</siri:RecordedAtTime>
                  <siri:ItemIdentifier>${itemIdenfier2}</siri:ItemIdentifier>
                  <siri:MonitoringRef>${monitoringRef2}</siri:MonitoringRef>
                  <siri:MonitoredVehicleJourney>
                     <siri:LineRef>${lineRef2}</siri:LineRef>
                      <!-- FramedVehicleJourneyRef -->
                     <siri:FramedVehicleJourneyRef>
                        <siri:DataFrameRef>${dataFrameRef2}</siri:DataFrameRef>
                        <siri:DatedVehicleJourneyRef>${datedVehicleJourneyRef2}</siri:DatedVehicleJourneyRef>
                     </siri:FramedVehicleJourneyRef>
                     <!-- JourneyPatternInfoGroup -->
                     <siri:JourneyPatternRef>${journeyPatternRef2}</siri:JourneyPatternRef>
                     <siri:VehicleMode>rail</siri:VehicleMode>
                     <siri:RouteRef>${routeRef2}</siri:RouteRef>
                     <siri:PublishedLineName>N</siri:PublishedLineName>
                     <siri:DirectionName>Rambouillet</siri:DirectionName>
                     <!-- VehicleJourneyInfo-->
                      <!-- ServiceInfo-->
                     <siri:OperatorRef>${operatorRef2}</siri:OperatorRef>
                     <siri:ProductCategoryRef>categorie2</siri:ProductCategoryRef>
                     <siri:ServiceFeatureRef>train voyageurs</siri:ServiceFeatureRef>
                     <siri:VehicleFeatureRef>longTrain</siri:VehicleFeatureRef>
                     <siri:OriginRef>${originRef2}</siri:OriginRef>
                     <siri:OriginName>${originName2}</siri:OriginName>
                     <siri:Via> 
                        <siri:PlaceRef>${placeRef2}</siri:PlaceRef>
                        <siri:PlaceName>${placeName2}</siri:PlaceName>
                     </siri:Via>
                     <siri:DestinationRef>${destinationRef2}</siri:DestinationRef>
                     <siri:DestinationName>${destinationName2}</siri:DestinationName>
                     <siri:VehicleJourneyName>${vehicleJourneyName2}</siri:VehicleJourneyName>
                     <siri:JourneyNote>ceci est une description de course 2</siri:JourneyNote>
                     <siri:HeadwayService>false</siri:HeadwayService>
                     <siri:OriginAimedDepartureTime>${originAimedDepartureTime2}</siri:OriginAimedDepartureTime>
                     <siri:DestinationAimedArrivalTime>${destinationAimedArrivalTime2}</siri:DestinationAimedArrivalTime>
                     <!--JourneyProgressInfo:-->
                     <siri:Monitored>true</siri:Monitored>
                     <!--<siri:MonitoringError></siri:MonitoringError>-->
                     <siri:InCongestion>false</siri:InCongestion>
                     <siri:InPanic>false</siri:InPanic>
                     <siri:VehicleLocation id="1" srsName="1">
                        <siri:Longitude>2.227435</siri:Longitude>
                        <siri:Latitude>48.785067</siri:Latitude>
                        <siri:Coordinates>N 48 47.107, E 2 13.662</siri:Coordinates>
                        <siri:Precision>1</siri:Precision>
                     </siri:VehicleLocation>
                     <siri:Bearing>1</siri:Bearing>
                     <siri:Occupancy>full</siri:Occupancy>
                     <siri:Delay>PT1M</siri:Delay>
                     <!--  MonitoredCall 2ème passage -->
                     <siri:MonitoredCall>
                        <siri:StopPointRef>${stopPointRef2}</siri:StopPointRef>
                        <siri:Order>1</siri:Order> 
                        <siri:StopPointName>${stopPointName2}</siri:StopPointName>
                        <siri:VehicleAtStop>false</siri:VehicleAtStop>
                        <siri:PlatformTraversal>false</siri:PlatformTraversal>
                        <siri:DestinationDisplay>${destinationName2}</siri:DestinationDisplay>
                        <siri:AimedArrivalTime>${aimedArrivalTime2}</siri:AimedArrivalTime>
                        <siri:ActualArrivalTime>${actualArrivalTime2}</siri:ActualArrivalTime>
                        <siri:ExpectedArrivalTime>${expectedArrivalTime2}</siri:ExpectedArrivalTime>
                        <siri:ArrivalStatus>onTime</siri:ArrivalStatus>
                        <siri:ArrivalPlatformName>quai 1</siri:ArrivalPlatformName>
                        <siri:AimedDepartureTime>${aimedDepartureTime2}</siri:AimedDepartureTime>
                        <siri:ActualDepartureTime>${actualDepartureTime2}</siri:ActualDepartureTime>
                        <siri:ExpectedDepartureTime>${expectedDepartureTime2}</siri:ExpectedDepartureTime>
                        <siri:DepartureStatus>onTime</siri:DepartureStatus>
                        <siri:DeparturePlatformName>quai 1</siri:DeparturePlatformName>
                        <siri:DepartureBoardingActivity>boarding</siri:DepartureBoardingActivity>
                        <siri:AimedHeadwayInterval>PT1M</siri:AimedHeadwayInterval>
                        <siri:ExpectedHeadwayInterval>PT1M</siri:ExpectedHeadwayInterval>
                     </siri:MonitoredCall>
                  </siri:MonitoredVehicleJourney>
               </siri:MonitoredStopVisit>
            </siri:StopMonitoringDelivery>
         </Answer>
         <AnswerExtension>
            <!--You may enter ANY elements at this point-->
         </AnswerExtension>
      </new:GetStopMonitoringResponse>
   </soapenv:Body>
</soapenv:Envelope>]]></con:responseContent><con:wsaConfig mustUnderstand="NONE" version="200508" action="GetStopMonitoring"/></con:response><con:dispatchConfig/></con:mockOperation><con:properties/></con:mockService><con:properties/><con:wssContainer/><con:sensitiveInformation/></con:soapui-project>